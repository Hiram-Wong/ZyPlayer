diff --git a/dist/index.es.js b/dist/index.es.js
index 7c8e168da09439a3169ad59a7f8ff2c37f30ea68..88ca1f38dab846ad12f6c6e8b4ccee8976f66f44 100644
--- a/dist/index.es.js
+++ b/dist/index.es.js
@@ -1110,9 +1110,6 @@ const _Player = class _Player {
 };
 _Player.players = [];
 let Player = _Player;
-if (globalThis.window) {
-  console.log("%cOPlayer%c v%s\n %c\nOh! Another HTML5 video player.\nhttps://github.com/shiyiya/oplayer\n", "font-size:32px;", "font-size:12px;color:#999999;", Player.version, "font-size:14px;");
-}
 export {
   $,
   Player,
diff --git a/dist/index.min.js b/dist/index.min.js
index 0e2be040af077a0e16eb41c1762f698c4d9b3db9..6c837e638d0d36631ced70a9adb071bd1638ae09 100644
--- a/dist/index.min.js
+++ b/dist/index.min.js
@@ -5,4 +5,4 @@
  * author: shiyiya
  * homepage: https://github.com/shiyiya/oplayer
  */
-!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).OPlayer=t()}(this,(function(){"use strict";var e,t,i,s,n,r,o,l,a;const u=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","encrypted","waitingforkey","enterpictureinpicture","leavepictureinpicture"],c=["contextmenu"],h=["loadedplugin","videoqualitychange","videosourcechange","destroy"],d=[].concat(u,c,h);class p{constructor(){this.events=Object.create(null)}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}onAny(e,t){e.forEach((e=>this.on(e,t)))}once(e,t){const i=i=>{t({type:e,payload:i.payload})};i.raw=t,this.on(e,i)}off(e,t){if(this.events[e])for(let i=0;i<this.events[e].length;i++){const s=this.events[e][i];s!=t&&t!=s.raw||this.events[e].splice(i,1)}}offAny(e){this.events[e]=[]}offAll(){this.events=Object.create(null)}emit(e,t){var i,s;const n=[];null==(i=this.events[e])||i.forEach((i=>{i({type:e,payload:t}),i.raw&&n.push(i)})),null==(s=this.events["*"])||s.forEach((i=>{i({type:e,payload:t}),i.raw&&n.push(i)})),n.forEach((t=>{this.off(e,t)}))}}function g(e){return Boolean(e&&"object"==typeof e&&!Array.isArray(e))}function f(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];if(!i.length)return e;const n=i.shift();if(g(e)&&g(n))for(const r in n)g(n[r])?(e[r]||Object.assign(e,{[r]:{}}),f(e[r],n[r])):Object.assign(e,{[r]:n[r]});return f.apply(void 0,[e].concat(i))}const v=Object.freeze(Object.defineProperty({__proto__:null,isObject:g,isPlainObject:function(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},mergeDeep:f},Symbol.toStringTag,{value:"Module"})),y={Play:"播放",Pause:"暂停",Loop:"循环播放",Volume:"音量","Volume: %s":"音量：%s",Mute:"静音",Speed:"播放速度",LIVE:"直播",Language:"语言",Screenshot:"截图",Subtitle:"字幕",Quality:"画质",Fullscreen:"全屏",Settings:"设置","Picture in Picture":"画中画",Danmaku:"弹幕",Display:"显示",Opacity:"透明度",FontSize:"字体大小","Display Area":"显示区域",Off:"关闭",Auto:"自动",Default:"默认",Normal:"正常","%ss":"%s秒",Close:"关闭","Can be closed after %ss":"%s秒后可关闭广告"},m={Play:"پخش",Next:"بعدی",Previous:"قبلی",Pause:"توقف",Loop:"تکرار",Volume:"حجم صدا","Volume: %s":"حجم صدا: %s",Mute:"بی‌صدا کردن",Speed:"سرعت",LIVE:"زنده",WebFullscreen:"تمام صفحه وب",Chromecast:"کروم کاست",AirPlay:"ایر پلی",Playlist:"پلی‌لیست",Heatmap:"نقشهٔ حرارتی",Language:"زبان",Screenshot:"عکس صفحه",Subtitle:"زیرنویس",Quality:"کیفیت",Fullscreen:"تمام صفحه",Settings:"تنظیمات","Picture in Picture":"تصویر در تصویر",Danmaku:"دانماکو",Display:"نمایش",Opacity:"شفافیت",FontSize:"اندازه فونت","Display Area":"ناحیه نمایش",Off:"خاموش",Auto:"خودکار",Default:"پیش‌فرض",Normal:"عادی","%ss":"%s ثانیه",Close:"بستن","Can be closed after %ss":"قابل بستن پس از %s ثانیه"},b={Play:"پلې‌کول",Next:"بل",Previous:"مخکېنی",Pause:"تم کول",Loop:"تکرار",Volume:"غږ","Volume: %s":"غږ: %s",Mute:"غلی کول",Speed:"چټکتیا",LIVE:"ژوندی",WebFullscreen:"د تمام صفحه وب",Chromecast:"کروم کاسټ",AirPlay:"ایر پلی",Playlist:"پلې‌لسټ",Heatmap:"د ډېرو کتلو نقشه",Language:"ژبه",Screenshot:"سکرین شاټ",Subtitle:"لاندې لیک",Quality:"کیفیت",Fullscreen:"پوره پرده","":"د متن ډیکوډر ملاتړ نه لري",Settings:"ترتیبات","Picture in Picture":"انځور په انځور",Danmaku:"دانماکو",Display:"ښکاره کول",Opacity:"روڼوالی",FontSize:"د خط اندازه","Display Area":"د ښودلو ساحه",Off:"بند",Auto:"خودکار",Default:"پېل شوی",Normal:"عادي","%ss":"%s ثانیه",Close:"بندول","Can be closed after %ss":"د %s ثانیو وروسته تړل کېدای شي"};class E{constructor(e){this.languages={zh:y,"zh-CN":y,fa:m,pa:b,en:Object.keys(y).reduce(((e,t)=>(e[t]=t,e)),{})},this.lang="auto"===e?navigator.language:e,this.languages[this.lang]||navigator.languages.some((e=>{if(this.languages[e])return this.lang=e,!0;if(-1!==e.indexOf("-")){const t=e.split("-")[0];if(t&&this.languages[t])return this.lang=t,!0}return!1})),this.languages[this.lang]||(this.lang="en")}get(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];const n=this.languages[this.lang][e];if(null==n)return e;let r=0;return n.replace(/%s/gi,(()=>{var e;return null!==(e=i[r++])&&void 0!==e?e:""}))}update(e){f(this.languages,e)}}function P(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=1540483477,s=24,n=t^e.length,r=e.length,o=0;for(;r>=4;){let t=w(e,o);t=O(t,i),t^=t>>>s,t=O(t,i),n=O(n,i),n^=t,o+=4,r-=4}switch(r){case 3:n^=S(e,o),n^=e.charCodeAt(o+2)<<16,n=O(n,i);break;case 2:n^=S(e,o),n=O(n,i);break;case 1:n^=e.charCodeAt(o),n=O(n,i)}return n^=n>>>13,n=O(n,i),n^=n>>>15,n>>>0}(e).toString(36)}function w(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function S(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function O(e,t){return(65535&(e|=0))*(t|=0)+(((e>>>16)*t&65535)<<16)|0}var k,$=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function x(e){if(-1===e.indexOf(","))return[e];for(var t,i=[],s=[],n=0;t=$.exec(e);)switch(t[0]){case"(":n++;break;case")":n--;break;case",":if(n)break;i.push(t.index)}for(t=i.length;t--;)s.unshift(e.slice(i[t]+1)),e=e.slice(0,i[t]);return s.unshift(e),s}function A(e,t){let i=x(e);return x(t).map((e=>e.indexOf("&")>=0?e:"&"+e)).reduce(((e,t)=>e.concat(i.map((e=>t.replace(/\&/g,e))))),[]).join(",")}function F(e){return 0===e.indexOf("@media")}function T(e){return 0===e.indexOf("@keyframes")}function j(e,t){var i;let s=t.rules,n=t.mediaQuery,r=t.globalSelector,o={};return r&&(e=r),null==(i=Object.keys(s))||i.forEach((t=>{if(function(e){return 0===e.indexOf("@global")}(t)){const i=t,l=(t=t.substring(8)).indexOf("&");let a;-1!=l?(a=A(e,t),r=t.substring(0,l-1).trim()):a=t,f(o,j(a,{mediaQuery:n,rules:s[i],globalSelector:a}))}else if(function(e){let t=[":",".","[",">"," "],i=!1,s=e.charAt(0);for(let n=0;n<t.length;n++)if(s===t[n]){i=!0;break}return i||e.indexOf("&")>=0}(t))f(o,j(A(e,t),{rules:s[t],mediaQuery:n}));else if(F(t))f(o,j(e,{mediaQuery:(d=n,p=t,d?"@media "+d.substring(6)+" and "+p.substring(6):p),rules:s[t]}));else{var i,l,a,u,c,h;if(n)null!==(i=o[n])&&void 0!==i||(o[n]={}),null!==(u=(l=o[n])[a=e])&&void 0!==u||(l[a]={}),o[n][e][t]=s[t];else if(T(t))o[t]=s[t];else null!==(h=o[c=e])&&void 0!==h||(o[c]={}),o[e][t]=s[t]}var d,p})),o}function C(e){let t=[];for(const i in e)if(Object.hasOwnProperty.call(e,i)){const s=e[i];g(s)?t.push(i+"{"+C(s)+"}"):t.push(i+":"+s)}return/^\d%/.test(t[0])?t.join(" "):t.join(";")}function L(e){let t=[];for(const i in e)if(Object.hasOwnProperty.call(e,i)){const s=e[i];if(F(i))t.push(i+"{"+L(s)+"}");else if(T(i))t.push(i+"{"+C(s)+"}");else{const e=Object.entries(s).map((e=>e[0]+":"+e[1])).join(";");t.push(i+"{"+e+"}")}}return t}function D(e,t){return L(j(t,{rules:e}))}(e=>{function t(t){if(!(0,e.isBrowser)())return null;let i=document.createElement("style");i.setAttribute("data-"+t,""),i.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(i);for(let e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===i)return document.styleSheets.item(e);return null}e.create=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const s=-1!==e.indexOf("#"),n=-1!==e.indexOf("."),r=s?e.split("#"):n?e.split("."):[e],o=r[0],l=r[1],a=document.createElement(o);return s&&(a.id=l),n&&a.classList.add(l),i&&(a.innerHTML=i),Object.keys(t).forEach((e=>{const i=t[e];"video"!==o&&"audio"!==o||"boolean"!=typeof i?void 0!==i&&a.setAttribute(e,""+i):i&&a.setAttribute(e,"")})),a},e.render=(e,t)=>t.appendChild(e),e.isBrowser=()=>Boolean("undefined"!=typeof globalThis&&globalThis.document&&globalThis.document.documentElement),e.createSheet=t;const i=(()=>{const e=Object.create({});return t=>{const i="object"==typeof t?JSON.stringify(t):t;return e[i]||(e[i]="css-"+P(i)),e[i]}})();e.createCss=e=>{let t=e.sheet,s=e.ssrData;return function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const l=Boolean(r[0]&&r[0].length&&r[0].raw);let a="";if(l){let e=r[0];a+=e[0];for(let t=1;t<r.length;t++)a+="string"!=typeof r[t]?"":r[t],a+=e[t]}else a="string"==typeof r[0]?r[0]:JSON.stringify(r[0]);const u=i(a);if(t)for(let i=0;i<t.cssRules.length;i++)if((null==(e=t.cssRules[i])?void 0:e.selectorText)=="."+u)return u;let c=["."+u+"{"+a+"}"];return l||"object"!=typeof r[0]||(c=D(r[0],"."+u)),t?c.forEach((e=>{t.insertRule(e,t.cssRules.length)})):s=s.concat(c),u}},e.createStyled=()=>{const i=[],s=t("oplayer");return{css:(0,e.createCss)({sheet:s,ssrData:i}),getCssValue:()=>i}};var s=(0,e.createStyled)();e.css=s.css,e.getCssValue=s.getCssValue,e.cls=e=>"css-"+P(e)})(k||(k={}));const _=k,N=/(iPad)/gi.test(null==(e=globalThis.navigator)?void 0:e.userAgent)||/Macintosh/i.test(null==(t=globalThis.navigator)?void 0:t.userAgent)&&Boolean(null==(i=globalThis.navigator)?void 0:i.maxTouchPoints)&&(null==(s=globalThis.navigator)?void 0:s.maxTouchPoints)>=1,R=/iPhone/gi.test(null==(n=globalThis.navigator)?void 0:n.userAgent),V=/^((?!chrome|android).)*safari/i.test(null==(r=globalThis.navigator)?void 0:r.userAgent),I=R||N,M=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(null==(o=globalThis.navigator)?void 0:o.userAgent)||I,q=/mqqbrowser/i.test(null==(l=globalThis.navigator)?void 0:l.userAgent)&&!/ qq/i.test(null==(a=globalThis.navigator)?void 0:a.userAgent),z=Object.freeze(Object.defineProperty({__proto__:null,isIOS:I,isMobile:M,isQQBrowser:q,isSafari:V,isiPad:N,isiPhone:R},Symbol.toStringTag,{value:"Module"})),B={autoplay:!1,muted:!1,loop:!1,volume:1,preload:"metadata",playbackRate:1,playsinline:!0,lang:"auto",source:{},videoAttr:{},isLive:!1,autopause:!0,isNativeUI:()=>q},Q=class e{constructor(e,t){if(this.plugins=[],this.context={},this.listeners=Object.create(null),this.hasError=!1,this.isSourceChanging=!1,this.container="string"==typeof e?document.querySelector(e):e,!this.container)throw new Error(("string"==typeof e?e:"Element")+"does not exist");this.options=Object.assign({},B,"string"==typeof t?{source:{src:t}}:t),this.locales=new E(this.options.lang),this.eventEmitter=new p}static make(t,i){return new e(t,i)}use(e){return e.forEach((e=>{this.plugins.push(e)})),this}create(){return this.render(),this.initEvent(),this.plugins.forEach((e=>this.applyPlugin(e,!0))),this.options.source.src&&this.load(this.options.source),e.players.push(this),this}initEvent(){this.listeners.error=e=>{this.$video.error&&(this.hasError=!0,this.eventEmitter.emit("error",e))},this.$video.addEventListener("error",(e=>this.listeners.error(e)));const e=(e,t)=>{this.eventEmitter.emit(e,t)};[[this.$video,["fullscreenchange","webkitbeginfullscreen","webkitendfullscreen"],["fullscreenerror","webkitfullscreenerror","mozfullscreenerror"]],[this.$root,["fullscreenchange","webkitfullscreenchange"],["fullscreenerror","webkitfullscreenerror","mozfullscreenerror"]]].forEach((t=>{const i=t[0];t.slice(1).forEach((t=>{const s=t[0];this.listeners[s]=e,t.forEach((e=>{i.addEventListener(e,(e=>{this.listeners[s](s,e)}),{passive:!0})}))}))})),[[this.$video,u],[this.$root,c]].forEach((t=>{let i=t[0];t[1].forEach((t=>{this.listeners[t]||(this.listeners[t]=e,i.addEventListener(t,(e=>{var i;null==(i=this.listeners)||i[t](t,e)}),{passive:!0}))}))}))}render(){this.$video=_.create("video."+_.css("\n        width: 100%;\n        height: 100%;\n        display: block;\n        position: relative;\n      "),Object.assign({autoplay:this.options.autoplay,loop:this.options.loop,playsinline:this.options.playsinline,"webkit-playsinline":this.options.playsinline,"x5-playsinline":this.options.playsinline,preload:this.options.preload,poster:this.options.source.poster},this.options.videoAttr));const e=this.options,t=e.muted,i=e.volume,s=e.playbackRate;t&&this.mute(),this.$video.volume=i,setTimeout((()=>{this.$root&&this.setPlaybackRate(s)})),this.$root=_.create("div."+_.css("\n        position: relative;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background-color: #000;\n      ")),_.render(this.$video,this.$root),_.render(this.$root,this.container)}async load(e){var t;await(null==(t=this.loader)?void 0:t.destroy()),this.loader=void 0;for(const i of this.plugins)if(i.load){const t=await i.load(this,e);if(0!=t&&!this.loader){this.loader=t,this.emit("loaderchange",t);break}}return this.loader||(this.$video.src=e.src),e}applyPlugin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.name,s=e.key;if(this.context[e.key||e.name])throw new Error("duplicate plugin");t||this.plugins.push(e);const n=e.apply(this);n&&(this.context[s||i]=n)}on(e,t){return"string"==typeof e?this.eventEmitter.on(e,t):Array.isArray(e)?this.eventEmitter.onAny(e,t):"function"==typeof e&&this.eventEmitter.on("*",e),this}once(e,t){this.eventEmitter.once(e,t)}off(e,t){this.eventEmitter.off(e,t)}emit(e,t){this.eventEmitter.emit(e,t)}setPoster(e){this.$video.poster=e}play(){if((this.$video.src||this.$video.currentSrc)&&!this.isSourceChanging){if(this.options.autopause)for(let t=0;t<e.players.length;t++){const i=e.players[t];i!=this&&i.pause()}return this.$video.play()}}pause(){return this.$video.pause()}togglePlay(){return this.isPlaying?this.pause():this.play()}mute(){this.$video.muted=!0}unmute(){this.$video.muted=!1}toggleMute(){this.isMuted?this.unmute():this.mute()}setVolume(e){this.$video.volume=e>1?1:e<0?0:e,this.$video.volume>0&&this.isMuted&&this.unmute()}setPlaybackRate(e){this.$video.playbackRate=e}seek(e){this.$video.currentTime=e}setLoop(e){this.$video.loop=e}async enterFullscreen(){this.isInPip&&await this.exitPip(),this._requestFullscreen?this._requestFullscreen.call(this.$root,{navigationUI:"hide"}):this.$video.webkitEnterFullscreen()}exitFullscreen(){return this._exitFullscreen.call(document)}get isFullscreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||this.$video.webkitEnterFullscreen}get isFullScreen(){return Boolean((document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)===this.$root||this.$video.webkitDisplayingFullscreen)}toggleFullScreen(){return this.isFullScreen?this.exitFullscreen():this.enterFullscreen()}get isPipEnabled(){return document.pictureInPictureEnabled}enterPip(){return this.$video.requestPictureInPicture()}exitPip(){return!!this.isInPip&&document.exitPictureInPicture()}get isInPip(){return document.pictureInPictureElement==this.$video}togglePip(){return this.isInPip?this.exitPip():this.enterPip()}changeQuality(e){return this._loader(e,{keepPlaying:!0,keepTime:!0,preEvent:"videoqualitychange",event:"videoqualitychanged",brokenEvent:"qualitychangeerror"})}changeSource(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._loader(e,{keepPlaying:t,preEvent:"videosourcechange",event:"videosourcechanged",brokenEvent:"sourcechangeerror"})}_loader(e,t){return new Promise(((i,s)=>{if(this.isSourceChanging)return s(Error("Previous Source is Changing."));const n=this.isPlaying,r=this.currentTime,o=this.volume,l=this.playbackRate;this.pause(),this.hasError=!1,this.isSourceChanging=!0,this.emit(t.preEvent,e);const a=t.keepPlaying,u=t.keepTime,c="none"==this.options.preload,h=c?"loadstart":"loadedmetadata",d=a&&n;let p;const g=i=>{this.$root&&(this.off(h,v),this.emit(t.brokenEvent,{source:p||e,error:i}),"videosourcechanged"==t.event?this.isSourceChanging=!1:this.load(this.options.source).then(f).finally((()=>{this.isSourceChanging=!1})),s(i))},f=()=>{o!=this.volume&&this.setVolume(o),l!=this.playbackRate&&this.setPlaybackRate(l),c&&u&&this.$video.load(),u&&!this.options.isLive&&this.seek(r),d&&!this.isPlaying&&this.$video.play(),Object.assign(this.options.source,p)},v=()=>{this.$root&&(this.off("error",g),f(),this.isSourceChanging=!1,this.emit(t.event,p),i())};return(e instanceof Promise?e:Promise.resolve(e)).then((e=>{if(!e.src)throw new Error("Empty Source");return p=e,this.$video.poster=e.poster||"",this.once("error",g),this.once(h,v),e})).then((e=>this.load(e))).catch(g)}))}destroy(){e.players.splice(e.players.indexOf(this),1);const t=this.eventEmitter,i=this.loader,s=this.plugins,n=this.container,r=this.$root,o=this.$video,l=this.isPlaying,a=this.isFullScreen,u=this.isInPip;t.emit("destroy"),t.offAll(),null==i||i.destroy(),s.forEach((e=>{var t;return!e.load&&(null==(t=e.destroy)?void 0:t.call(e))})),l&&this.pause(),a&&this.exitFullscreen(),u&&this.exitPip(),o.src&&URL.revokeObjectURL(o.src),n.removeChild(r),this.eventEmitter=this.locales=this.options=this.listeners=this.context=this.plugins=this.container=this.$root=this.$video=this.loader=void 0}get isNativeUI(){return this.options.isNativeUI()}get state(){return this.$video.readyState}get isPlaying(){return!this.$video.paused}get isMuted(){return this.$video.muted}get isEnded(){return this.$video.ended}get isLoop(){return this.$video.loop}get isAutoPlay(){return this.$video.autoplay}get duration(){return this.$video.duration}get buffered(){return this.$video.buffered}get currentTime(){return this.$video.currentTime}get volume(){return this.$video.volume}get playbackRate(){return this.$video.playbackRate}get _requestFullscreen(){return HTMLElement.prototype.requestFullscreen||HTMLElement.prototype.webkitRequestFullscreen||HTMLElement.prototype.mozRequestFullScreen||HTMLElement.prototype.msRequestFullscreen}get _exitFullscreen(){return Document.prototype.exitFullscreen||Document.prototype.webkitExitFullscreen||Document.prototype.cancelFullScreen||Document.prototype.mozCancelFullScreen||Document.prototype.msExitFullscreen}static get version(){return"1.2.38-beta.2"}};Q.players=[];let H=Q;globalThis.window&&console.log("%cOPlayer%c v%s\n %c\nOh! Another HTML5 video player.\nhttps://github.com/shiyiya/oplayer\n","font-size:32px;","font-size:12px;color:#999999;",H.version,"font-size:14px;");const U=(e,t,i)=>{var s;const n=document.createElement("script");n.src=e,n.onload=t,n.onerror=i;const r=document.getElementsByTagName("script")[0];null==(s=null==r?void 0:r.parentNode)||s.insertBefore(n,r)},W={},J=e=>void 0===e,K=Object.freeze(Object.defineProperty({__proto__:null,isUndefined:J,loadSDK:function(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:U;const r=e=>J(window[e])?window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:void 0:window[e],o=r(t);return o&&s(o)?Promise.resolve(o):new Promise(((s,o)=>{if(!J(W[e]))return void W[e].push({resolve:s,reject:o});W[e]=[{resolve:s,reject:o}];const l=t=>{var i;null==(i=W[e])||i.forEach((e=>e.resolve(t)))};if(!J(i)){const e=window[i];window[i]=function(){J(e)||e.apply(void 0,arguments),l(r(t))}}n(e,(()=>{J(i)&&l(r(t))}),(t=>{var i;null==(i=W[e])||i.forEach((e=>{e.reject(t)})),delete W[e]}))}))},loadScript:U},Symbol.toStringTag,{value:"Module"}));return Object.assign(H,{$:k,EVENTS:d,OH_EVENTS:h,VIDEO_EVENTS:u,PLAYER_EVENTS:c},v,z,K)}));
+!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).OPlayer=t()}(this,(function(){"use strict";var e,t,i,s,n,r,o,l,a;const u=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","encrypted","waitingforkey","enterpictureinpicture","leavepictureinpicture"],c=["contextmenu"],h=["loadedplugin","videoqualitychange","videosourcechange","destroy"],d=[].concat(u,c,h);class p{constructor(){this.events=Object.create(null)}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}onAny(e,t){e.forEach((e=>this.on(e,t)))}once(e,t){const i=i=>{t({type:e,payload:i.payload})};i.raw=t,this.on(e,i)}off(e,t){if(this.events[e])for(let i=0;i<this.events[e].length;i++){const s=this.events[e][i];s!=t&&t!=s.raw||this.events[e].splice(i,1)}}offAny(e){this.events[e]=[]}offAll(){this.events=Object.create(null)}emit(e,t){var i,s;const n=[];null==(i=this.events[e])||i.forEach((i=>{i({type:e,payload:t}),i.raw&&n.push(i)})),null==(s=this.events["*"])||s.forEach((i=>{i({type:e,payload:t}),i.raw&&n.push(i)})),n.forEach((t=>{this.off(e,t)}))}}function g(e){return Boolean(e&&"object"==typeof e&&!Array.isArray(e))}function f(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];if(!i.length)return e;const n=i.shift();if(g(e)&&g(n))for(const r in n)g(n[r])?(e[r]||Object.assign(e,{[r]:{}}),f(e[r],n[r])):Object.assign(e,{[r]:n[r]});return f.apply(void 0,[e].concat(i))}const v=Object.freeze(Object.defineProperty({__proto__:null,isObject:g,isPlainObject:function(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},mergeDeep:f},Symbol.toStringTag,{value:"Module"})),y={Play:"播放",Pause:"暂停",Loop:"循环播放",Volume:"音量","Volume: %s":"音量：%s",Mute:"静音",Speed:"播放速度",LIVE:"直播",Language:"语言",Screenshot:"截图",Subtitle:"字幕",Quality:"画质",Fullscreen:"全屏",Settings:"设置","Picture in Picture":"画中画",Danmaku:"弹幕",Display:"显示",Opacity:"透明度",FontSize:"字体大小","Display Area":"显示区域",Off:"关闭",Auto:"自动",Default:"默认",Normal:"正常","%ss":"%s秒",Close:"关闭","Can be closed after %ss":"%s秒后可关闭广告"},m={Play:"پخش",Next:"بعدی",Previous:"قبلی",Pause:"توقف",Loop:"تکرار",Volume:"حجم صدا","Volume: %s":"حجم صدا: %s",Mute:"بی‌صدا کردن",Speed:"سرعت",LIVE:"زنده",WebFullscreen:"تمام صفحه وب",Chromecast:"کروم کاست",AirPlay:"ایر پلی",Playlist:"پلی‌لیست",Heatmap:"نقشهٔ حرارتی",Language:"زبان",Screenshot:"عکس صفحه",Subtitle:"زیرنویس",Quality:"کیفیت",Fullscreen:"تمام صفحه",Settings:"تنظیمات","Picture in Picture":"تصویر در تصویر",Danmaku:"دانماکو",Display:"نمایش",Opacity:"شفافیت",FontSize:"اندازه فونت","Display Area":"ناحیه نمایش",Off:"خاموش",Auto:"خودکار",Default:"پیش‌فرض",Normal:"عادی","%ss":"%s ثانیه",Close:"بستن","Can be closed after %ss":"قابل بستن پس از %s ثانیه"},b={Play:"پلې‌کول",Next:"بل",Previous:"مخکېنی",Pause:"تم کول",Loop:"تکرار",Volume:"غږ","Volume: %s":"غږ: %s",Mute:"غلی کول",Speed:"چټکتیا",LIVE:"ژوندی",WebFullscreen:"د تمام صفحه وب",Chromecast:"کروم کاسټ",AirPlay:"ایر پلی",Playlist:"پلې‌لسټ",Heatmap:"د ډېرو کتلو نقشه",Language:"ژبه",Screenshot:"سکرین شاټ",Subtitle:"لاندې لیک",Quality:"کیفیت",Fullscreen:"پوره پرده","":"د متن ډیکوډر ملاتړ نه لري",Settings:"ترتیبات","Picture in Picture":"انځور په انځور",Danmaku:"دانماکو",Display:"ښکاره کول",Opacity:"روڼوالی",FontSize:"د خط اندازه","Display Area":"د ښودلو ساحه",Off:"بند",Auto:"خودکار",Default:"پېل شوی",Normal:"عادي","%ss":"%s ثانیه",Close:"بندول","Can be closed after %ss":"د %s ثانیو وروسته تړل کېدای شي"};class E{constructor(e){this.languages={zh:y,"zh-CN":y,fa:m,pa:b,en:Object.keys(y).reduce(((e,t)=>(e[t]=t,e)),{})},this.lang="auto"===e?navigator.language:e,this.languages[this.lang]||navigator.languages.some((e=>{if(this.languages[e])return this.lang=e,!0;if(-1!==e.indexOf("-")){const t=e.split("-")[0];if(t&&this.languages[t])return this.lang=t,!0}return!1})),this.languages[this.lang]||(this.lang="en")}get(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];const n=this.languages[this.lang][e];if(null==n)return e;let r=0;return n.replace(/%s/gi,(()=>{var e;return null!==(e=i[r++])&&void 0!==e?e:""}))}update(e){f(this.languages,e)}}function P(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=1540483477,s=24,n=t^e.length,r=e.length,o=0;for(;r>=4;){let t=w(e,o);t=O(t,i),t^=t>>>s,t=O(t,i),n=O(n,i),n^=t,o+=4,r-=4}switch(r){case 3:n^=S(e,o),n^=e.charCodeAt(o+2)<<16,n=O(n,i);break;case 2:n^=S(e,o),n=O(n,i);break;case 1:n^=e.charCodeAt(o),n=O(n,i)}return n^=n>>>13,n=O(n,i),n^=n>>>15,n>>>0}(e).toString(36)}function w(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function S(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function O(e,t){return(65535&(e|=0))*(t|=0)+(((e>>>16)*t&65535)<<16)|0}var k,$=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function x(e){if(-1===e.indexOf(","))return[e];for(var t,i=[],s=[],n=0;t=$.exec(e);)switch(t[0]){case"(":n++;break;case")":n--;break;case",":if(n)break;i.push(t.index)}for(t=i.length;t--;)s.unshift(e.slice(i[t]+1)),e=e.slice(0,i[t]);return s.unshift(e),s}function A(e,t){let i=x(e);return x(t).map((e=>e.indexOf("&")>=0?e:"&"+e)).reduce(((e,t)=>e.concat(i.map((e=>t.replace(/\&/g,e))))),[]).join(",")}function F(e){return 0===e.indexOf("@media")}function T(e){return 0===e.indexOf("@keyframes")}function j(e,t){var i;let s=t.rules,n=t.mediaQuery,r=t.globalSelector,o={};return r&&(e=r),null==(i=Object.keys(s))||i.forEach((t=>{if(function(e){return 0===e.indexOf("@global")}(t)){const i=t,l=(t=t.substring(8)).indexOf("&");let a;-1!=l?(a=A(e,t),r=t.substring(0,l-1).trim()):a=t,f(o,j(a,{mediaQuery:n,rules:s[i],globalSelector:a}))}else if(function(e){let t=[":",".","[",">"," "],i=!1,s=e.charAt(0);for(let n=0;n<t.length;n++)if(s===t[n]){i=!0;break}return i||e.indexOf("&")>=0}(t))f(o,j(A(e,t),{rules:s[t],mediaQuery:n}));else if(F(t))f(o,j(e,{mediaQuery:(d=n,p=t,d?"@media "+d.substring(6)+" and "+p.substring(6):p),rules:s[t]}));else{var i,l,a,u,c,h;if(n)null!==(i=o[n])&&void 0!==i||(o[n]={}),null!==(u=(l=o[n])[a=e])&&void 0!==u||(l[a]={}),o[n][e][t]=s[t];else if(T(t))o[t]=s[t];else null!==(h=o[c=e])&&void 0!==h||(o[c]={}),o[e][t]=s[t]}var d,p})),o}function C(e){let t=[];for(const i in e)if(Object.hasOwnProperty.call(e,i)){const s=e[i];g(s)?t.push(i+"{"+C(s)+"}"):t.push(i+":"+s)}return/^\d%/.test(t[0])?t.join(" "):t.join(";")}function L(e){let t=[];for(const i in e)if(Object.hasOwnProperty.call(e,i)){const s=e[i];if(F(i))t.push(i+"{"+L(s)+"}");else if(T(i))t.push(i+"{"+C(s)+"}");else{const e=Object.entries(s).map((e=>e[0]+":"+e[1])).join(";");t.push(i+"{"+e+"}")}}return t}function D(e,t){return L(j(t,{rules:e}))}(e=>{function t(t){if(!(0,e.isBrowser)())return null;let i=document.createElement("style");i.setAttribute("data-"+t,""),i.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(i);for(let e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===i)return document.styleSheets.item(e);return null}e.create=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const s=-1!==e.indexOf("#"),n=-1!==e.indexOf("."),r=s?e.split("#"):n?e.split("."):[e],o=r[0],l=r[1],a=document.createElement(o);return s&&(a.id=l),n&&a.classList.add(l),i&&(a.innerHTML=i),Object.keys(t).forEach((e=>{const i=t[e];"video"!==o&&"audio"!==o||"boolean"!=typeof i?void 0!==i&&a.setAttribute(e,""+i):i&&a.setAttribute(e,"")})),a},e.render=(e,t)=>t.appendChild(e),e.isBrowser=()=>Boolean("undefined"!=typeof globalThis&&globalThis.document&&globalThis.document.documentElement),e.createSheet=t;const i=(()=>{const e=Object.create({});return t=>{const i="object"==typeof t?JSON.stringify(t):t;return e[i]||(e[i]="css-"+P(i)),e[i]}})();e.createCss=e=>{let t=e.sheet,s=e.ssrData;return function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];const l=Boolean(r[0]&&r[0].length&&r[0].raw);let a="";if(l){let e=r[0];a+=e[0];for(let t=1;t<r.length;t++)a+="string"!=typeof r[t]?"":r[t],a+=e[t]}else a="string"==typeof r[0]?r[0]:JSON.stringify(r[0]);const u=i(a);if(t)for(let i=0;i<t.cssRules.length;i++)if((null==(e=t.cssRules[i])?void 0:e.selectorText)=="."+u)return u;let c=["."+u+"{"+a+"}"];return l||"object"!=typeof r[0]||(c=D(r[0],"."+u)),t?c.forEach((e=>{t.insertRule(e,t.cssRules.length)})):s=s.concat(c),u}},e.createStyled=()=>{const i=[],s=t("oplayer");return{css:(0,e.createCss)({sheet:s,ssrData:i}),getCssValue:()=>i}};var s=(0,e.createStyled)();e.css=s.css,e.getCssValue=s.getCssValue,e.cls=e=>"css-"+P(e)})(k||(k={}));const _=k,N=/(iPad)/gi.test(null==(e=globalThis.navigator)?void 0:e.userAgent)||/Macintosh/i.test(null==(t=globalThis.navigator)?void 0:t.userAgent)&&Boolean(null==(i=globalThis.navigator)?void 0:i.maxTouchPoints)&&(null==(s=globalThis.navigator)?void 0:s.maxTouchPoints)>=1,R=/iPhone/gi.test(null==(n=globalThis.navigator)?void 0:n.userAgent),V=/^((?!chrome|android).)*safari/i.test(null==(r=globalThis.navigator)?void 0:r.userAgent),I=R||N,M=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(null==(o=globalThis.navigator)?void 0:o.userAgent)||I,q=/mqqbrowser/i.test(null==(l=globalThis.navigator)?void 0:l.userAgent)&&!/ qq/i.test(null==(a=globalThis.navigator)?void 0:a.userAgent),z=Object.freeze(Object.defineProperty({__proto__:null,isIOS:I,isMobile:M,isQQBrowser:q,isSafari:V,isiPad:N,isiPhone:R},Symbol.toStringTag,{value:"Module"})),B={autoplay:!1,muted:!1,loop:!1,volume:1,preload:"metadata",playbackRate:1,playsinline:!0,lang:"auto",source:{},videoAttr:{},isLive:!1,autopause:!0,isNativeUI:()=>q},Q=class e{constructor(e,t){if(this.plugins=[],this.context={},this.listeners=Object.create(null),this.hasError=!1,this.isSourceChanging=!1,this.container="string"==typeof e?document.querySelector(e):e,!this.container)throw new Error(("string"==typeof e?e:"Element")+"does not exist");this.options=Object.assign({},B,"string"==typeof t?{source:{src:t}}:t),this.locales=new E(this.options.lang),this.eventEmitter=new p}static make(t,i){return new e(t,i)}use(e){return e.forEach((e=>{this.plugins.push(e)})),this}create(){return this.render(),this.initEvent(),this.plugins.forEach((e=>this.applyPlugin(e,!0))),this.options.source.src&&this.load(this.options.source),e.players.push(this),this}initEvent(){this.listeners.error=e=>{this.$video.error&&(this.hasError=!0,this.eventEmitter.emit("error",e))},this.$video.addEventListener("error",(e=>this.listeners.error(e)));const e=(e,t)=>{this.eventEmitter.emit(e,t)};[[this.$video,["fullscreenchange","webkitbeginfullscreen","webkitendfullscreen"],["fullscreenerror","webkitfullscreenerror","mozfullscreenerror"]],[this.$root,["fullscreenchange","webkitfullscreenchange"],["fullscreenerror","webkitfullscreenerror","mozfullscreenerror"]]].forEach((t=>{const i=t[0];t.slice(1).forEach((t=>{const s=t[0];this.listeners[s]=e,t.forEach((e=>{i.addEventListener(e,(e=>{this.listeners[s](s,e)}),{passive:!0})}))}))})),[[this.$video,u],[this.$root,c]].forEach((t=>{let i=t[0];t[1].forEach((t=>{this.listeners[t]||(this.listeners[t]=e,i.addEventListener(t,(e=>{var i;null==(i=this.listeners)||i[t](t,e)}),{passive:!0}))}))}))}render(){this.$video=_.create("video."+_.css("\n        width: 100%;\n        height: 100%;\n        display: block;\n        position: relative;\n      "),Object.assign({autoplay:this.options.autoplay,loop:this.options.loop,playsinline:this.options.playsinline,"webkit-playsinline":this.options.playsinline,"x5-playsinline":this.options.playsinline,preload:this.options.preload,poster:this.options.source.poster},this.options.videoAttr));const e=this.options,t=e.muted,i=e.volume,s=e.playbackRate;t&&this.mute(),this.$video.volume=i,setTimeout((()=>{this.$root&&this.setPlaybackRate(s)})),this.$root=_.create("div."+_.css("\n        position: relative;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background-color: #000;\n      ")),_.render(this.$video,this.$root),_.render(this.$root,this.container)}async load(e){var t;await(null==(t=this.loader)?void 0:t.destroy()),this.loader=void 0;for(const i of this.plugins)if(i.load){const t=await i.load(this,e);if(0!=t&&!this.loader){this.loader=t,this.emit("loaderchange",t);break}}return this.loader||(this.$video.src=e.src),e}applyPlugin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e.name,s=e.key;if(this.context[e.key||e.name])throw new Error("duplicate plugin");t||this.plugins.push(e);const n=e.apply(this);n&&(this.context[s||i]=n)}on(e,t){return"string"==typeof e?this.eventEmitter.on(e,t):Array.isArray(e)?this.eventEmitter.onAny(e,t):"function"==typeof e&&this.eventEmitter.on("*",e),this}once(e,t){this.eventEmitter.once(e,t)}off(e,t){this.eventEmitter.off(e,t)}emit(e,t){this.eventEmitter.emit(e,t)}setPoster(e){this.$video.poster=e}play(){if((this.$video.src||this.$video.currentSrc)&&!this.isSourceChanging){if(this.options.autopause)for(let t=0;t<e.players.length;t++){const i=e.players[t];i!=this&&i.pause()}return this.$video.play()}}pause(){return this.$video.pause()}togglePlay(){return this.isPlaying?this.pause():this.play()}mute(){this.$video.muted=!0}unmute(){this.$video.muted=!1}toggleMute(){this.isMuted?this.unmute():this.mute()}setVolume(e){this.$video.volume=e>1?1:e<0?0:e,this.$video.volume>0&&this.isMuted&&this.unmute()}setPlaybackRate(e){this.$video.playbackRate=e}seek(e){this.$video.currentTime=e}setLoop(e){this.$video.loop=e}async enterFullscreen(){this.isInPip&&await this.exitPip(),this._requestFullscreen?this._requestFullscreen.call(this.$root,{navigationUI:"hide"}):this.$video.webkitEnterFullscreen()}exitFullscreen(){return this._exitFullscreen.call(document)}get isFullscreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||this.$video.webkitEnterFullscreen}get isFullScreen(){return Boolean((document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)===this.$root||this.$video.webkitDisplayingFullscreen)}toggleFullScreen(){return this.isFullScreen?this.exitFullscreen():this.enterFullscreen()}get isPipEnabled(){return document.pictureInPictureEnabled}enterPip(){return this.$video.requestPictureInPicture()}exitPip(){return!!this.isInPip&&document.exitPictureInPicture()}get isInPip(){return document.pictureInPictureElement==this.$video}togglePip(){return this.isInPip?this.exitPip():this.enterPip()}changeQuality(e){return this._loader(e,{keepPlaying:!0,keepTime:!0,preEvent:"videoqualitychange",event:"videoqualitychanged",brokenEvent:"qualitychangeerror"})}changeSource(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._loader(e,{keepPlaying:t,preEvent:"videosourcechange",event:"videosourcechanged",brokenEvent:"sourcechangeerror"})}_loader(e,t){return new Promise(((i,s)=>{if(this.isSourceChanging)return s(Error("Previous Source is Changing."));const n=this.isPlaying,r=this.currentTime,o=this.volume,l=this.playbackRate;this.pause(),this.hasError=!1,this.isSourceChanging=!0,this.emit(t.preEvent,e);const a=t.keepPlaying,u=t.keepTime,c="none"==this.options.preload,h=c?"loadstart":"loadedmetadata",d=a&&n;let p;const g=i=>{this.$root&&(this.off(h,v),this.emit(t.brokenEvent,{source:p||e,error:i}),"videosourcechanged"==t.event?this.isSourceChanging=!1:this.load(this.options.source).then(f).finally((()=>{this.isSourceChanging=!1})),s(i))},f=()=>{o!=this.volume&&this.setVolume(o),l!=this.playbackRate&&this.setPlaybackRate(l),c&&u&&this.$video.load(),u&&!this.options.isLive&&this.seek(r),d&&!this.isPlaying&&this.$video.play(),Object.assign(this.options.source,p)},v=()=>{this.$root&&(this.off("error",g),f(),this.isSourceChanging=!1,this.emit(t.event,p),i())};return(e instanceof Promise?e:Promise.resolve(e)).then((e=>{if(!e.src)throw new Error("Empty Source");return p=e,this.$video.poster=e.poster||"",this.once("error",g),this.once(h,v),e})).then((e=>this.load(e))).catch(g)}))}destroy(){e.players.splice(e.players.indexOf(this),1);const t=this.eventEmitter,i=this.loader,s=this.plugins,n=this.container,r=this.$root,o=this.$video,l=this.isPlaying,a=this.isFullScreen,u=this.isInPip;t.emit("destroy"),t.offAll(),null==i||i.destroy(),s.forEach((e=>{var t;return!e.load&&(null==(t=e.destroy)?void 0:t.call(e))})),l&&this.pause(),a&&this.exitFullscreen(),u&&this.exitPip(),o.src&&URL.revokeObjectURL(o.src),n.removeChild(r),this.eventEmitter=this.locales=this.options=this.listeners=this.context=this.plugins=this.container=this.$root=this.$video=this.loader=void 0}get isNativeUI(){return this.options.isNativeUI()}get state(){return this.$video.readyState}get isPlaying(){return!this.$video.paused}get isMuted(){return this.$video.muted}get isEnded(){return this.$video.ended}get isLoop(){return this.$video.loop}get isAutoPlay(){return this.$video.autoplay}get duration(){return this.$video.duration}get buffered(){return this.$video.buffered}get currentTime(){return this.$video.currentTime}get volume(){return this.$video.volume}get playbackRate(){return this.$video.playbackRate}get _requestFullscreen(){return HTMLElement.prototype.requestFullscreen||HTMLElement.prototype.webkitRequestFullscreen||HTMLElement.prototype.mozRequestFullScreen||HTMLElement.prototype.msRequestFullscreen}get _exitFullscreen(){return Document.prototype.exitFullscreen||Document.prototype.webkitExitFullscreen||Document.prototype.cancelFullScreen||Document.prototype.mozCancelFullScreen||Document.prototype.msExitFullscreen}static get version(){return"1.2.38-beta.2"}};Q.players=[];let H=Q;const U=(e,t,i)=>{var s;const n=document.createElement("script");n.src=e,n.onload=t,n.onerror=i;const r=document.getElementsByTagName("script")[0];null==(s=null==r?void 0:r.parentNode)||s.insertBefore(n,r)},W={},J=e=>void 0===e,K=Object.freeze(Object.defineProperty({__proto__:null,isUndefined:J,loadSDK:function(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:U;const r=e=>J(window[e])?window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:void 0:window[e],o=r(t);return o&&s(o)?Promise.resolve(o):new Promise(((s,o)=>{if(!J(W[e]))return void W[e].push({resolve:s,reject:o});W[e]=[{resolve:s,reject:o}];const l=t=>{var i;null==(i=W[e])||i.forEach((e=>e.resolve(t)))};if(!J(i)){const e=window[i];window[i]=function(){J(e)||e.apply(void 0,arguments),l(r(t))}}n(e,(()=>{J(i)&&l(r(t))}),(t=>{var i;null==(i=W[e])||i.forEach((e=>{e.reject(t)})),delete W[e]}))}))},loadScript:U},Symbol.toStringTag,{value:"Module"}));return Object.assign(H,{$:k,EVENTS:d,OH_EVENTS:h,VIDEO_EVENTS:u,PLAYER_EVENTS:c},v,z,K)}));
diff --git a/dist/index.ui.js b/dist/index.ui.js
index 14b911728ef68f51ceefdb6f31e17d4e4da7624c..afdfa57f992f1af501ebd4c601174d80c4de379a 100644
--- a/dist/index.ui.js
+++ b/dist/index.ui.js
@@ -5,4 +5,4 @@
  * author: shiyiya
  * homepage: https://github.com/shiyiya/oplayer
  */
-!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).OPlayer=t()}(this,(function(){"use strict";var e,t,n,o,i,r,s,a,l,c,d,u,h,p,g,m,v;function f(e,t){return t||(t=e.slice(0)),e.raw=t,e}function b(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=1540483477,o=24,i=t^e.length,r=e.length,s=0;for(;r>=4;){let t=y(e,s);t=x(t,n),t^=t>>>o,t=x(t,n),i=x(i,n),i^=t,s+=4,r-=4}switch(r){case 3:i^=k(e,s),i^=e.charCodeAt(s+2)<<16,i=x(i,n);break;case 2:i^=k(e,s),i=x(i,n);break;case 1:i^=e.charCodeAt(s),i=x(i,n)}return i^=i>>>13,i=x(i,n),i^=i>>>15,i>>>0}(e).toString(36)}function y(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function k(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function x(e,t){return(65535&(e|=0))*(t|=0)+(((e>>>16)*t&65535)<<16)|0}function w(e){return Boolean(e&&"object"==typeof e&&!Array.isArray(e))}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(!n.length)return e;const i=n.shift();if(w(e)&&w(i))for(const r in i)w(i[r])?(e[r]||Object.assign(e,{[r]:{}}),E(e[r],i[r])):Object.assign(e,{[r]:i[r]});return E.apply(void 0,[e].concat(n))}var $,L=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function S(e){if(-1===e.indexOf(","))return[e];for(var t,n=[],o=[],i=0;t=L.exec(e);)switch(t[0]){case"(":i++;break;case")":i--;break;case",":if(i)break;n.push(t.index)}for(t=n.length;t--;)o.unshift(e.slice(n[t]+1)),e=e.slice(0,n[t]);return o.unshift(e),o}function T(e,t){let n=S(e);return S(t).map((e=>e.indexOf("&")>=0?e:"&"+e)).reduce(((e,t)=>e.concat(n.map((e=>t.replace(/\&/g,e))))),[]).join(",")}function P(e){return 0===e.indexOf("@media")}function z(e){return 0===e.indexOf("@keyframes")}function A(e,t){var n;let o=t.rules,i=t.mediaQuery,r=t.globalSelector,s={};return r&&(e=r),null==(n=Object.keys(o))||n.forEach((t=>{if(function(e){return 0===e.indexOf("@global")}(t)){const n=t,a=(t=t.substring(8)).indexOf("&");let l;-1!=a?(l=T(e,t),r=t.substring(0,a-1).trim()):l=t,E(s,A(l,{mediaQuery:i,rules:o[n],globalSelector:l}))}else if(function(e){let t=[":",".","[",">"," "],n=!1,o=e.charAt(0);for(let i=0;i<t.length;i++)if(o===t[i]){n=!0;break}return n||e.indexOf("&")>=0}(t))E(s,A(T(e,t),{rules:o[t],mediaQuery:i}));else if(P(t))E(s,A(e,{mediaQuery:(h=i,p=t,h?"@media "+h.substring(6)+" and "+p.substring(6):p),rules:o[t]}));else{var n,a,l,c,d,u;if(i)null!==(n=s[i])&&void 0!==n||(s[i]={}),null!==(c=(a=s[i])[l=e])&&void 0!==c||(a[l]={}),s[i][e][t]=o[t];else if(z(t))s[t]=o[t];else null!==(u=s[d=e])&&void 0!==u||(s[d]={}),s[e][t]=o[t]}var h,p})),s}function O(e){let t=[];for(const n in e)if(Object.hasOwnProperty.call(e,n)){const o=e[n];w(o)?t.push(n+"{"+O(o)+"}"):t.push(n+":"+o)}return/^\d%/.test(t[0])?t.join(" "):t.join(";")}function C(e){let t=[];for(const n in e)if(Object.hasOwnProperty.call(e,n)){const o=e[n];if(P(n))t.push(n+"{"+C(o)+"}");else if(z(n))t.push(n+"{"+O(o)+"}");else{const e=Object.entries(o).map((e=>e[0]+":"+e[1])).join(";");t.push(n+"{"+e+"}")}}return t}function M(e,t){return C(A(t,{rules:e}))}(e=>{function t(t){if(!(0,e.isBrowser)())return null;let n=document.createElement("style");n.setAttribute("data-"+t,""),n.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(n);for(let e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets.item(e);return null}e.create=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const o=-1!==e.indexOf("#"),i=-1!==e.indexOf("."),r=o?e.split("#"):i?e.split("."):[e],s=r[0],a=r[1],l=document.createElement(s);return o&&(l.id=a),i&&l.classList.add(a),n&&(l.innerHTML=n),Object.keys(t).forEach((e=>{const n=t[e];"video"!==s&&"audio"!==s||"boolean"!=typeof n?void 0!==n&&l.setAttribute(e,""+n):n&&l.setAttribute(e,"")})),l},e.render=(e,t)=>t.appendChild(e),e.isBrowser=()=>Boolean("undefined"!=typeof globalThis&&globalThis.document&&globalThis.document.documentElement),e.createSheet=t;const n=(()=>{const e=Object.create({});return t=>{const n="object"==typeof t?JSON.stringify(t):t;return e[n]||(e[n]="css-"+b(n)),e[n]}})();e.createCss=e=>{let t=e.sheet,o=e.ssrData;return function(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];const a=Boolean(r[0]&&r[0].length&&r[0].raw);let l="";if(a){let e=r[0];l+=e[0];for(let t=1;t<r.length;t++)l+="string"!=typeof r[t]?"":r[t],l+=e[t]}else l="string"==typeof r[0]?r[0]:JSON.stringify(r[0]);const c=n(l);if(t)for(let n=0;n<t.cssRules.length;n++)if((null==(e=t.cssRules[n])?void 0:e.selectorText)=="."+c)return c;let d=["."+c+"{"+l+"}"];return a||"object"!=typeof r[0]||(d=M(r[0],"."+c)),t?d.forEach((e=>{t.insertRule(e,t.cssRules.length)})):o=o.concat(d),c}},e.createStyled=()=>{const n=[],o=t("oplayer");return{css:(0,e.createCss)({sheet:o,ssrData:n}),getCssValue:()=>n}};var o=(0,e.createStyled)();e.css=o.css,e.getCssValue=o.getCssValue,e.cls=e=>"css-"+b(e)})($||($={}));const F=$,j=/(iPad)/gi.test(null==(l=globalThis.navigator)?void 0:l.userAgent)||/Macintosh/i.test(null==(c=globalThis.navigator)?void 0:c.userAgent)&&Boolean(null==(d=globalThis.navigator)?void 0:d.maxTouchPoints)&&(null==(u=globalThis.navigator)?void 0:u.maxTouchPoints)>=1,B=/iPhone/gi.test(null==(h=globalThis.navigator)?void 0:h.userAgent),R=/^((?!chrome|android).)*safari/i.test(null==(p=globalThis.navigator)?void 0:p.userAgent),H=B||j,q=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(null==(g=globalThis.navigator)?void 0:g.userAgent)||H,I=/mqqbrowser/i.test(null==(m=globalThis.navigator)?void 0:m.userAgent)&&!/ qq/i.test(null==(v=globalThis.navigator)?void 0:v.userAgent),D=(e,t,n)=>{var o;const i=document.createElement("script");i.src=e,i.onload=t,i.onerror=n;const r=document.getElementsByTagName("script")[0];null==(o=null==r?void 0:r.parentNode)||o.insertBefore(i,r)},N={},V=e=>void 0===e,_=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","encrypted","waitingforkey","enterpictureinpicture","leavepictureinpicture"],U=["contextmenu"];class X{constructor(){this.events=Object.create(null)}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}onAny(e,t){e.forEach((e=>this.on(e,t)))}once(e,t){const n=n=>{t({type:e,payload:n.payload})};n.raw=t,this.on(e,n)}off(e,t){if(this.events[e])for(let n=0;n<this.events[e].length;n++){const o=this.events[e][n];o!=t&&t!=o.raw||this.events[e].splice(n,1)}}offAny(e){this.events[e]=[]}offAll(){this.events=Object.create(null)}emit(e,t){var n,o;const i=[];null==(n=this.events[e])||n.forEach((n=>{n({type:e,payload:t}),n.raw&&i.push(n)})),null==(o=this.events["*"])||o.forEach((n=>{n({type:e,payload:t}),n.raw&&i.push(n)})),i.forEach((t=>{this.off(e,t)}))}}const W={Play:"播放",Pause:"暂停",Loop:"循环播放",Volume:"音量","Volume: %s":"音量：%s",Mute:"静音",Speed:"播放速度",LIVE:"直播",Language:"语言",Screenshot:"截图",Subtitle:"字幕",Quality:"画质",Fullscreen:"全屏",Settings:"设置","Picture in Picture":"画中画",Danmaku:"弹幕",Display:"显示",Opacity:"透明度",FontSize:"字体大小","Display Area":"显示区域",Off:"关闭",Auto:"自动",Default:"默认",Normal:"正常","%ss":"%s秒",Close:"关闭","Can be closed after %ss":"%s秒后可关闭广告"},Y={Play:"پخش",Next:"بعدی",Previous:"قبلی",Pause:"توقف",Loop:"تکرار",Volume:"حجم صدا","Volume: %s":"حجم صدا: %s",Mute:"بی‌صدا کردن",Speed:"سرعت",LIVE:"زنده",WebFullscreen:"تمام صفحه وب",Chromecast:"کروم کاست",AirPlay:"ایر پلی",Playlist:"پلی‌لیست",Heatmap:"نقشهٔ حرارتی",Language:"زبان",Screenshot:"عکس صفحه",Subtitle:"زیرنویس",Quality:"کیفیت",Fullscreen:"تمام صفحه",Settings:"تنظیمات","Picture in Picture":"تصویر در تصویر",Danmaku:"دانماکو",Display:"نمایش",Opacity:"شفافیت",FontSize:"اندازه فونت","Display Area":"ناحیه نمایش",Off:"خاموش",Auto:"خودکار",Default:"پیش‌فرض",Normal:"عادی","%ss":"%s ثانیه",Close:"بستن","Can be closed after %ss":"قابل بستن پس از %s ثانیه"},Q={Play:"پلې‌کول",Next:"بل",Previous:"مخکېنی",Pause:"تم کول",Loop:"تکرار",Volume:"غږ","Volume: %s":"غږ: %s",Mute:"غلی کول",Speed:"چټکتیا",LIVE:"ژوندی",WebFullscreen:"د تمام صفحه وب",Chromecast:"کروم کاسټ",AirPlay:"ایر پلی",Playlist:"پلې‌لسټ",Heatmap:"د ډېرو کتلو نقشه",Language:"ژبه",Screenshot:"سکرین شاټ",Subtitle:"لاندې لیک",Quality:"کیفیت",Fullscreen:"پوره پرده","":"د متن ډیکوډر ملاتړ نه لري",Settings:"ترتیبات","Picture in Picture":"انځور په انځور",Danmaku:"دانماکو",Display:"ښکاره کول",Opacity:"روڼوالی",FontSize:"د خط اندازه","Display Area":"د ښودلو ساحه",Off:"بند",Auto:"خودکار",Default:"پېل شوی",Normal:"عادي","%ss":"%s ثانیه",Close:"بندول","Can be closed after %ss":"د %s ثانیو وروسته تړل کېدای شي"};class K{constructor(e){this.languages={zh:W,"zh-CN":W,fa:Y,pa:Q,en:Object.keys(W).reduce(((e,t)=>(e[t]=t,e)),{})},this.lang="auto"===e?navigator.language:e,this.languages[this.lang]||navigator.languages.some((e=>{if(this.languages[e])return this.lang=e,!0;if(-1!==e.indexOf("-")){const t=e.split("-")[0];if(t&&this.languages[t])return this.lang=t,!0}return!1})),this.languages[this.lang]||(this.lang="en")}get(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const i=this.languages[this.lang][e];if(null==i)return e;let r=0;return i.replace(/%s/gi,(()=>{var e;return null!==(e=n[r++])&&void 0!==e?e:""}))}update(e){E(this.languages,e)}}const J={autoplay:!1,muted:!1,loop:!1,volume:1,preload:"metadata",playbackRate:1,playsinline:!0,lang:"auto",source:{},videoAttr:{},isLive:!1,autopause:!0,isNativeUI:()=>I},G=class e{constructor(e,t){if(this.plugins=[],this.context={},this.listeners=Object.create(null),this.hasError=!1,this.isSourceChanging=!1,this.container="string"==typeof e?document.querySelector(e):e,!this.container)throw new Error(("string"==typeof e?e:"Element")+"does not exist");this.options=Object.assign({},J,"string"==typeof t?{source:{src:t}}:t),this.locales=new K(this.options.lang),this.eventEmitter=new X}static make(t,n){return new e(t,n)}use(e){return e.forEach((e=>{this.plugins.push(e)})),this}create(){return this.render(),this.initEvent(),this.plugins.forEach((e=>this.applyPlugin(e,!0))),this.options.source.src&&this.load(this.options.source),e.players.push(this),this}initEvent(){this.listeners.error=e=>{this.$video.error&&(this.hasError=!0,this.eventEmitter.emit("error",e))},this.$video.addEventListener("error",(e=>this.listeners.error(e)));const e=(e,t)=>{this.eventEmitter.emit(e,t)};[[this.$video,["fullscreenchange","webkitbeginfullscreen","webkitendfullscreen"],["fullscreenerror","webkitfullscreenerror","mozfullscreenerror"]],[this.$root,["fullscreenchange","webkitfullscreenchange"],["fullscreenerror","webkitfullscreenerror","mozfullscreenerror"]]].forEach((t=>{const n=t[0];t.slice(1).forEach((t=>{const o=t[0];this.listeners[o]=e,t.forEach((e=>{n.addEventListener(e,(e=>{this.listeners[o](o,e)}),{passive:!0})}))}))})),[[this.$video,_],[this.$root,U]].forEach((t=>{let n=t[0];t[1].forEach((t=>{this.listeners[t]||(this.listeners[t]=e,n.addEventListener(t,(e=>{var n;null==(n=this.listeners)||n[t](t,e)}),{passive:!0}))}))}))}render(){this.$video=F.create("video."+F.css("\n        width: 100%;\n        height: 100%;\n        display: block;\n        position: relative;\n      "),Object.assign({autoplay:this.options.autoplay,loop:this.options.loop,playsinline:this.options.playsinline,"webkit-playsinline":this.options.playsinline,"x5-playsinline":this.options.playsinline,preload:this.options.preload,poster:this.options.source.poster},this.options.videoAttr));const e=this.options,t=e.muted,n=e.volume,o=e.playbackRate;t&&this.mute(),this.$video.volume=n,setTimeout((()=>{this.$root&&this.setPlaybackRate(o)})),this.$root=F.create("div."+F.css("\n        position: relative;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background-color: #000;\n      ")),F.render(this.$video,this.$root),F.render(this.$root,this.container)}async load(e){var t;await(null==(t=this.loader)?void 0:t.destroy()),this.loader=void 0;for(const n of this.plugins)if(n.load){const t=await n.load(this,e);if(0!=t&&!this.loader){this.loader=t,this.emit("loaderchange",t);break}}return this.loader||(this.$video.src=e.src),e}applyPlugin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.name,o=e.key;if(this.context[e.key||e.name])throw new Error("duplicate plugin");t||this.plugins.push(e);const i=e.apply(this);i&&(this.context[o||n]=i)}on(e,t){return"string"==typeof e?this.eventEmitter.on(e,t):Array.isArray(e)?this.eventEmitter.onAny(e,t):"function"==typeof e&&this.eventEmitter.on("*",e),this}once(e,t){this.eventEmitter.once(e,t)}off(e,t){this.eventEmitter.off(e,t)}emit(e,t){this.eventEmitter.emit(e,t)}setPoster(e){this.$video.poster=e}play(){if((this.$video.src||this.$video.currentSrc)&&!this.isSourceChanging){if(this.options.autopause)for(let t=0;t<e.players.length;t++){const n=e.players[t];n!=this&&n.pause()}return this.$video.play()}}pause(){return this.$video.pause()}togglePlay(){return this.isPlaying?this.pause():this.play()}mute(){this.$video.muted=!0}unmute(){this.$video.muted=!1}toggleMute(){this.isMuted?this.unmute():this.mute()}setVolume(e){this.$video.volume=e>1?1:e<0?0:e,this.$video.volume>0&&this.isMuted&&this.unmute()}setPlaybackRate(e){this.$video.playbackRate=e}seek(e){this.$video.currentTime=e}setLoop(e){this.$video.loop=e}async enterFullscreen(){this.isInPip&&await this.exitPip(),this._requestFullscreen?this._requestFullscreen.call(this.$root,{navigationUI:"hide"}):this.$video.webkitEnterFullscreen()}exitFullscreen(){return this._exitFullscreen.call(document)}get isFullscreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||this.$video.webkitEnterFullscreen}get isFullScreen(){return Boolean((document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)===this.$root||this.$video.webkitDisplayingFullscreen)}toggleFullScreen(){return this.isFullScreen?this.exitFullscreen():this.enterFullscreen()}get isPipEnabled(){return document.pictureInPictureEnabled}enterPip(){return this.$video.requestPictureInPicture()}exitPip(){return!!this.isInPip&&document.exitPictureInPicture()}get isInPip(){return document.pictureInPictureElement==this.$video}togglePip(){return this.isInPip?this.exitPip():this.enterPip()}changeQuality(e){return this._loader(e,{keepPlaying:!0,keepTime:!0,preEvent:"videoqualitychange",event:"videoqualitychanged",brokenEvent:"qualitychangeerror"})}changeSource(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._loader(e,{keepPlaying:t,preEvent:"videosourcechange",event:"videosourcechanged",brokenEvent:"sourcechangeerror"})}_loader(e,t){return new Promise(((n,o)=>{if(this.isSourceChanging)return o(Error("Previous Source is Changing."));const i=this.isPlaying,r=this.currentTime,s=this.volume,a=this.playbackRate;this.pause(),this.hasError=!1,this.isSourceChanging=!0,this.emit(t.preEvent,e);const l=t.keepPlaying,c=t.keepTime,d="none"==this.options.preload,u=d?"loadstart":"loadedmetadata",h=l&&i;let p;const g=n=>{this.$root&&(this.off(u,v),this.emit(t.brokenEvent,{source:p||e,error:n}),"videosourcechanged"==t.event?this.isSourceChanging=!1:this.load(this.options.source).then(m).finally((()=>{this.isSourceChanging=!1})),o(n))},m=()=>{s!=this.volume&&this.setVolume(s),a!=this.playbackRate&&this.setPlaybackRate(a),d&&c&&this.$video.load(),c&&!this.options.isLive&&this.seek(r),h&&!this.isPlaying&&this.$video.play(),Object.assign(this.options.source,p)},v=()=>{this.$root&&(this.off("error",g),m(),this.isSourceChanging=!1,this.emit(t.event,p),n())};return(e instanceof Promise?e:Promise.resolve(e)).then((e=>{if(!e.src)throw new Error("Empty Source");return p=e,this.$video.poster=e.poster||"",this.once("error",g),this.once(u,v),e})).then((e=>this.load(e))).catch(g)}))}destroy(){e.players.splice(e.players.indexOf(this),1);const t=this.eventEmitter,n=this.loader,o=this.plugins,i=this.container,r=this.$root,s=this.$video,a=this.isPlaying,l=this.isFullScreen,c=this.isInPip;t.emit("destroy"),t.offAll(),null==n||n.destroy(),o.forEach((e=>{var t;return!e.load&&(null==(t=e.destroy)?void 0:t.call(e))})),a&&this.pause(),l&&this.exitFullscreen(),c&&this.exitPip(),s.src&&URL.revokeObjectURL(s.src),i.removeChild(r),this.eventEmitter=this.locales=this.options=this.listeners=this.context=this.plugins=this.container=this.$root=this.$video=this.loader=void 0}get isNativeUI(){return this.options.isNativeUI()}get state(){return this.$video.readyState}get isPlaying(){return!this.$video.paused}get isMuted(){return this.$video.muted}get isEnded(){return this.$video.ended}get isLoop(){return this.$video.loop}get isAutoPlay(){return this.$video.autoplay}get duration(){return this.$video.duration}get buffered(){return this.$video.buffered}get currentTime(){return this.$video.currentTime}get volume(){return this.$video.volume}get playbackRate(){return this.$video.playbackRate}get _requestFullscreen(){return HTMLElement.prototype.requestFullscreen||HTMLElement.prototype.webkitRequestFullscreen||HTMLElement.prototype.mozRequestFullScreen||HTMLElement.prototype.msRequestFullscreen}get _exitFullscreen(){return Document.prototype.exitFullscreen||Document.prototype.webkitExitFullscreen||Document.prototype.cancelFullScreen||Document.prototype.mozCancelFullScreen||Document.prototype.msExitFullscreen}static get version(){return"1.2.38-beta.2"}};G.players=[];let Z=G;globalThis.window&&console.log("%cOPlayer%c v%s\n %c\nOh! Another HTML5 video player.\nhttps://github.com/shiyiya/oplayer\n","font-size:32px;","font-size:12px;color:#999999;",Z.version,"font-size:14px;");const ee=Object.freeze(Object.defineProperty({__proto__:null,get $(){return $},Player:Z,default:Z,isIOS:H,isMobile:q,isObject:w,isPlainObject:function(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},isQQBrowser:I,isSafari:R,isUndefined:V,isiPad:j,isiPhone:B,loadSDK:function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:D;const r=e=>V(window[e])?window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:void 0:window[e],s=r(t);return s&&o(s)?Promise.resolve(s):new Promise(((o,s)=>{if(!V(N[e]))return void N[e].push({resolve:o,reject:s});N[e]=[{resolve:o,reject:s}];const a=t=>{var n;null==(n=N[e])||n.forEach((e=>e.resolve(t)))};if(!V(n)){const e=window[n];window[n]=function(){V(e)||e.apply(void 0,arguments),a(r(t))}}i(e,(()=>{V(n)&&a(r(t))}),(t=>{var n;null==(n=N[e])||n.forEach((e=>{e.reject(t)})),delete N[e]}))}))},loadScript:D,mergeDeep:E},Symbol.toStringTag,{value:"Module"})),te=$.cls("loading"),ne=$.cls("playing"),oe=$.cls("focused"),ie=$.cls("fullscreen"),re=$.cls("settingShown"),se=$.css("display:none"),ae="data-ctrl-hidden",le=$.css({["."+ne]:{cursor:"none"}}),ce=$.cls("error"),de=$.css(e||(e=f(["\n  z-index: 99 !important;\n  position: fixed !important;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;"]))),ue=$.css({background:"none",border:"none",cursor:"pointer",padding:0,outline:"none",font:"inherit",color:"inherit",fill:"#fff","line-height":"inherit","text-align":"inherit",width:"100%","-webkit-tap-highlight-color":"transparent","user-select":"none"}),he=$.css({"& > *:nth-child(1)":{display:"none"}}),pe=$.css({"& > *:nth-child(2)":{display:"none"}}),ge=q?"":$.css({position:"relative","&:hover":{"&::after":{opacity:1,transform:"translateX(-50%) scale(1)"},"&:not([data-tooltip-pos]):last-child::after":{right:0,left:"auto",transform:"translateY(0) scale(1)"},"&[data-tooltip-pos=down]::after":{transform:"translateX(-50%) scale(1)"},"&[data-tooltip-pos=down]:last-child::after":{right:0,transform:"translateY(0) scale(1)"}},"&::after":{position:"absolute",content:"attr(aria-label)",bottom:"100%",left:"50%","margin-bottom":"0.5em","white-space":"nowrap",background:"var(--shadow-background-color)",transform:"translate(-50%, 10px) scale(.8)","transform-origin":"50% 100%",opacity:0,padding:"6px 8px","border-radius":"2px",transition:"transform .2s ease .1s,opacity .2s ease .1s","pointer-events":"none","font-size":"0.75em"},"&[data-tooltip-pos=down]::after":{top:"100%",bottom:"auto","margin-top":"0.5em",transform:"translate(-50%, -10px) scale(.8)"},"&[data-tooltip-pos=down]:last-child::after":{right:0,top:"100%",bottom:"unset",left:"auto","margin-top":"0.5em",transform:"translateY(-10px) scale(.8)","transform-origin":"100% 0"},"&:not([data-tooltip-pos]):last-child::after":{right:0,left:"auto",transform:"translateY(10px) scale(.8)","transform-origin":"100% 100%"}}),me={play:'<svg viewBox="0 0 1024 1024"><path  d="M245.76 785.203V238.797c0-50.442 34.918-69.182 77.967-42.046l422.196 266.117c43.11 27.157 43.069 71.128 0 98.284L323.727 827.249c-43.11 27.177-77.967 8.315-77.967-42.046z" /></svg>',pause:'<svg viewBox="0 0 1024 1024"><path  d="M327.68 184.32a81.92 81.92 0 0 1 81.92 81.92v491.52a81.92 81.92 0 1 1-163.84 0V266.24a81.92 81.92 0 0 1 81.92-81.92z m368.64 0a81.92 81.92 0 0 1 81.92 81.92v491.52a81.92 81.92 0 1 1-163.84 0V266.24a81.92 81.92 0 0 1 81.92-81.92z" /></svg>',volume:['<svg viewBox="0 0 1024 1024"><path d="M128 426.666667v170.666666c0 23.466667 19.2 42.666667 42.666667 42.666667h128l140.373333 140.373333c26.88 26.88 72.96 7.68 72.96-30.293333V273.493333c0-37.973333-46.08-57.173333-72.96-30.293333L298.666667 384H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667z m576 85.333333A192 192 0 0 0 597.333333 340.053333v343.466667c63.146667-31.146667 106.666667-96 106.666667-171.52zM597.333333 189.866667v8.533333c0 16.213333 10.666667 30.293333 25.6 36.266667C733.013333 278.613333 810.666667 386.56 810.666667 512s-77.653333 233.386667-187.733334 277.333333c-15.36 5.973333-25.6 20.053333-25.6 36.266667v8.533333c0 26.88 26.88 45.653333 51.626667 36.266667C793.6 815.36 896 675.84 896 512s-102.4-303.36-247.04-358.4c-24.746667-9.813333-51.626667 9.386667-51.626667 36.266667z"></path></svg>','<svg viewBox="0 0 1024 1024"><path d="M154.88 154.88a42.496 42.496 0 0 0 0 60.16L311.04 371.2 298.666667 384H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667v170.666666c0 23.466667 19.2 42.666667 42.666667 42.666667h128l140.373333 140.373333c26.88 26.88 72.96 7.68 72.96-30.293333v-177.92l178.346667 178.346667c-20.906667 15.786667-43.52 29.013333-68.266667 38.826666-15.36 6.4-24.746667 22.613333-24.746667 39.253334 0 30.72 31.146667 50.346667 59.306667 38.826666 34.133333-14.08 66.133333-32.853333 94.72-55.893333l57.173333 57.173333a42.496 42.496 0 1 0 60.16-60.16L215.466667 154.88c-16.64-16.64-43.52-16.64-60.586667 0zM810.666667 512c0 34.986667-6.4 68.693333-17.493334 99.84l65.28 65.28c23.893333-49.92 37.546667-105.813333 37.546667-165.12 0-163.413333-102.4-303.36-246.613333-358.4-25.173333-9.813333-52.053333 9.813333-52.053334 36.693333v8.106667c0 16.213333 10.666667 30.293333 26.026667 36.266667C733.013333 279.04 810.666667 386.56 810.666667 512z m-371.626667-268.373333l-7.253333 7.253333L512 331.093333V273.493333c0-37.973333-46.08-56.746667-72.96-29.866666zM704 512A192 192 0 0 0 597.333333 340.053333v76.373334l105.813334 105.813333c0.426667-3.413333 0.853333-6.826667 0.853333-10.24z"></path></svg>'],fullscreen:['<svg viewBox="-113 -113 1250 1250"><path d="M0 232.732444A232.732444 232.732444 0 0 1 232.732444 0h558.535112A232.732444 232.732444 0 0 1 1024 232.732444v558.535112A232.732444 232.732444 0 0 1 791.267556 1024H232.732444A232.732444 232.732444 0 0 1 0 791.267556V232.732444z m232.732444-139.662222a139.662222 139.662222 0 0 0-139.662222 139.662222v558.535112a139.662222 139.662222 0 0 0 139.662222 139.662222h558.535112a139.662222 139.662222 0 0 0 139.662222-139.662222V232.732444a139.662222 139.662222 0 0 0-139.662222-139.662222H232.732444z"></path><path d="M549.575111 245.845333c0-25.799111 20.935111-46.734222 46.734222-46.734222h116.821334A140.202667 140.202667 0 0 1 853.333333 339.313778v116.821333a46.734222 46.734222 0 0 1-93.468444 0v-116.821333c0-25.827556-20.906667-46.734222-46.734222-46.734222h-116.821334a46.734222 46.734222 0 0 1-46.734222-46.734223zM245.845333 549.546667c25.799111 0 46.734222 20.935111 46.734223 46.734222v116.821333c0 25.827556 20.906667 46.734222 46.734222 46.734222h116.821333a46.734222 46.734222 0 0 1 0 93.468445h-116.821333A140.202667 140.202667 0 0 1 199.111111 713.130667v-116.821334c0-25.799111 20.935111-46.734222 46.734222-46.734222z"></path></svg>','<svg viewBox="-113 -113 1250 1250"><path d="M0.739556 233.130667a232.391111 232.391111 0 0 1 232.391111-232.391111h557.738666a232.391111 232.391111 0 0 1 232.391111 232.391111v557.738666a232.391111 232.391111 0 0 1-232.391111 232.391111H233.130667a232.391111 232.391111 0 0 1-232.391111-232.391111V233.130667z m232.391111-139.434667a139.434667 139.434667 0 0 0-139.434667 139.434667v557.738666a139.434667 139.434667 0 0 0 139.434667 139.434667h557.738666a139.434667 139.434667 0 0 0 139.434667-139.434667V233.130667a139.434667 139.434667 0 0 0-139.434667-139.434667H233.130667z"></path><path d="M601.088 186.652444c25.685333 0 46.506667 20.792889 46.506667 46.478223v96.796444c0 25.685333 20.792889 46.478222 46.478222 46.478222h96.796444a46.478222 46.478222 0 1 1 0 92.984889h-96.796444a139.434667 139.434667 0 0 1-139.463111-139.463111V233.130667c0-25.685333 20.821333-46.478222 46.478222-46.478223z m-414.435556 414.435556c0-25.656889 20.792889-46.478222 46.478223-46.478222h96.796444a139.434667 139.434667 0 0 1 139.463111 139.463111v96.796444a46.478222 46.478222 0 0 1-92.984889 0v-96.796444c0-25.685333-20.792889-46.478222-46.478222-46.478222H233.130667a46.478222 46.478222 0 0 1-46.478223-46.506667z"></path></svg>'],pip:['<svg viewBox="0 0 1024 1024"><path d="M768 213.333333H256a85.333333 85.333333 0 0 0-85.333333 85.333334v426.666666a85.333333 85.333333 0 0 0 85.333333 85.333334h170.666667a42.666667 42.666667 0 1 1 0 85.333333H256a170.666667 170.666667 0 0 1-170.666667-170.666667V298.666667a170.666667 170.666667 0 0 1 170.666667-170.666667h512a170.666667 170.666667 0 0 1 170.666667 170.666667v128a42.666667 42.666667 0 1 1-85.333334 0V298.666667a85.333333 85.333333 0 0 0-85.333333-85.333334z m-128 341.333334a128 128 0 0 0-128 128v85.333333a128 128 0 0 0 128 128h170.666667a128 128 0 0 0 128-128v-85.333333a128 128 0 0 0-128-128h-170.666667z"></path></svg>','<svg viewBox="0 0 1024 1024"><path d="m768,213.33333l-512,0a85.33333,85.33333 0 0 0 -85.33333,85.33334l0,426.66666a85.33333,85.33333 0 0 0 85.33333,85.33334l170.66667,0a42.66667,42.66667 0 1 1 0,85.33333l-170.66667,0a170.66667,170.66667 0 0 1 -170.66667,-170.66667l0,-426.66666a170.66667,170.66667 0 0 1 170.66667,-170.66667l512,0a170.66667,170.66667 0 0 1 170.66667,170.66667l0,128a42.66667,42.66667 0 1 1 -85.33334,0l0,-128a85.33333,85.33333 0 0 0 -85.33333,-85.33334zm-128,341.33334a128,128 0 0 0 -128,128l0,85.33333a128,128 0 0 0 128,128l170.66667,0a128,128 0 0 0 128,-128l0,-85.33333a128,128 0 0 0 -128,-128l-170.66667,0z"></path><g stroke="null"><g stroke="null" transform="matrix(0.6896517266997474,0,0,0.6896517266997474,-10241.200782450309,-10001.206060939305) "><rect stroke="null" x="15122.523407" y="14826.656681" width="582" height="402" fill="none"></rect></g><g stroke="null" transform="matrix(0.6896517266997474,0,0,0.6896517266997474,-10241.200782450309,-10001.206060939305) "><path stroke="null" d="m15503.523407,14924.856681l-161.8,0c-66.2,0 -120,53.8 -120,120l0,161.8c0,22.1 17.9,40 40,40s40,-17.9 40,-40l0,-144.4l169.8,169.8c7.8,7.8 18,11.7 28.3,11.7c10.2,0 20.5,-3.9 28.3,-11.7c15.6,-15.6 15.6,-40.9 0,-56.6l-170.7,-170.6l146.1,0c22.1,0 40,-17.9 40,-40s-17.9,-40 -40,-40z"></path></g></g></svg>'],setting:'<svg viewBox="0 0 1024 1024" style="transform: scale(1.1);"><path d="M0 0h1024v1024H0z" fill-opacity="0"></path><path d="M501.333333 127.573333a21.333333 21.333333 0 0 1 21.333334 0l316.928 182.954667a21.333333 21.333333 0 0 1 10.666666 18.474667v365.994666a21.333333 21.333333 0 0 1-10.666666 18.474667L522.666667 896.426667a21.333333 21.333333 0 0 1-21.333334 0l-316.928-182.954667a21.333333 21.333333 0 0 1-10.666666-18.474667V328.96a21.333333 21.333333 0 0 1 10.666666-18.474667zM512 219.946667L259.029333 365.952v292.053333L512 804.010667l252.928-146.005334V365.952L512 219.946667zM512 426.666667a85.333333 85.333333 0 1 1 0 170.666666 85.333333 85.333333 0 0 1 0-170.666666z"></path></svg>\n',screenshot:'<svg viewBox="0 0 1024 1024"><path d="M412.245333 757.333333a42.666667 42.666667 0 0 1-56.490666-64l356.48-314.794666a42.666667 42.666667 0 0 1 56.746666 0.256l112.896 101.461333a42.666667 42.666667 0 1 1-57.088 63.488L740.266667 467.626667l-328.021334 289.706666zM810.666667 213.333333h-128a42.666667 42.666667 0 0 1 0-85.333333h170.666666a42.666667 42.666667 0 0 1 42.666667 42.666667v170.666666a42.666667 42.666667 0 0 1-85.333333 0V213.333333zM213.333333 213.333333v128a42.666667 42.666667 0 1 1-85.333333 0V170.666667a42.666667 42.666667 0 0 1 42.666667-42.666667h170.666666a42.666667 42.666667 0 1 1 0 85.333333H213.333333z m597.333334 597.333334v-128a42.666667 42.666667 0 0 1 85.333333 0v170.666666a42.666667 42.666667 0 0 1-42.666667 42.666667h-170.666666a42.666667 42.666667 0 0 1 0-85.333333h128zM213.333333 810.666667h128a42.666667 42.666667 0 0 1 0 85.333333H170.666667a42.666667 42.666667 0 0 1-42.666667-42.666667v-170.666666a42.666667 42.666667 0 0 1 85.333333 0v128z m170.666667-298.666667a128 128 0 1 1 0-256 128 128 0 0 1 0 256z m0-85.333333a42.666667 42.666667 0 1 0 0-85.333334 42.666667 42.666667 0 0 0 0 85.333334z"></path></svg>',playbackRate:'<svg viewBox="0 0 1024 1024"><path d="M512 951.04a435.2 435.2 0 1 1 435.2-435.2 435.2 435.2 0 0 1-435.2 435.2z m0-819.2a384 384 0 1 0 384 384A384 384 0 0 0 512 132.096z"></path><path d="M468.992 493.824l-130.048-75.008a20.992 20.992 0 0 0-31.232 18.176v150.016a20.992 20.992 0 0 0 31.232 18.176l130.048-75.008a20.992 20.992 0 0 0 0-36.352zM684.8 493.824l-129.536-75.008a21.248 21.248 0 0 0-31.744 18.432v149.504a21.248 21.248 0 0 0 31.744 18.432l129.536-75.008a20.992 20.992 0 0 0 0-36.352z"></path></svg>',subtitle:'<svg viewBox="0 0 1024 1024" version="1.1"><path d="M800 170.666667A138.666667 138.666667 0 0 1 938.666667 309.333333v405.546667a138.666667 138.666667 0 0 1-138.666667 138.666667H224A138.666667 138.666667 0 0 1 85.333333 714.88V309.333333a138.666667 138.666667 0 0 1 130.816-138.453333L224 170.666667h576z m0 64H224l-6.144 0.256A74.666667 74.666667 0 0 0 149.333333 309.333333v405.546667c0 41.216 33.450667 74.666667 74.666667 74.666667h576a74.666667 74.666667 0 0 0 74.666667-74.666667V309.333333a74.666667 74.666667 0 0 0-74.666667-74.666666zM234.666667 512c0-134.229333 115.754667-203.733333 218.538666-145.109333A32 32 0 0 1 421.461333 422.4C361.856 388.437333 298.666667 426.410667 298.666667 512c0 85.546667 63.317333 123.562667 122.88 89.728a32 32 0 0 1 31.573333 55.637333C350.549333 715.733333 234.666667 646.101333 234.666667 512z m320 0c0-134.229333 115.754667-203.733333 218.538666-145.109333a32 32 0 0 1-31.744 55.552C681.856 388.437333 618.666667 426.410667 618.666667 512c0 85.546667 63.317333 123.562667 122.88 89.728a32 32 0 0 1 31.573333 55.637333C670.549333 715.733333 554.666667 646.101333 554.666667 512z"></path></svg>',loop:'<svg viewBox="0 0 32 32"><g><path d="m16 2a13.9 13.9 0 0 0 -9 3.32v-2.32a1 1 0 0 0 -2 0v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2h-2.89a11.87 11.87 0 0 1 7.89-3 12 12 0 1 1 -11.67 9.23 1 1 0 1 0 -1.94-.46 13.72 13.72 0 0 0 -.39 3.23 14 14 0 1 0 14-14z"/><path d="m14 21.2a2 2 0 0 0 1.06-.31l5.11-3.19a2 2 0 0 0 0-3.4l-5.11-3.19a2 2 0 0 0 -3.06 1.69v6.4a2 2 0 0 0 2 2zm0-8.4 5.11 3.2-5.11 3.2z"/></g></svg>',quality:'<svg viewBox="0 0 32 32"><g><path d="m16 2a14 14 0 1 0 14 14 14 14 0 0 0 -14-14zm0 26a12 12 0 1 1 12-12 12 12 0 0 1 -12 12z"/><path d="m14.5 11a1 1 0 0 0 -1 1v3h-2v-3a1 1 0 0 0 -2 0v8a1 1 0 0 0 2 0v-3h2v3a1 1 0 0 0 2 0v-8a1 1 0 0 0 -1-1z"/><path d="m19.5 11h-2a1 1 0 0 0 -1 1v8a1 1 0 0 0 1 1h2a3 3 0 0 0 3-3v-4a3 3 0 0 0 -3-3zm1 7a1 1 0 0 1 -1 1h-1v-6h1a1 1 0 0 1 1 1z"/></g></svg>',lang:'<svg viewBox="0 0 1024 1024"><path d="M512 85.333333C277.333333 85.333333 85.333333 277.333333 85.333333 512s192 426.666667 426.666667 426.666667 426.666667-192 426.666667-426.666667S746.666667 85.333333 512 85.333333z m294.4 256H682.666667c-12.8-55.466667-34.133333-102.4-59.733334-153.6 76.8 29.866667 145.066667 81.066667 183.466667 153.6zM512 170.666667c34.133333 51.2 64 106.666667 81.066667 170.666666h-162.133334c17.066667-59.733333 46.933333-119.466667 81.066667-170.666666zM183.466667 597.333333c-8.533333-25.6-12.8-55.466667-12.8-85.333333s4.266667-59.733333 12.8-85.333333h145.066666c-4.266667 29.866667-4.266667 55.466667-4.266666 85.333333s4.266667 55.466667 4.266666 85.333333H183.466667z m34.133333 85.333334H341.333333c12.8 55.466667 34.133333 102.4 59.733334 153.6-76.8-29.866667-145.066667-81.066667-183.466667-153.6zM341.333333 341.333333H217.6c42.666667-72.533333 106.666667-123.733333 183.466667-153.6C375.466667 238.933333 354.133333 285.866667 341.333333 341.333333z m170.666667 512c-34.133333-51.2-64-106.666667-81.066667-170.666666h162.133334c-17.066667 59.733333-46.933333 119.466667-81.066667 170.666666z m98.133333-256H413.866667c-4.266667-29.866667-8.533333-55.466667-8.533334-85.333333s4.266667-55.466667 8.533334-85.333333h200.533333c4.266667 29.866667 8.533333 55.466667 8.533333 85.333333s-8.533333 55.466667-12.8 85.333333z m12.8 238.933334c25.6-46.933333 46.933333-98.133333 59.733334-153.6h123.733333c-38.4 72.533333-106.666667 123.733333-183.466667 153.6z m76.8-238.933334c4.266667-29.866667 4.266667-55.466667 4.266667-85.333333s-4.266667-55.466667-4.266667-85.333333h145.066667c8.533333 25.6 12.8 55.466667 12.8 85.333333s-4.266667 59.733333-12.8 85.333333h-145.066667z"></path></svg>',progressIndicator:null,loadingIndicator:null,previous:null,next:null,chromecast:null,airplay:null,danmaku:null,playlist:null};var ve,fe;(fe=ve||(ve={})).setupIcons=e=>{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(me[t]=e[t]);return me},fe.get=e=>me[e];const be=e=>{const t=()=>e.$root.classList.add(te),n=()=>{e.isSourceChanging||e.$root.classList.remove(te)};"none"!=e.$video.preload&&t(),e.on("loadstart",(()=>{"none"==e.$video.preload&&n()})),e.on(["seeking","videoqualitychange","videosourcechange"],t),e.on(["canplaythrough","playing","pause","seeked","error"],n),e.on(e.options.autoplay||R?"loadedmetadata":"canplay",(()=>e.$root.classList.remove(te))),e.on(["waiting","playing"],(o=>{"waiting"==o.type&&t();const i=e.currentTime,r=()=>{i!==e.currentTime?(n(),e.off("timeupdate",r)):t()};e.on("timeupdate",r)}))},ye=(e,t)=>{(e=>{e.on("play",(()=>{e.$root.classList.add(ne)})),e.on(["pause","videosourcechange"],(()=>{e.$root.classList.remove(ne)}))})(e),be(e),(e=>{e.on("fullscreenchange",(t=>{if(t.payload.isWeb)e.$root.classList.toggle(de);else{if(!e._requestFullscreen)return;e.$root.classList.toggle(ie)}}))})(e),q||((e,t)=>{function n(t){let n=t.target;n&&(e.$root.contains(n)||e.$root==n)?e.$root.classList.add(oe):e.$root.classList.remove(oe)}t&&e.$root.classList.add(oe),document.addEventListener("click",n),document.addEventListener("contextmenu",n),e.on("destroy",(()=>{document.removeEventListener("click",n),document.removeEventListener("contextmenu",n)}))})(e,t.autoFocus)};function ke(e,t,n){return Math.min(Math.max(e,t),n)}function xe(e){return e<10?"0"+e:""+e}function we(e){if(!isFinite(e))return"--:--";const t=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%3600%60);return(t>0?xe(t)+":":"")+xe(n)+":"+xe(o)}const Ee=e=>{if((e=>e.$root.classList.contains(te))(e)||isNaN(e.duration))return void e.emit("notice",{text:e.locales.get("Please wait for loading to complete")});const t=(e=>{var t;try{const n=e.$video,o=e.$root,i=e.context.ui,r=document.createElement("canvas"),s=n.videoWidth,a=n.videoHeight;r.width=s,r.height=a,r.getContext("2d").drawImage(n,0,0,s,a);const l=(null==(t=i.$watermark)?void 0:t.style)||{},c=l.top,d=l.left,u=l.right,h=l.bottom;if(i.$watermark&&[c,d,u,h].filter((e=>null!=e)).length>1){const e=i.$watermark,t=e.offsetLeft,n=e.offsetTop,a=e.offsetWidth,l=e.offsetHeight,p=i.$watermark.getBoundingClientRect(),g=p.width,m=p.height;let v=0,f=0;d?v=t:u&&(v=s-(o.clientWidth-t-a)-a),c?f=n:h&&(f=s-(o.clientHeight-n-l)-l),r.getContext("2d").drawImage(i.$watermark,v,f,g,m)}return r.toDataURL("image/png")}catch(n){return n}})(e);if(t instanceof Error)e.emit("notice",{text:t.message});else{!function(e,t){const n=document.createElement("a");n.href=e,n.download=t,n.click()}(t,(e.options.source.title||"OPlayer-ScreenShot")+"-"+we(e.currentTime).replace(/:/g,"-")+".png")}},$e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,n=null;const o=()=>n&&clearTimeout(n);return{callee:()=>{o(),n=setTimeout((()=>{e()}),t)},clear:o}};function Le(e,t){return e.classList.add(t),e}function Se(e,t){return e.classList.remove(t),e}function Te(e,t){return e.classList.contains(t)}const Pe={dragStart:q?"touchstart":"mousedown",dragMove:q?"touchmove":"mousemove",dragEnd:q?"touchend":"mouseup"},ze={ArrowUp:e=>{const t=100*e.volume+10;e.setVolume(t/100),e.emit("notice",{text:e.locales.get("Volume: %s",~~(100*e.volume)+"%")})},ArrowDown:e=>{const t=100*e.volume-10;e.setVolume(t/100),e.emit("notice",{text:e.locales.get("Volume: %s",~~(100*e.volume)+"%")})},ArrowLeft:(e,t)=>{var n,o;if(e.options.isLive||e.hasError)return;e.currentTime-((null==(n=t.theme.progress)?void 0:n.backward)||5)<0?e.seek(0):e.seek(e.currentTime-((null==(o=t.theme.progress)?void 0:o.forward)||5)),e.emit("notice",{text:we(e.currentTime)+" / "+we(e.duration)})},ArrowRight:e=>{e.options.isLive||e.hasError||(e.seek(e.currentTime+5),e.emit("notice",{text:we(e.currentTime)+" / "+we(e.duration)}))}," ":e=>e.togglePlay(),K:e=>e.togglePlay(),Escape:e=>{e.isFullScreen?e.exitFullscreen():e.$root.classList.contains(de)&&e.emit("fullscreenchange",{isWeb:!0})},F:e=>e.toggleFullScreen(),W:e=>e.emit("fullscreenchange",{isWeb:!0}),S:Ee,M:e=>e.isMuted?e.unmute():e.mute()};function Ae(e){var t,n;const o=e.player,i=e.config;function r(e){var t,n,r;if("INPUT"==(null==(t=document.activeElement)?void 0:t.tagName)||"TEXTAREA"==(null==(n=document.activeElement)?void 0:n.tagName)||(null==(r=document.activeElement)?void 0:r.getAttribute("contenteditable"))||i.keyboard.focused&&!(e=>e.$root.classList.contains(oe))(o)||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;const s=e.key.toLocaleUpperCase();ze[s]&&(e.preventDefault(),ze[s](o,i))}(!q||(null==(t=i.keyboard)?void 0:t.focused)||(null==(n=i.keyboard)?void 0:n.global))&&(e.keyboard={register:function(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(ze[t]=e[t])},unregister:function(e){e.forEach((e=>{delete ze[e]}))}},document.addEventListener("keydown",r),o.on("destroy",(()=>{document.removeEventListener("keydown",r)})))}const Oe="speed";function Ce(e){var t;const n=e.player,o=e.config.theme,i=e.$mask,r=null==(t=o.controller)?void 0:t.slideToSeek;q&&!n.options.isLive&&r&&"none"!=r&&n.once("loadedmetadata",(()=>{let e,t=0,o=0,s=0,a=0;const l=n.$root.getBoundingClientRect();function c(e){if(0==t&&0==o)return;const i=e.changedTouches[0],r=i.clientX,s=i.clientY,c=r-t,d=o-s;if(Math.abs(c)<2&&Math.abs(d)<2)return;const u=function(e,t){return 180*Math.atan2(t,e)/Math.PI}(c,d);(u>=-45&&u<45||u>=135&&u<=180||u>=-180&&u<-135)&&(e.preventDefault(),a=60*c/l.width,n.emit("notice",{text:we(ke(n.currentTime+a,0,n.duration))+" / "+we(n.duration),pos:"top"}))}function d(){0==t&&0==o||("long-touch"==r&&s<1e3&&(e&&clearInterval(e),i.removeEventListener("touchmove",c)),Math.abs(a)>=1&&n.seek(ke(n.currentTime+a,0,n.duration)),t=o=a=s=0)}"always"==r&&(i.addEventListener("touchstart",(e=>{if(Te(n.$root,re))return;const i=e.changedTouches[0],r=i.clientX,s=i.clientY;t=r,o=s})),i.addEventListener("touchmove",c),i.addEventListener("touchend",d)),"long-touch"==r&&i.addEventListener("touchstart",(r=>{if(Te(n.$root,re))return;const a=r.changedTouches[0],l=a.clientX,u=a.clientY;t=l,o=u,e=window.setInterval((()=>{s+=100,s>=1e3&&(clearInterval(e),n.emit("notice",{text:"slid left or right to seek",pos:"top"}),i.addEventListener("touchmove",c))}),100),i.addEventListener("touchend",d,{once:!0})}))}))}const Me=$.css(t||(t=f(["\n  font-variant-numeric: tabular-nums;\n  font-size: 0.875em;\n"]))),Fe=$.css("width:0.5em;height:0.5em;background-color:var(--primary-color);border-radius:50%;margin-right:0.5em"),je=$.css("\n    position: absolute;\n    top: 10px;\n    right: 50%;\n    border-radius: 2px;\n    box-sizing: border-box;\n    transform: translate(50%, -100%);\n    transition: opacity 0.2s ease, top 0.2s ease;\n    font-size: 0.875em;\n"),Be=$.css("\n    top: calc(100% - 10px);\n    right: 50%;\n    transform: translateX(50%);\n"),Re=$.css({position:"relative",display:"flex",["& ."+je]:{visibility:"hidden",opacity:0,"background-color":"var(--shadow-background-color)"}}),He=$.css({"&:hover":{"padding-top":"0.5em","margin-top":"-0.5em",["& ."+je]:{visibility:"visible",opacity:1,top:0}},"&[data-dropdown-pos=top]:hover":{"padding-bottom":"0.5em","margin-bottom":"-0.5em",["& ."+je]:{top:"100%"}}}),qe=$.css({padding:"0 0.5em","min-width":"6em",display:"block",height:"2.4em","line-height":"2.4em",cursor:"pointer","text-align":"center","word-break":"keep-all","&:nth-last-child(1)":{"margin-bottom":"0px"},"& *":{"pointer-events":"none"},"&[aria-checked=true]":{color:"var(--primary-color)"},"&:hover":{"background-color":"rgba(255, 255, 255, 0.1)"}}),Ie=$.cls("textIcon"),De=$.css({display:"flex","align-items":"center",["& > ."+ue+":last-child"+(q?", & >  ."+ue+'[aria-label="Play"], & >  .'+ue+'[aria-label="Pause"]':"")]:{"margin-right":0}}),Ne=$.css({color:"#fff",height:"2.375em",display:"flex","box-sizing":"border-box","justify-content":"space-between","align-items":"center","padding-bottom":q?0:"0.25em",["& ."+ue+"."+Ie]:{width:"auto","min-width":"2em","font-size":"0.875em",padding:"0 4px","border-radius":"2px"},["& ."+ue]:Object.assign({width:"2em",height:q?"auto":"2em","margin-right":"0.5em","justify-content":"center","align-items":"center",display:"inline-flex","& > *":{height:"1.5em",width:"1.5em","pointer-events":"none",transition:"transform .2s ease-in-out"}},q?{"&:active > *":{transform:"scale(.9)"}}:{"&:hover":{"background-color":"rgb(255 255 255 / .2)"}})}),Ve=$.css({flex:1,height:"100%","padding-left":"0.5em","> div":{height:"100%",display:"flex","align-items":"center"}}),_e=$.css("display: block;"),Ue=$.css("min-width: 15.5em;"),Xe=$.css("min-width: 10.5em;"),We=$.css("\n  display: none;\n  width: 1.4em;\n  height: 1.4em;\n"),Ye=$.css("\n  width: 2em;\n  height: 2em;\n  margin: 0 -10px 0 -5px;\n"),Qe=$.css("\n  width: 2em;\n  height: 2em;\n  transform: rotate(180deg);\n  margin-left: -10px;\n"),Ke=$.css({position:"absolute",cursor:"pointer",top:"0",left:"0",right:"0",bottom:"0","background-color":"#ccc",transition:".3s","border-radius":"34px","&:before":{position:"absolute",content:'""',height:"1em",width:"1em",left:"0.25em",bottom:"0.1875em","background-color":"white",transition:".3s","border-radius":"50%"}}),Je=$.css("\n  position: relative;\n  width: 2.5em;\n  height: 1.375em;\n"),Ge=$.css("\n  white-space: nowrap;\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 0.8em;\n"),Ze=$.css({height:"2.4em",cursor:"pointer",color:"#fff","justify-content":"space-between","align-items":"center",padding:"0 0.75em","line-height":"1",display:"flex",overflow:"hidden","&:not([aria-label=slider]) > *":{"pointer-events":"none"},"&:hover":{"background-color":"rgba(255, 255, 255, 0.1)"},"&[aria-checked='true']":{["& ."+We]:{display:"block"},"&[data-index]":{"background-color":"rgba(255, 255, 255, 0.1)"},["& ."+Ke]:{"background-color":"var(--primary-color)","&:before":{transform:"translateX(1em)"}}}}),et=$.css({display:"flex","align-items":"center","margin-right":"10px","& > svg":{width:"1.7em",height:"1.7em","margin-right":"0.5em"}}),tt=$.css("\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n"),nt=$.css({width:"100%",display:"flex","align-items":"center","border-bottom":"1px solid rgb(255 255 255 / 10%)"}),ot=$.css({"-webkit-appearance":"none",width:"90%",height:"0.4em",outline:"none","border-radius":"34px",background:"rgb(204, 204, 204)",margin:"0",cursor:"pointer",position:"relative","&::-webkit-slider-thumb":{"-webkit-appearance":"none",appearance:"none",background:"#fff",height:"1em",width:"1em","border-radius":"50%",border:"none"},"&:hover::before":{visibility:"visible"},"::before":{position:"absolute",left:"-0.3em",top:"50%",transform:"translate(-100%, -50%)",content:"attr(value)",color:"rgba(255, 255, 255, 0.7)",visibility:"hidden","font-size":"0.8em"}}),it=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;return"<svg "+(e?'class="'+e+'"':"")+' viewBox="0 0 32 32"><path d="m 12.59,20.34 4.58,-4.59 -4.58,-4.59 1.41,-1.41 6,6 -6,6 z" fill="#fff"></path></svg>'},rt=function(e){return'<div class="'+et+'">\n      '+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"\n      <span>"+e+"</span>\n    </div>\n    <div class="+tt+'>\n      <span role="label" class='+Ge+"></span>\n      "+it()+"\n    </div>\n"};function st(e){let t=e.type,n=e.key,o=e.name,i=e.icon,r=e.default,s=e.index,a=e.max,l=e.min,c=e.step,d=e.hasChildren,u=$.create("div."+Ze,{"data-key":n,role:"option"==t?"menuitemradio":"menuitem","aria-haspopup":!!d&&"menu","aria-label":t||"menuitem"});const h={$row:u,$label:void 0};switch(t){case"switcher":u.innerHTML=function(e){return'<div class="'+et+'">\n    '+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"\n    <span>"+e+"</span>\n  </div>\n  <div class="+tt+">\n    <label class="+Je+">\n      <span class="+Ke+"></span>\n    </label>\n  </div>\n"}(o,i),u.setAttribute("aria-checked",r||!1);break;case"selector":u.innerHTML=rt(o,i),h.$label=u.querySelector('span[role="label"]');break;case"back":u.innerHTML=(e=>'<div class="'+nt+'">\n      '+it(Qe)+"\n      <span>"+e+"</span>\n    </div>\n")(o);break;case"slider":u.innerHTML=(e=>{let t=e.name,n=e.icon,o=void 0===n?"":n,i=e.max,r=void 0===i?1:i,s=e.min,a=void 0===s?0:s,l=e.value,c=void 0===l?0:l,d=e.step;return'<div class="'+et+'">\n    '+o+"\n    <span>"+t+"</span>\n  </div>\n  <div class="+tt+'>\n   <input type="range" min="'+a+'" max="'+r+'" step="'+(void 0===d?1:d)+'" value="'+c+'" class="'+ot+'" />\n  </div>'})({name:o,max:a,min:l,icon:i,value:r,step:c});break;case"option":u.innerHTML=function(e){return'<div class="'+et+'">\n      '+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"\n      <span>"+e+"</span>\n    </div>\n    <svg class="+We+' viewBox="0 0 24 24">\n      <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#fff"></path>\n    </svg>\n'}(o,i),u.setAttribute("aria-checked",r||!1),"number"==typeof s&&u.setAttribute("data-index",s.toString());break;default:u.innerHTML=d?rt(o,i):function(e){return'<div class="'+et+'">\n    '+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"\n    <span>"+e+"</span>\n  </div>\n"}(o,i)}return h}function at(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!n||0==n.length)return;const i=o.key,r=o.target,s=o.parent,a=o.isSelectorOptionsPanel,l=o.name;let c={},d=i||"root";t[0]&&"root"==d?(c=t[0],d=t[0].key):(c.$ref=$.create("div."+(t[0]&&a?Xe:Ue),{"data-key":d,role:"menu"}),c.key=d,t.push(c)),c.parent=s;const u="root"==c.key;if(!u){const e=st({name:l,type:"back"}).$row;e.addEventListener("click",(()=>{var e;c.$ref.classList.remove(_e),null==(e=c.parent)||e.$ref.classList.add(_e)})),$.render(e,c.$ref)}for(let h=0;h<n.length;h++){const i=n[h],s=i.name,l=i.type,d=i.key,p=i.children,g=i.icon,m=i.default,v=i.onChange,f=i.max,b=i.min,y=i.step,k=i.value,x=st(Object.assign({name:s,type:a?"option":l,key:d,icon:g,default:m,max:f,min:b,step:y,hasChildren:Boolean(p)},!u&&a&&{index:h})),w=x.$row,E=x.$label;if($.render(w,c.$ref),$.render(c.$ref,r),p){const n="selector"==l&&p.every((e=>!Boolean(e.type)||"option"==e.type)),o=at(e,t,p,{key:d||s,target:r,parent:c,isSelectorOptionsPanel:n,name:s,parenOnChange:v});if(w.addEventListener("click",(()=>{c.$ref.classList.remove(_e),o.$ref.classList.add(_e)})),n){const t=p.find((e=>e.default));t&&(E.innerText=t.name),o.select=(t,n)=>{var i;if(-1==t)return void(null==(i=o.$ref.querySelector("[aria-checked=true]"))||i.setAttribute("aria-checked","false"));const r=o.$ref.querySelectorAll("[aria-checked]");if("true"!=r.item(t).getAttribute("aria-checked")){r.forEach((e=>e.setAttribute("aria-checked","false"))),r.item(t).setAttribute("aria-checked","true");const o=p[t];E.innerText=o.name,n&&(null==v||v(o,{index:t,player:e}))}},o.$ref.addEventListener("click",(e=>{const t=e.target;t.hasAttribute("data-index")&&(o.select(+t.getAttribute("data-index"),!0),c.$ref.classList.add(_e),o.$ref.classList.remove(_e))}))}}else if("switcher"==l)w.select=function(e){const t="true"==this.getAttribute("aria-checked");this.setAttribute("aria-checked",""+!t),e&&(null==v||v(!t))},w.addEventListener("click",(()=>w.select(!0)));else if("slider"==l){const e=w.querySelector("input");e.oninput=function(e){e.target.setAttribute("value",e.target.value)},e.onchange=function(e){null==v||v(e.target.value)}}else("option"==l||null==l&&!a)&&w.addEventListener("click",(()=>{var e;return null==(e=v||o.parenOnChange)?void 0:e(k)}))}return c}function lt(e){var t,n;const o=e.player,i=e.$root,r=e.config;if(!1===r.settings)return;const s=null==(t=r.theme.controller)?void 0:t.setting,a=r.settings||[],l=(null==(n=r.theme.controller)?void 0:n.header)&&("top"==s||q&&"auto"==s),c=$.create("div."+(e=>$.css({"z-index":"8","max-height":"75%","border-radius":"2px",display:"block",position:"absolute",right:"1em",[e]:"top"==e?"var(--control-bar-height)":"2.5em",overflow:"auto","background-color":"var(--shadow-background-color)",fill:"#fff","&::-webkit-scrollbar":{width:"2px"},"&::-webkit-scrollbar-thumb":{background:"var(--primary-color)"},"& > div":{display:"none","font-size":"0.875em"},["& > div."+_e]:{display:"block"}}))(l?"top":"bottom"),{"aria-label":"Setting"});let d=[],u=!1;const h={loop:{name:o.locales.get("Loop"),type:"switcher",key:"loop",icon:ve.get("loop"),default:o.isLoop,onChange:e=>o.setLoop(e)}};function p(e){var t,n;u&&(null==(n=null==(t=d[0])?void 0:t.$ref.querySelector("[data-key="+e+"]"))||n.remove(),d=d.filter((t=>t.key!==e||(t.$ref.remove(),t=null,!1))))}function g(t){var n;t.length<1||(u||(u=!0,$.render(c,i),function(){const t=$.create("button",{class:ue+" "+ge,"aria-label":o.locales.get("Settings"),"data-tooltip-pos":"top"==s?"down":""},""+ve.get("setting"));t.addEventListener("click",(e=>{e.stopPropagation(),m()}));const n=[r.pictureInPicture&&o.isPipEnabled,r.fullscreen].filter(Boolean).length;if(l){const n=e.$controllerBar.lastElementChild;n.insertBefore(t,n.children[n.children.length])}else{const o=e.$controllerBottom.lastElementChild;o.insertBefore(t,o.children[o.children.length-n])}}(),null==(n=e.keyboard)||n.register({c:m})),at(o,d,t,{target:c}))}function m(){function e(t){c.contains(t.target)||(o.$root.classList.remove(re),d.forEach((e=>e.$ref.classList.remove(_e))),document.removeEventListener("click",e))}o.$root.classList.add(re),d[0].$ref.classList.add(_e),setTimeout((()=>{document.addEventListener("click",e)}))}g(a.map((e=>"string"==typeof e?h[e]:e))),e.setting={register:function(e){g((Array.isArray(e)?e:[e]).map((e=>{const t=d.find((t=>t.key==e.key));if(!t)return e;p(t.key)})).filter(Boolean))},unregister:p,updateLabel:function(e,t){if(!u)return;const n=c.querySelector('[data-key="'+e+'"] span[role="label"]');n&&(n.innerText=t)},select:function(e,t){var n;let o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(u)if("number"==typeof t)for(let i=0;i<d.length;i++){const n=d[i];if(n.key==e){n.select(t,o);break}}else null==(n=c.querySelector('[data-key="'+e+'"][aria-checked]'))||n.select(o)}}}const ct=$.css({position:"absolute",top:0,left:0,right:0,"z-index":7,padding:"0.5em 0.5em 0",transition:"transform 0.3s ease",height:"var(--control-bar-height)",color:"#fff","&::before":{position:"absolute",content:"''",width:"100%",display:"block",top:0,left:0,bottom:"-1em","z-index":-1,transition:"opacity 0.3s ease","pointer-events":"none","background-image":"linear-gradient(rgba(0, 0, 0, .3), transparent)"},"& > div:nth-child(1)":{overflow:"hidden",flex:"1 1 0","margin-right":"0.5em"},["& > div:nth-child(2) ."+Re+":last-child ."+je]:{right:"max(50%,3em)"},["@global ."+le+" &"]:{transform:"translateY(calc(-100%))","&::before":{opacity:0}}}),dt=$.css("width: 2.5em;height: 2.5em;margin:0 -10px;transform: rotate(180deg);"),ut=$.css("flex:1;font-size:1em;margin: 0 0.25em;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"),ht=$.css(n||(n=f(["\n  width: 2.65em;\n  display: flex;\n  height: 7.65em;\n  box-sizing: border-box;\n  flex-direction: column;\n"]))),pt=$.css("\n  width: 100%;\n  text-align: center;\n  height: 28px;\n  line-height: 28px;\n  margin-bottom: 2px;\n  font-size: 0.75em;\n"),gt=$.css("\n  position: relative;\n  display: flex;\n  justify-content: center;\n  flex: 1;\n  cursor: pointer;\n  padding: 5px 0 14px;\n"),mt=$.css("\n  height: 100%;\n  width: 4px;\n  position: relative;\n"),vt=$.css("\n  width: 4px;\n  height: 100%;\n  overflow: hidden;\n  border-radius: 2px;\n  background: rgba(255, 255, 255, 0.3);\n"),ft=$.css("\n  height: 100%;\n  background-color: var(--primary-color);\n  transform-origin: 0 100%;\n"),bt=$.css(o||(o=f(["\n  position:absolute;\n  bottom: 0;\n  top: auto;\n  left: -4px;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background-color: var(--primary-color);\n  vertical-align: middle;\n  pointer-events: none;\n  "]))),yt=(e,t)=>{const n=$.create("div."+ht,{},"<div class="+pt+">100</div>\n\n    <div class="+gt+">\n        <div class="+mt+">\n          <div class="+vt+">\n            <div class="+ft+"></div>\n          </div>\n\n          <div class="+bt+"></div>\n        <div>\n      </div>"),o=n.querySelector("."+gt),i=n.querySelector("."+bt),r=n.querySelector("."+ft),s=n.querySelector("."+pt),a=t=>{t.preventDefault(),e.setVolume(l((e=>{const t=o.getBoundingClientRect(),n=(t.bottom-(e.clientY||e.changedTouches[0].clientY))/t.height;return n>=1?1:n<=0?0:n})(t)))},l=e=>(s.innerText=""+~~(100*e),r.style.transform="scaleY("+e+")",i.style.bottom="calc("+~~(100*e)+"% - 6px)",e);l(e.volume),e.on("volumechange",(()=>{l(e.isMuted?0:e.volume)})),o.addEventListener(Pe.dragStart,(e=>{a(e),document.addEventListener(Pe.dragMove,a,{passive:!1}),document.addEventListener(Pe.dragEnd,(()=>{document.removeEventListener(Pe.dragMove,a)}),{once:!0})})),$.render(n,t)},kt=$.css("\n  display: none;\n  bottom: 15px;\n  position: absolute;\n  left: 50%;\n  padding: 6px 8px;\n  background-color: var(--shadow-background-color);\n  color: #fff;\n  border-radius: 2px;\n  white-space: nowrap;\n  word-break: nowrap;\n  transform: translateX(-50%);"),xt=$.css({position:"absolute",width:"0.8em",height:"0.33em","background-color":"var(--highlight-color)",transform:"translateX(-3px)",transition:"all 0.2s",["&:hover > ."+kt]:{display:"block"}});const wt=$.css("\n  position: absolute;\n  left: 0;\n  bottom: 12px;\n  pointer-events: none;\n  transform: translateX(-50%);\n  background-position-y: center;\n  border-radius: 2px;\n  display: none;"),Et=$.css("\n  position: absolute;\n  left: 0;\n  bottom: 12px;\n  pointer-events: none;\n  border-radius: 2px;\n  display: none;"),$t={width:160,height:90};const Lt=$.css({"background-color":"hsla(0, 0%, 100%, 0.4)"}),St=$.css({"background-color":"var(--primary-color)"}),Tt=$.css({"pointer-events":"none",position:"relative","& > *":{display:"block",position:"absolute",width:"1.4em",height:"1.4em",top:"0",left:"0",margin:"-0.535em 0 0 -0.7em",transform:q?"none":"scale(0)",transition:"transform 0.3s ease","z-index":"1"},"& > *:not(svg)":{width:"1em",height:"1em",margin:"-0.335em 0 0 -0.5em","border-radius":"50%","background-color":"#fff"}}),Pt=$.css({position:"absolute",left:"0","border-radius":"2px",padding:"6px 8px","background-color":"var(--shadow-background-color)",color:"#fff","z-index":"2","pointer-events":"none",transform:"translateX(-50%)",display:"none",bottom:"15px"}),zt=$.css("/* progressDragging */"),At=$.css(Object.assign({position:"relative","box-sizing":"border-box",padding:"0.5em",cursor:"pointer",width:"100%","font-size":"0.75em",transition:"padding 0.3s ease",["&."+zt+" ."+Pt+", &."+zt+" ."+wt+", &."+zt+" ."+Et]:{display:"block"}},q?{["@global ."+le+" ."+Tt+" > *"]:{transform:"scale(0)"}}:{["&."+zt+" ."+Tt+" > *, &:hover ."+Tt+" > *"]:{transform:"scale(1)"}})),Ot=$.css({position:"relative",height:"0.33em",width:"100%","background-color":"hsla(0, 0%, 100%, 0.2)",["& ."+Lt+", & ."+St]:{position:"absolute",left:"0",top:"0",bottom:"0","pointer-events":"none"}}),Ct=(e,t)=>{var n;const o=e.player,i=e.config;if(o.options.isLive)return;const r=e.$progress=$.create("div."+At,{},"<div class="+Ot+'>\n      <div class="'+Pt+'">00:00</div>\n      <div class="'+Lt+'" style="width:0%"></div>\n      <div class="'+St+'" style="width:0%"></div>\n      <div class="'+Tt+'" style="transform: translateX(0%);">\n        '+(ve.get("progressIndicator")||"<span />")+"\n      </div>\n  </div>"),s=r.firstElementChild;(null==(n=i.thumbnails)?void 0:n.isVTT)?console.warn("vtt thumbnails support by @oplayer/pluins"):function(e,t){const n=e.config.thumbnails,o=e.player;let i,r=!1;const s=$.render($.create("div."+wt),t);function a(e){if(r&&e){const n=[i.width/2,t.clientWidth],o=n[0],r=n[1],a=o/r,l=(r-o)/r;if(s.style.left=100*(e<a?a:e>l?l:e)+"%",Array.isArray(i.src)){const t=i.number*e,n=Math.ceil(t/(i.x*i.y))-1,o=t%i.number,r=Math.floor(o/i.x),a=Math.ceil(o%i.x);s.style.backgroundImage="url("+i.src[n]+")",s.style.backgroundPosition=-a+"00% "+-r+"00%"}else{const t=Math.floor(e*i.number);s.style.backgroundPositionX="-"+t+"00%"}}else r=!0,s.style.width=i.width+"px",s.style.height=i.height+"px",Array.isArray(i.src)||(s.style.backgroundImage="url("+i.src+")")}function l(t){r=!1,i=Object.assign({},$t,t),i.y&&!Array.isArray(i.src)&&(i.src=[i.src]),e.progressHoverCallback.push(a)}(null==n?void 0:n.src)&&l(n),o.on("videosourcechange",(()=>{r=!1,s.style.backgroundImage="none",e.progressHoverCallback.splice(e.progressHoverCallback.findIndex((e=>e==a)),1)})),e.changThumbnails=l}(e,s),e.vttThumbnailsCls=Et,function(e,t){const n=e.player,o=e.config.highlight;let i=[];function r(e){const t=$.create("div."+xt,{},'<span class="'+kt+'">'+e.text+"</san>");return t.style.left=e.left+"%",t}function s(e,n){i.forEach((e=>e.remove()));for(let o=0;o<e.length;o++){const s=e[o],a=r({left:s.time/n*100,text:s.text});i.push(a),$.render(a,t)}}function a(e){n.duration!==1/0&&n.duration>0?s(e,n.duration):n.once("loadedmetadata",(function(){s(e,n.duration)}))}t.style.setProperty("--highlight-color",(null==o?void 0:o.color)||"#FFF"),(null==o?void 0:o.source)&&a(o.source),n.on("videosourcechange",(()=>{i.forEach((e=>e.remove())),i=[]})),e.changHighlightSource=function(e){a(e)}}(e,s);const a=r.querySelector("."+Lt),l=r.querySelector("."+St),c=r.querySelector("."+Tt),d=r.querySelector("."+Pt);let u=!1;const h=e=>{const t=r.getBoundingClientRect(),n=((e.clientX||e.changedTouches[0].clientX)-t.left)/t.width;return n>=1?1:n<=0?0:n},p=e=>{const t=h(e),n=100*t;return l.style.width=n+"%",c.style.transform="translateX("+n+"%)",d.innerText=we(o.duration*t),d.style.left=n+"%",t};r.addEventListener(Pe.dragStart,(t=>{u=!0,r.classList.add(zt);const n=p(t);function i(t){t.preventDefault();const n=p(t);e.progressHoverCallback.forEach((e=>e(n)))}e.progressHoverCallback.forEach((e=>e(n))),document.addEventListener(Pe.dragMove,i,{passive:!1}),document.addEventListener(Pe.dragEnd,(e=>{r.classList.remove(zt),u=!1,document.removeEventListener(Pe.dragMove,i),isNaN(o.duration)||o.seek(h(e)*o.duration)}),{once:!0})})),q||(r.addEventListener("mouseenter",(()=>{u||e.progressHoverCallback.forEach((e=>e()))})),r.addEventListener("mousemove",(t=>{if(u)return;r.classList.add(zt),t.target.classList.contains(xt)?d.style.display="none":d.removeAttribute("style");const n=h(t);d.innerText=we(o.duration*n),d.style.left=100*n+"%",e.progressHoverCallback.forEach((e=>e(n)))}),{passive:!1}),r.addEventListener("mouseleave",(()=>{u||r.classList.remove(zt)}))),o.on(["timeupdate","seeking"],(()=>{if(u)return;const e=o.currentTime/o.duration*100||0;l.style.width=e+"%",c.style.transform="translateX("+e+"%)"})),o.on("progress",(()=>{const e=o.buffered.length?o.buffered.end(o.buffered.length-1)/o.duration*100:0;a.style.width=e+"%"})),o.on("videosourcechange",(()=>{a.style.width="0%",l.style.width="0%",c.style.transform="translateX(0%)"})),$.render(r,t)},Mt=$.css({position:"absolute",left:0,right:0,bottom:0,"z-index":7,padding:"0 0.5em",transition:"transform 0.3s ease, padding 0.3s ease","min-height":"var(--control-bar-height)","&::before":{position:"absolute",content:"''",width:"100%",display:"block",bottom:0,left:0,"z-index":-1,top:"-1em",transition:"opacity 0.3s ease","pointer-events":"none","background-image":"linear-gradient(transparent, rgba(0, 0, 0, .3))"},["@global ."+le+" &"]:{"pointer-events":"none",transform:"translateY(calc(100% - 0.55em))",padding:0,"&::before":{opacity:0}},["@global ."+le+" ."+At]:{"padding-left":0,"padding-right":0}}),Ft=(e,t)=>{var n,o,i;const r=e.player,s=e.config,a=$.render($.create("div."+Mt),t);(null==(n=s.theme.progress)?void 0:n.mini)&&!r.options.isLive||$.css({["@global ."+le+" ."+Mt]:{transform:"translateY(100%)"}});const l=[r.locales.get("Play"),r.locales.get("Pause"),r.locales.get("Screenshot"),r.locales.get("Picture in Picture"),r.locales.get(r.isFullscreenEnabled?"Fullscreen":"WebFullscreen"),r.locales.get("Previous"),r.locales.get("Next")],c=l[0],d=l[1],u=l[2],h=l[3],p=l[4],g=l[5],m=l[6],v=ve.get("previous")||"",f=ve.get("next")||"",b=e.$controllerBottom=$.create("div."+Ne,{},'<div class="'+De+'">\n\n    '+(v&&'<button class="'+ue+" "+ge+'" aria-label="'+g+'" >'+v+"</button>")+'\n\n      <button\n        class="'+ue+" "+(r.isPlaying?he:pe)+" "+ge+'"\n        aria-label="'+c+'"\n      >\n        '+ve.get("play")+"\n        "+ve.get("pause")+"\n      </button>\n\n      "+(f&&'<button class="'+ue+" "+ge+'" aria-label="'+m+'">'+f+"</button>")+"\n\n      "+(r.options.isLive?'<span class="'+Fe+'"></span>':"")+"\n\n      <span class="+Me+">"+(r.options.isLive||"none"==r.$video.preload?"00:00":"00:00 / --:--")+'</span>\n    </div>\n\n    <div class="'+Ve+'"></div>\n\n    <div class="'+De+'">\n      <div class="'+Re+" "+He+'">\n        <button class="'+ue+" "+(r.isMuted?he:pe)+'" aria-label="Volume">\n            '+ve.get("volume")[0]+"\n            "+ve.get("volume")[1]+"\n        </button>\n        "+(H?"":"<div class="+je+"></div>")+"\n      </div>\n\n      "+(s.screenshot?'<button class="'+ue+" "+ge+'" aria-label="'+u+'">\n              '+ve.get("screenshot")+"\n            </button>":"")+"\n\n      "+(s.pictureInPicture&&r.isPipEnabled?'<button\n              class="'+ue+" "+ge+" "+(r.isInPip?he:pe)+'"\n              aria-label="'+h+'">\n                '+ve.get("pip")[0]+"\n                "+ve.get("pip")[1]+"\n            </button>":"")+"\n\n      "+(s.fullscreen?'<button class="'+ue+" "+pe+" "+ge+'" aria-label="'+p+'">\n                '+ve.get("fullscreen")[0]+"\n                "+ve.get("fullscreen")[1]+"\n              </button>":"")+"\n    </div>");"auto"==(null==(o=s.theme.progress)?void 0:o.position)&&q||"center"==(null==(i=s.theme.progress)?void 0:i.position)?Ct(e,b.querySelector("."+Ve)):Ct(e,a);const y=b.querySelector("button[aria-label=Volume]");H||yt(r,y.nextElementSibling);const k=b.querySelector("button[aria-label="+c+"]"),x=b.querySelector("."+Me),w=b.querySelector('button[aria-label="'+p+'"]'),E=b.querySelector('button[aria-label="'+h+'"]'),L=(e,t)=>{e.classList.add(t?he:pe),e.classList.remove(t?pe:he)};s.fullscreen&&r.on("fullscreenchange",(()=>setTimeout((()=>{L(w,(e=>e.$root.classList.contains(ie)||e.$root.classList.contains(de))(r))})))),s.pictureInPicture&&r.on(["enterpictureinpicture","leavepictureinpicture"],(()=>L(E,r.isInPip))),r.on(["play","pause","videosourcechange"],(()=>{k.setAttribute("aria-label",r.isPlaying?d:c),L(k,r.isPlaying)})),r.on("volumechange",(()=>L(y,r.isMuted))),r.on(["durationchange","timeupdate","seeking","seeked"],(()=>{x.innerText=we(r.currentTime)+" "+(r.options.isLive?"":"/ "+we(r.duration))})),r.on("videosourcechange",(()=>{x.innerText=r.options.isLive||"none"==r.$video.preload?"00:00":"00:00 / --:--"})),b.addEventListener("click",(e=>{switch(e.target.getAttribute("aria-label")){case c:case d:return r.togglePlay();case"Volume":if(q&&!H)return;r.isMuted?r.unmute():r.mute();break;case h:return r.togglePip();case p:return void((e=>e.$root.classList.contains(de))(r)||!r.isFullscreenEnabled?r.emit("fullscreenchange",{isWeb:!0}):r.toggleFullScreen());case u:Ee(r);break;case m:r.emit("next");break;case g:r.emit("previous")}})),$.render(b,a)},jt=e=>{const t=e.player,n=e.config,o=e.$root,i=$.create("div");((e,t)=>{var n,o,i;const r=e.player,s=null==(n=e.config.theme.controller)?void 0:n.header;if(!s)return;const a=null==s?void 0:s.back,l=a&&q,c=e.$controllerBar=$.create("div",{class:ct+" "+Ne},'<div class="'+De+'">\n    '+(l?"<span role='button' class=\""+dt+" "+("fullscreen"==a?se:"")+'">'+it("")+"</span>":"")+"\n      <h2 class='"+ut+"'>"+((null==(i=null==(o=r.options)?void 0:o.source)?void 0:i.title)||"")+'</h2>\n    </div>\n    <div class="'+De+'"></div>'),d=c.querySelector("."+ut);if(l){const e=d.previousElementSibling;e.addEventListener("click",(e=>{r.isFullScreen&&r.exitFullscreen(),r.emit("backward",e)})),"fullscreen"==a&&r.on("fullscreenchange",(()=>{r.isFullScreen?e.classList.remove(se):e.classList.add(se)}))}r.on("videosourcechange",(e=>{let t=e.payload;t.then||(d.innerText=t.title||"")})),r.on("sourcechangeerror",(e=>{var t,n;let o=e.payload;(null==(t=o.source)?void 0:t.title)||(d.innerText=(null==(n=o.e)?void 0:n.message)||"ERROR")})),r.on("videosourcechanged",(e=>{let t=e.payload;d.innerText=t.title||""})),$.render(c,t)})(e,i),Ft(e,i);const r=n.theme.controller||{},s=r.display,a=r.displayBehavior;"played"==s&&(Le(i,se),t.once("play",(()=>{Se(i,se)})));const l=()=>{var e;!t.isPlaying&&!q||Te(t.$root,le)||Te(t.$root,re)||Te(t.$root,ce)||t.$root.contains(document.activeElement)&&"INPUT"==(null==(e=document.activeElement)?void 0:e.tagName)||(Le(t.$root,le),t.$root.setAttribute(ae,"true"),t.emit("controlshidden",!1))},c=$e(l,2e3),d=c.callee,u=c.clear,h=()=>{u(),Te(t.$root,le)&&(Se(t.$root,le),t.$root.setAttribute(ae,"false"),t.emit("controlsshown",!0))};"none"!=a&&(t.on("play",d),t.on(["pause","videosourcechange"],h),t.on("destroy",u)),q||(t.$root.addEventListener("mousemove",(e=>{h(),i.contains(e.target)||d()})),"delay"==a&&t.$root.addEventListener("mouseleave",d),"hover"==a&&t.$root.addEventListener("mouseleave",l)),e.toggleController=function(){Te(i,se)?t.play():Te(t.$root,le)?h():l()},$.render(i,o)},Bt={opacity:0,"pointer-events":"none"},Rt=$.css(Object.assign({transition:"opacity 100ms linear",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",fill:"#fff",width:"3em",height:"3em","z-index":"7","& > button":{width:"100%",height:"100%","border-radius":"100%",background:"var(--primary-color)",opacity:.9,padding:"1em",transition:"transform .2s ease-in-out","&:active":{transform:"scale(.85)"},"& > *":{position:"relative",width:"1.5em",height:"1.5em",left:"-0.2em",top:"-0.25em"}},["@global ."+ne+" &"]:Bt,["@global ."+te+" &"]:Bt,["@global ."+ce+" &"]:Bt},q&&{["@global ."+le+" &"]:Bt})),Ht=(e,t)=>{const n=$.create("div."+Rt,{},'<button aria-label="Play" class="'+ue+'" type="button">\n      '+ve.get("play")+"\n    </button>");return $.render(n,t).addEventListener("click",(()=>e.play())),n},qt=$.css("\n  display: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  color: #fff;\n  background: #000;\n  z-index: 7;\n  align-items: center;\n  padding: 0 10px;\n  word-break: break-all;\n  justify-content: center;\n  text-align: center;\n"),It=$.css("display: flex;"),Dt={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},Nt=(e,t,n)=>{const o=$.render($.create("div."+qt,{"aria-label":"Error Overlay"}),t);function i(t){var n;let i="";if(t instanceof Event){const e=null==(n=t.target)?void 0:n.error;if(!e||!e.message&&"number"!=typeof e.code)return;i=e.message||Dt[e.code]}else i=t.message;o.innerText=i||"UNKNOWN_ERROR",e.$root.classList.add(ce),Le(o,It)}return e.on(["videosourcechange","videoqualitychange","loadedmetadata"],(function(){Se(o,It),e.$root.classList.remove(ce),o.innerText=""})),e.on("error",(e=>(e=>{n.errorBuilder?n.errorBuilder(e,o,(e=>i(e))):i(e)})(e.payload))),i},Vt=$.css({position:"absolute",top:"0",bottom:"0",left:"0",right:"0",display:"none","align-items":"center","justify-content":"center",["@global ."+te+" &"]:{display:"flex"}}),_t=$.css({position:"relative",overflow:"hidden",width:"20%",height:"4px","border-radius":"4px","&::before,&::after":{display:"block",content:"''",position:"absolute",height:"100%",width:"100%","background-color":"var(--primary-color)","border-radius":"4px"},"&::before":{opacity:"0.4"},"&::after":{animation:"indeterminate 1.3s infinite linear","transform-origin":"0% 50%"},"@keyframes indeterminate":{"0%":{transform:"translateX(0) scaleX(0)"},"10%":{transform:"translateX(0) scaleX(0.2)"},"40%":{transform:"translateX(0) scaleX(0.7)"},"60%":{transform:"translateX(60%) scaleX(0.4)"},"100%":{transform:"translateX(100%) scaleX(0.2)"}}}),Ut=(e,t)=>{const n=$.create("div."+Vt,{"aria-label":"Loading"},""+(ve.get("loadingIndicator")||'<div class="'+_t+'"></div>'));$.render(n,t)},Xt=$.css({width:"100%",height:"100%",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",["@global ."+re+" &"]:{"z-index":"8"}}),Wt=e=>{const t="true"==e.getAttribute("aria-checked");e.setAttribute("aria-checked",""+!t),((e,t)=>{var n=[],o=e.parentNode.children;for(let i=0,r=o.length;i<r;i++)o[i]!==e&&(null==t||t(o[i]),n.push(o[i]))})(e,(e=>e.setAttribute("aria-checked",""+t)))},Yt=$.css({position:"absolute",display:"none",top:"0.625em",left:"0.625em",right:"0.625em","z-index":9,"margin-top":"var(--control-bar-height)",transition:"margin 0.2s",["@global ."+le+" &"]:{"margin-top":0}}),Qt=$.css("\n  -moz-user-select: all;\n  -webkit-user-select: all;\n  -ms-user-select: all;\n  user-select: all;\n  color: #fff;\n  background-color: var(--shadow-background-color);\n  border-radius: 2px;\n  padding: 5px 10px;\n  font-size: 0.875em;\n"),Kt=$.css(i||(i=f(["\n  text-align: center;\n"]))),Jt=$.css(r||(r=f(["\n  text-align: right;\n"]))),Gt=$.css(s||(s=f(["\n  bottom: 6em;\n  top: initial;\n"]))),Zt={center:$.css(a||(a=f(["\n  top: 50%;\n  text-align: center;\n  transform: translateY(-50%);\n"]))),left:"","top-left":"",top:Kt,"top-center":Kt,"top-right":Jt,right:Jt,bottom:Gt,"left-bottom":Gt},en=$.css("display:block;");function tn(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))}const nn="Subtitle";class on{constructor(e,t,n,o){this.player=e,this.setting=t,this.el=n,this.isShow=!1,this.update=()=>{let e="";const t=this.$track.track.activeCues;if(null==t?void 0:t.length)for(let n=0;n<t.length;n++){const o=t[n];o&&(e+=o.text.replace(/\\h/g,"&nbsp;").split(/\r?\n/).map((e=>"<p><span>"+e+"</span></p>")).join(""))}this.$dom.innerHTML=e},window.TextDecoder?(this.options=Object.assign({source:[]},o),this.createContainer(),this.changeSource(this.options.source),this.player.on(["destroy","videosourcechange"],this.destroy.bind(this)),this.player.on("videoqualitychang",(()=>{this.isShow&&this.hide()})),this.player.on("videoqualitychanged",this.fetchSubtitle.bind(this))):e.emit("notice",{text:e.locales.get("TextDecoder not supported")})}changeSource(e){var t;null==(t=this.setting)||t.unregister(nn),this.processDefault(e),this.loadSetting(),this.currentSubtitle&&(this.player.isSourceChanging||isNaN(this.player.duration)||this.player.duration<1?this.player.once("loadedmetadata",this.fetchSubtitle.bind(this)):this.fetchSubtitle())}createContainer(){const e=this.el,t=this.options,n=t.color,o=t.shadow,i=t.fontSize,r=t.bottom,s=t.fontFamily,a=t.background,l=t.marginBottom;this.$dom=$.create("div."+$.css(Object.assign({left:"2%",right:"2%","text-align":"center","pointer-events":"none",position:"absolute","line-height":"1.5","font-family":s||"inherit",color:n||"#fff","text-shadow":o||"1px 0 1px #000, 0 1px 1px #000, -1px 0 1px #000, 0 -1px 1px #000, 1px 1px 1px #000, -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000",bottom:r||"2%","font-size":(i||(q?16:20))/16+"em","& > p":{margin:0,"& span":{"white-space":"pre-wrap",background:a?"rgba(8, 8, 8, 0.75)":"inherit",padding:"0 0.25em"}}},!q&&{"margin-bottom":l||"2.2em",transition:"margin 0.3s",["@global ."+le+" &"]:{"margin-bottom":0}})),{"aria-label":"Subtitle"}),$.render(this.$dom,e)}createTrack(){const e=this.player.$video;if(this.$track=$.render($.create("track",{default:!0,kind:"metadata",id:"primary"}),e),!this.player._requestFullscreen){const t=(this.$iosTrack=$.create("track",{default:!1,kind:"captions",id:"__Orz__"})).track;$.render(this.$iosTrack,e),t.mode="hidden",this.player.on("fullscreenchange",(e=>{e.payload.isWeb||setTimeout((()=>{const e=this.player.isFullScreen&&this.isShow;t.mode=e?"showing":"hidden"}))}))}}changeOffset(e){e&&[this.$track,this.$iosTrack].forEach((t=>{if(!t)return;const n=t.track.cues,o=this.player.duration;Array.from(n||[]).forEach((t=>{t.startTime=ke(t.startTime+e,0,o),t.endTime=ke(t.endTime+e,0,o)}))}))}processDefault(e){this.options.source=e,this.currentSubtitle=e.find((e=>e.default))}show(){this.isShow=!0,this.$track.addEventListener("cuechange",this.update)}hide(){const e=this.$track,t=this.$dom;this.isShow=!1,t.innerHTML="",e.removeEventListener("cuechange",this.update)}fetchSubtitle(){var e;if(!this.currentSubtitle)return;this.$track||this.createTrack();const t=this.currentSubtitle,n=this.player,o=this.$track,i=this.$iosTrack,r=this.options,s=t.src,a=t.encoding,l=t.type,c=void 0===l?"auto":l,d=t.offset;return Promise.resolve(null==(e=r.onChange)?void 0:e.call(r,t)).then((e=>null==e?fetch(s).then((e=>e.arrayBuffer())).then((e=>new TextDecoder(a).decode(e))):e)).then((e=>{var t,n;if(!e)throw new Error("Empty Subtitle");switch("auto"==c?null==(t=/srt|ass|vtt(#|\?|$)/i.exec(s))?void 0:t[0]:c){case"srt":return tn("WEBVTT \r\n\r\n".concat((n=e,n.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,((e,t,n)=>{let o=n.slice(0,3);return 1===n.length&&(o=n+"00"),2===n.length&&(o=n+"0"),t+","+o}))).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat("\r\n\r\n")));case"ass":return tn(function(e){const t=new RegExp("Dialogue:\\s\\d+,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}(.*)$","i");return"WEBVTT\r\n\r\n"+e.split(/\r?\n/).map((e=>{const n=e.match(t);return n&&n[1]&&n[2]&&n[5]?{start:n[1],end:n[2],text:(o=n[5].replace(/{[\s\S]*?}/g,"").replace(/\\N/g,"\r\n").replace(/\\n/g," ").replace(/\\h/g,"&nbsp;"),o.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[e]||e))))}:null;var o})).filter((e=>null!=e)).map(((e,t)=>t+1+"\r\n0"+e.start+"0 --\x3e 0"+e.end+"0\r\n"+e.text)).join("\r\n\r\n")}(e));case"vtt":return tn(e);default:return s}})).then((e=>{o.src&&URL.revokeObjectURL(o.src),(null==i?void 0:i.src)&&URL.revokeObjectURL(i.src),this.$track.addEventListener("load",(()=>{this.changeOffset(d),this.show()}),{once:!0}),o.src=e,i&&(i.src=e)})).catch((e=>{n.emit("notice",{text:"Subtitle"+e.message})}))}loadSetting(){if(!this.setting)return;const e=this.options.source;e.length&&this.setting.register({name:this.player.locales.get("Subtitle"),type:"selector",icon:ve.get("subtitle"),key:nn,onChange:e=>{var t;let n=e.value;n?n.src==(null==(t=this.currentSubtitle)?void 0:t.src)?this.show():(this.currentSubtitle=n,this.$dom.innerHTML="",this.fetchSubtitle()):this.hide()},children:[{name:this.player.locales.get("OFF"),default:!this.currentSubtitle}].concat(null==e?void 0:e.map((e=>{var t;return{name:e.name,default:(null==(t=this.currentSubtitle)?void 0:t.src)==e.src,value:e}})))})}destroy(){var e;const t=this.$dom,n=this.$track,o=this.$iosTrack;null==n||n.removeEventListener("cuechange",this.update),null==(e=this.setting)||e.unregister(nn),(null==n?void 0:n.src)&&URL.revokeObjectURL(n.src),(null==o?void 0:o.src)&&URL.revokeObjectURL(o.src),null==n||n.remove(),null==o||o.remove(),t.innerHTML="",this.isShow=!1,this.$track=this.$iosTrack=void 0}}const rn={theme:{primaryColor:"#6668ab",progress:{position:"top",mini:!0},controller:{setting:"auto",display:"always",coverButton:!0,displayBehavior:"hover"}},fullscreen:!0,autoFocus:!0,forceLandscapeOnFullscreen:!0,settings:["loop"],keyboard:{focused:!0},speeds:["2.0","1.5","1.25","1.0","0.75","0.5"]};class sn{constructor(e){var t;this.key="ui",this.version="1.3.4-beta.2",this.name="oplayer-theme-ui",this.keyboard={},this.setting={},this.menu={},this.progressHoverCallback=[],this.config=E({},rn,e),(null==(t=this.config.keyboard)?void 0:t.global)&&(this.config.keyboard.focused=!1)}apply(e){var t;const n=this.config;this.player=e;const o=this.$root=$.create("div."+(e=>{var t;return $.css(Object.assign({"--primary-color":""+e.theme.primaryColor,"--shadow-background-color":"rgba(28 ,28 ,28 , .9)","--control-bar-height":(null==(t=e.theme.controller)?void 0:t.display)?"2.5em":0,position:"absolute",top:"0",left:"0",width:"100%",height:"100%","line-height":1,"font-size":q?"16px":"18px","&, & > *":{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"},"& [hidden]":{display:"none"}},{["@global ."+de+" &"]:{"font-size":q?"18px":"22px"},["@global ."+ie+" &"]:{"font-size":q?"18px":"22px"}}))})(n));return((e,t)=>{const n=t.theme.watermark;if(!n)return;const o=e.$watermark=document.createElement("img");o.setAttribute("alt","watermark");for(const i in n.style)o.style[i]=n.style[i];for(const i in n.attrs)o.setAttribute(i,n.attrs[i]);o.src=n.src,e.$root.appendChild(o)})(this,n),e.isNativeUI?(be(e),Ht(e,o),Ut(0,o),void $.render(o,e.$root)):(this.icons=ve.setupIcons(n.icons),ye(e,n),Ae(this),Nt(e,o,n),(e=>{const t=e.player,n=e.$root,o=$.create("div."+Yt,{"aria-label":"Notice"},'<span class="'+Qt+'"></span>'),i=o.querySelector("."+Qt),r=$e((()=>Se(o,en)),2e3).callee;function s(e,t){i.innerHTML=e,o.className=Yt+" "+en+" "+Zt[t||"left"],r()}t.on("notice",(e=>{let t=e.payload;return s(t.text,t.pos)})),e.notice=s,$.render(o,n)})(this),Ut(0,o),(null==(t=n.theme.controller)?void 0:t.coverButton)&&(this.$coverButton=Ht(e,o)),jt(this),(e=>{const t=e.player,n=e.$root,o=e.$mask=$.create("div."+Xt);let i,r=0;o.addEventListener("click",(()=>{Te(t.$root,re)||(q?e.toggleController():(0==r&&t.togglePlay(),i&&clearTimeout(i),i=window.setTimeout((()=>{2==r&&(t.togglePlay(),t.toggleFullScreen()),r=0}),200)),r+=1)})),$.render(o,n)})(this),lt(this),(e=>{var t;const n=e.config.menu,o=[],i=null==(t=e.$controllerBar)?void 0:t.lastElementChild,r=e.$controllerBottom.lastElementChild,s=[i,r].filter(Boolean);function a(t){var n,i;const r=t.target,s=r.getAttribute("aria-label"),a=o.find((e=>e.name==s));a&&"true"!=r.getAttribute("aria-checked")&&("SPAN"==r.tagName.toUpperCase()?(Wt(r),null==(n=a.onChange)||n.call(a,a.children[+r.getAttribute("data-index")],r.parentElement.previousElementSibling,e.player)):"BUTTON"==r.tagName.toUpperCase()&&(null==(i=a.onClick)||i.call(a,r,e.player)))}function l(e){const t=o.find((t=>t.name==e.name));t&&c(t.name);const n=e.name,a=e.icon,l=e.children,d="top"==e.position&&2==s.length;let u="";const h='\n    <button\n      aria-label="'+n+'"\n      '+(d?'data-tooltip-pos="down"':"")+'\n      class="'+ue+" "+(a?"":Ie)+" "+(e.children?"":ge)+'"\n      type="button"\n    >'+(a||n)+"</button>";u=e.children?'\n      <div class="'+Re+" "+He+'" data-dropdown-pos="'+e.position+'" aria-label="'+n+'">\n        '+h+"\n        <div class='"+je+" "+(d?Be:"")+"' role='menu'>\n          "+l.map(((e,t)=>'<span\n                  role="menuitemradio"\n                  aria-haspopup="false"\n                  aria-label="'+n+'"\n                  class="'+qe+'"\n                  aria-checked="'+Boolean(e.default)+'"\n                  data-index="'+t+'"\n                >'+e.name+"</span>")).join("")+"\n          </div>\n      </div>":h,d?i.insertAdjacentHTML("afterbegin",u):r.insertAdjacentHTML("afterbegin",u),o.push(e)}function c(e){s.forEach((t=>{var n,o;null==(n=t.querySelector("button[aria-label='"+e+"']"))||n.remove(),null==(o=t.querySelector("div[aria-label='"+e+"]'"))||o.remove()}))}s.forEach((e=>{e.addEventListener("click",a)})),n&&n.forEach(l),e.menu={register:function(e){(Array.isArray(e)?e:[e]).forEach(l)},unregister:c,select:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];s.forEach((o=>{const i=o.querySelector("."+je+" > span[aria-label='"+e+"']:nth-child("+(t+1)+")");i&&(Wt(i),n&&i.click())}))}}})(this),function(e){const t=e.player,n=e.$root,o=e.config.subtitle,i=e.setting;e.subtitle=new on(t,i,n,o)}(this),function(e){const t=e.player,n=e.config.speeds,o=e.setting;(null==n?void 0:n.length)&&o&&(o.register({key:Oe,type:"selector",name:t.locales.get("Speed"),icon:ve.get("playbackRate"),children:n.map((e=>({name:1==+e?t.locales.get("Normal"):e+"x",value:+e,default:t.playbackRate==+e}))),onChange:e=>{let n=e.value;return t.setPlaybackRate(n)}}),t.on("ratechange",(()=>{const e=t.playbackRate,i=n.findIndex((t=>+t==e));-1==i?o.updateLabel(Oe,e+"x"):o.select(Oe,i,!1)})))}(this),Ce(this),function(e,t){t.forceLandscapeOnFullscreen&&!H&&q&&e.on("fullscreenchange",(t=>{var n,o,i,r;!t.payload.isWeb&&e._requestFullscreen&&(e.isFullScreen?null==(o=null==(n=globalThis.screen.orientation)?void 0:n.lock)||o.call(n,"landscape"):null==(r=null==(i=globalThis.screen.orientation)?void 0:i.unlock)||r.call(i))}))}(e,n),$.render(o,e.$root),this)}destroy(){}}return globalThis.window&&(globalThis.window.OUI=function(e){return new sn(e)}),Object.assign(Z,ee),Z}));
+!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).OPlayer=t()}(this,(function(){"use strict";var e,t,n,o,i,r,s,a,l,c,d,u,h,p,g,m,v;function f(e,t){return t||(t=e.slice(0)),e.raw=t,e}function b(e){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=1540483477,o=24,i=t^e.length,r=e.length,s=0;for(;r>=4;){let t=y(e,s);t=x(t,n),t^=t>>>o,t=x(t,n),i=x(i,n),i^=t,s+=4,r-=4}switch(r){case 3:i^=k(e,s),i^=e.charCodeAt(s+2)<<16,i=x(i,n);break;case 2:i^=k(e,s),i=x(i,n);break;case 1:i^=e.charCodeAt(s),i=x(i,n)}return i^=i>>>13,i=x(i,n),i^=i>>>15,i>>>0}(e).toString(36)}function y(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function k(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function x(e,t){return(65535&(e|=0))*(t|=0)+(((e>>>16)*t&65535)<<16)|0}function w(e){return Boolean(e&&"object"==typeof e&&!Array.isArray(e))}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];if(!n.length)return e;const i=n.shift();if(w(e)&&w(i))for(const r in i)w(i[r])?(e[r]||Object.assign(e,{[r]:{}}),E(e[r],i[r])):Object.assign(e,{[r]:i[r]});return E.apply(void 0,[e].concat(n))}var $,L=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g;function S(e){if(-1===e.indexOf(","))return[e];for(var t,n=[],o=[],i=0;t=L.exec(e);)switch(t[0]){case"(":i++;break;case")":i--;break;case",":if(i)break;n.push(t.index)}for(t=n.length;t--;)o.unshift(e.slice(n[t]+1)),e=e.slice(0,n[t]);return o.unshift(e),o}function T(e,t){let n=S(e);return S(t).map((e=>e.indexOf("&")>=0?e:"&"+e)).reduce(((e,t)=>e.concat(n.map((e=>t.replace(/\&/g,e))))),[]).join(",")}function P(e){return 0===e.indexOf("@media")}function z(e){return 0===e.indexOf("@keyframes")}function A(e,t){var n;let o=t.rules,i=t.mediaQuery,r=t.globalSelector,s={};return r&&(e=r),null==(n=Object.keys(o))||n.forEach((t=>{if(function(e){return 0===e.indexOf("@global")}(t)){const n=t,a=(t=t.substring(8)).indexOf("&");let l;-1!=a?(l=T(e,t),r=t.substring(0,a-1).trim()):l=t,E(s,A(l,{mediaQuery:i,rules:o[n],globalSelector:l}))}else if(function(e){let t=[":",".","[",">"," "],n=!1,o=e.charAt(0);for(let i=0;i<t.length;i++)if(o===t[i]){n=!0;break}return n||e.indexOf("&")>=0}(t))E(s,A(T(e,t),{rules:o[t],mediaQuery:i}));else if(P(t))E(s,A(e,{mediaQuery:(h=i,p=t,h?"@media "+h.substring(6)+" and "+p.substring(6):p),rules:o[t]}));else{var n,a,l,c,d,u;if(i)null!==(n=s[i])&&void 0!==n||(s[i]={}),null!==(c=(a=s[i])[l=e])&&void 0!==c||(a[l]={}),s[i][e][t]=o[t];else if(z(t))s[t]=o[t];else null!==(u=s[d=e])&&void 0!==u||(s[d]={}),s[e][t]=o[t]}var h,p})),s}function O(e){let t=[];for(const n in e)if(Object.hasOwnProperty.call(e,n)){const o=e[n];w(o)?t.push(n+"{"+O(o)+"}"):t.push(n+":"+o)}return/^\d%/.test(t[0])?t.join(" "):t.join(";")}function C(e){let t=[];for(const n in e)if(Object.hasOwnProperty.call(e,n)){const o=e[n];if(P(n))t.push(n+"{"+C(o)+"}");else if(z(n))t.push(n+"{"+O(o)+"}");else{const e=Object.entries(o).map((e=>e[0]+":"+e[1])).join(";");t.push(n+"{"+e+"}")}}return t}function M(e,t){return C(A(t,{rules:e}))}(e=>{function t(t){if(!(0,e.isBrowser)())return null;let n=document.createElement("style");n.setAttribute("data-"+t,""),n.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(n);for(let e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets.item(e);return null}e.create=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const o=-1!==e.indexOf("#"),i=-1!==e.indexOf("."),r=o?e.split("#"):i?e.split("."):[e],s=r[0],a=r[1],l=document.createElement(s);return o&&(l.id=a),i&&l.classList.add(a),n&&(l.innerHTML=n),Object.keys(t).forEach((e=>{const n=t[e];"video"!==s&&"audio"!==s||"boolean"!=typeof n?void 0!==n&&l.setAttribute(e,""+n):n&&l.setAttribute(e,"")})),l},e.render=(e,t)=>t.appendChild(e),e.isBrowser=()=>Boolean("undefined"!=typeof globalThis&&globalThis.document&&globalThis.document.documentElement),e.createSheet=t;const n=(()=>{const e=Object.create({});return t=>{const n="object"==typeof t?JSON.stringify(t):t;return e[n]||(e[n]="css-"+b(n)),e[n]}})();e.createCss=e=>{let t=e.sheet,o=e.ssrData;return function(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];const a=Boolean(r[0]&&r[0].length&&r[0].raw);let l="";if(a){let e=r[0];l+=e[0];for(let t=1;t<r.length;t++)l+="string"!=typeof r[t]?"":r[t],l+=e[t]}else l="string"==typeof r[0]?r[0]:JSON.stringify(r[0]);const c=n(l);if(t)for(let n=0;n<t.cssRules.length;n++)if((null==(e=t.cssRules[n])?void 0:e.selectorText)=="."+c)return c;let d=["."+c+"{"+l+"}"];return a||"object"!=typeof r[0]||(d=M(r[0],"."+c)),t?d.forEach((e=>{t.insertRule(e,t.cssRules.length)})):o=o.concat(d),c}},e.createStyled=()=>{const n=[],o=t("oplayer");return{css:(0,e.createCss)({sheet:o,ssrData:n}),getCssValue:()=>n}};var o=(0,e.createStyled)();e.css=o.css,e.getCssValue=o.getCssValue,e.cls=e=>"css-"+b(e)})($||($={}));const F=$,j=/(iPad)/gi.test(null==(l=globalThis.navigator)?void 0:l.userAgent)||/Macintosh/i.test(null==(c=globalThis.navigator)?void 0:c.userAgent)&&Boolean(null==(d=globalThis.navigator)?void 0:d.maxTouchPoints)&&(null==(u=globalThis.navigator)?void 0:u.maxTouchPoints)>=1,B=/iPhone/gi.test(null==(h=globalThis.navigator)?void 0:h.userAgent),R=/^((?!chrome|android).)*safari/i.test(null==(p=globalThis.navigator)?void 0:p.userAgent),H=B||j,q=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(null==(g=globalThis.navigator)?void 0:g.userAgent)||H,I=/mqqbrowser/i.test(null==(m=globalThis.navigator)?void 0:m.userAgent)&&!/ qq/i.test(null==(v=globalThis.navigator)?void 0:v.userAgent),D=(e,t,n)=>{var o;const i=document.createElement("script");i.src=e,i.onload=t,i.onerror=n;const r=document.getElementsByTagName("script")[0];null==(o=null==r?void 0:r.parentNode)||o.insertBefore(i,r)},N={},V=e=>void 0===e,_=["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","encrypted","waitingforkey","enterpictureinpicture","leavepictureinpicture"],U=["contextmenu"];class X{constructor(){this.events=Object.create(null)}on(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)}onAny(e,t){e.forEach((e=>this.on(e,t)))}once(e,t){const n=n=>{t({type:e,payload:n.payload})};n.raw=t,this.on(e,n)}off(e,t){if(this.events[e])for(let n=0;n<this.events[e].length;n++){const o=this.events[e][n];o!=t&&t!=o.raw||this.events[e].splice(n,1)}}offAny(e){this.events[e]=[]}offAll(){this.events=Object.create(null)}emit(e,t){var n,o;const i=[];null==(n=this.events[e])||n.forEach((n=>{n({type:e,payload:t}),n.raw&&i.push(n)})),null==(o=this.events["*"])||o.forEach((n=>{n({type:e,payload:t}),n.raw&&i.push(n)})),i.forEach((t=>{this.off(e,t)}))}}const W={Play:"播放",Pause:"暂停",Loop:"循环播放",Volume:"音量","Volume: %s":"音量：%s",Mute:"静音",Speed:"播放速度",LIVE:"直播",Language:"语言",Screenshot:"截图",Subtitle:"字幕",Quality:"画质",Fullscreen:"全屏",Settings:"设置","Picture in Picture":"画中画",Danmaku:"弹幕",Display:"显示",Opacity:"透明度",FontSize:"字体大小","Display Area":"显示区域",Off:"关闭",Auto:"自动",Default:"默认",Normal:"正常","%ss":"%s秒",Close:"关闭","Can be closed after %ss":"%s秒后可关闭广告"},Y={Play:"پخش",Next:"بعدی",Previous:"قبلی",Pause:"توقف",Loop:"تکرار",Volume:"حجم صدا","Volume: %s":"حجم صدا: %s",Mute:"بی‌صدا کردن",Speed:"سرعت",LIVE:"زنده",WebFullscreen:"تمام صفحه وب",Chromecast:"کروم کاست",AirPlay:"ایر پلی",Playlist:"پلی‌لیست",Heatmap:"نقشهٔ حرارتی",Language:"زبان",Screenshot:"عکس صفحه",Subtitle:"زیرنویس",Quality:"کیفیت",Fullscreen:"تمام صفحه",Settings:"تنظیمات","Picture in Picture":"تصویر در تصویر",Danmaku:"دانماکو",Display:"نمایش",Opacity:"شفافیت",FontSize:"اندازه فونت","Display Area":"ناحیه نمایش",Off:"خاموش",Auto:"خودکار",Default:"پیش‌فرض",Normal:"عادی","%ss":"%s ثانیه",Close:"بستن","Can be closed after %ss":"قابل بستن پس از %s ثانیه"},Q={Play:"پلې‌کول",Next:"بل",Previous:"مخکېنی",Pause:"تم کول",Loop:"تکرار",Volume:"غږ","Volume: %s":"غږ: %s",Mute:"غلی کول",Speed:"چټکتیا",LIVE:"ژوندی",WebFullscreen:"د تمام صفحه وب",Chromecast:"کروم کاسټ",AirPlay:"ایر پلی",Playlist:"پلې‌لسټ",Heatmap:"د ډېرو کتلو نقشه",Language:"ژبه",Screenshot:"سکرین شاټ",Subtitle:"لاندې لیک",Quality:"کیفیت",Fullscreen:"پوره پرده","":"د متن ډیکوډر ملاتړ نه لري",Settings:"ترتیبات","Picture in Picture":"انځور په انځور",Danmaku:"دانماکو",Display:"ښکاره کول",Opacity:"روڼوالی",FontSize:"د خط اندازه","Display Area":"د ښودلو ساحه",Off:"بند",Auto:"خودکار",Default:"پېل شوی",Normal:"عادي","%ss":"%s ثانیه",Close:"بندول","Can be closed after %ss":"د %s ثانیو وروسته تړل کېدای شي"};class K{constructor(e){this.languages={zh:W,"zh-CN":W,fa:Y,pa:Q,en:Object.keys(W).reduce(((e,t)=>(e[t]=t,e)),{})},this.lang="auto"===e?navigator.language:e,this.languages[this.lang]||navigator.languages.some((e=>{if(this.languages[e])return this.lang=e,!0;if(-1!==e.indexOf("-")){const t=e.split("-")[0];if(t&&this.languages[t])return this.lang=t,!0}return!1})),this.languages[this.lang]||(this.lang="en")}get(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];const i=this.languages[this.lang][e];if(null==i)return e;let r=0;return i.replace(/%s/gi,(()=>{var e;return null!==(e=n[r++])&&void 0!==e?e:""}))}update(e){E(this.languages,e)}}const J={autoplay:!1,muted:!1,loop:!1,volume:1,preload:"metadata",playbackRate:1,playsinline:!0,lang:"auto",source:{},videoAttr:{},isLive:!1,autopause:!0,isNativeUI:()=>I},G=class e{constructor(e,t){if(this.plugins=[],this.context={},this.listeners=Object.create(null),this.hasError=!1,this.isSourceChanging=!1,this.container="string"==typeof e?document.querySelector(e):e,!this.container)throw new Error(("string"==typeof e?e:"Element")+"does not exist");this.options=Object.assign({},J,"string"==typeof t?{source:{src:t}}:t),this.locales=new K(this.options.lang),this.eventEmitter=new X}static make(t,n){return new e(t,n)}use(e){return e.forEach((e=>{this.plugins.push(e)})),this}create(){return this.render(),this.initEvent(),this.plugins.forEach((e=>this.applyPlugin(e,!0))),this.options.source.src&&this.load(this.options.source),e.players.push(this),this}initEvent(){this.listeners.error=e=>{this.$video.error&&(this.hasError=!0,this.eventEmitter.emit("error",e))},this.$video.addEventListener("error",(e=>this.listeners.error(e)));const e=(e,t)=>{this.eventEmitter.emit(e,t)};[[this.$video,["fullscreenchange","webkitbeginfullscreen","webkitendfullscreen"],["fullscreenerror","webkitfullscreenerror","mozfullscreenerror"]],[this.$root,["fullscreenchange","webkitfullscreenchange"],["fullscreenerror","webkitfullscreenerror","mozfullscreenerror"]]].forEach((t=>{const n=t[0];t.slice(1).forEach((t=>{const o=t[0];this.listeners[o]=e,t.forEach((e=>{n.addEventListener(e,(e=>{this.listeners[o](o,e)}),{passive:!0})}))}))})),[[this.$video,_],[this.$root,U]].forEach((t=>{let n=t[0];t[1].forEach((t=>{this.listeners[t]||(this.listeners[t]=e,n.addEventListener(t,(e=>{var n;null==(n=this.listeners)||n[t](t,e)}),{passive:!0}))}))}))}render(){this.$video=F.create("video."+F.css("\n        width: 100%;\n        height: 100%;\n        display: block;\n        position: relative;\n      "),Object.assign({autoplay:this.options.autoplay,loop:this.options.loop,playsinline:this.options.playsinline,"webkit-playsinline":this.options.playsinline,"x5-playsinline":this.options.playsinline,preload:this.options.preload,poster:this.options.source.poster},this.options.videoAttr));const e=this.options,t=e.muted,n=e.volume,o=e.playbackRate;t&&this.mute(),this.$video.volume=n,setTimeout((()=>{this.$root&&this.setPlaybackRate(o)})),this.$root=F.create("div."+F.css("\n        position: relative;\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n        background-color: #000;\n      ")),F.render(this.$video,this.$root),F.render(this.$root,this.container)}async load(e){var t;await(null==(t=this.loader)?void 0:t.destroy()),this.loader=void 0;for(const n of this.plugins)if(n.load){const t=await n.load(this,e);if(0!=t&&!this.loader){this.loader=t,this.emit("loaderchange",t);break}}return this.loader||(this.$video.src=e.src),e}applyPlugin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e.name,o=e.key;if(this.context[e.key||e.name])throw new Error("duplicate plugin");t||this.plugins.push(e);const i=e.apply(this);i&&(this.context[o||n]=i)}on(e,t){return"string"==typeof e?this.eventEmitter.on(e,t):Array.isArray(e)?this.eventEmitter.onAny(e,t):"function"==typeof e&&this.eventEmitter.on("*",e),this}once(e,t){this.eventEmitter.once(e,t)}off(e,t){this.eventEmitter.off(e,t)}emit(e,t){this.eventEmitter.emit(e,t)}setPoster(e){this.$video.poster=e}play(){if((this.$video.src||this.$video.currentSrc)&&!this.isSourceChanging){if(this.options.autopause)for(let t=0;t<e.players.length;t++){const n=e.players[t];n!=this&&n.pause()}return this.$video.play()}}pause(){return this.$video.pause()}togglePlay(){return this.isPlaying?this.pause():this.play()}mute(){this.$video.muted=!0}unmute(){this.$video.muted=!1}toggleMute(){this.isMuted?this.unmute():this.mute()}setVolume(e){this.$video.volume=e>1?1:e<0?0:e,this.$video.volume>0&&this.isMuted&&this.unmute()}setPlaybackRate(e){this.$video.playbackRate=e}seek(e){this.$video.currentTime=e}setLoop(e){this.$video.loop=e}async enterFullscreen(){this.isInPip&&await this.exitPip(),this._requestFullscreen?this._requestFullscreen.call(this.$root,{navigationUI:"hide"}):this.$video.webkitEnterFullscreen()}exitFullscreen(){return this._exitFullscreen.call(document)}get isFullscreenEnabled(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||this.$video.webkitEnterFullscreen}get isFullScreen(){return Boolean((document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)===this.$root||this.$video.webkitDisplayingFullscreen)}toggleFullScreen(){return this.isFullScreen?this.exitFullscreen():this.enterFullscreen()}get isPipEnabled(){return document.pictureInPictureEnabled}enterPip(){return this.$video.requestPictureInPicture()}exitPip(){return!!this.isInPip&&document.exitPictureInPicture()}get isInPip(){return document.pictureInPictureElement==this.$video}togglePip(){return this.isInPip?this.exitPip():this.enterPip()}changeQuality(e){return this._loader(e,{keepPlaying:!0,keepTime:!0,preEvent:"videoqualitychange",event:"videoqualitychanged",brokenEvent:"qualitychangeerror"})}changeSource(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._loader(e,{keepPlaying:t,preEvent:"videosourcechange",event:"videosourcechanged",brokenEvent:"sourcechangeerror"})}_loader(e,t){return new Promise(((n,o)=>{if(this.isSourceChanging)return o(Error("Previous Source is Changing."));const i=this.isPlaying,r=this.currentTime,s=this.volume,a=this.playbackRate;this.pause(),this.hasError=!1,this.isSourceChanging=!0,this.emit(t.preEvent,e);const l=t.keepPlaying,c=t.keepTime,d="none"==this.options.preload,u=d?"loadstart":"loadedmetadata",h=l&&i;let p;const g=n=>{this.$root&&(this.off(u,v),this.emit(t.brokenEvent,{source:p||e,error:n}),"videosourcechanged"==t.event?this.isSourceChanging=!1:this.load(this.options.source).then(m).finally((()=>{this.isSourceChanging=!1})),o(n))},m=()=>{s!=this.volume&&this.setVolume(s),a!=this.playbackRate&&this.setPlaybackRate(a),d&&c&&this.$video.load(),c&&!this.options.isLive&&this.seek(r),h&&!this.isPlaying&&this.$video.play(),Object.assign(this.options.source,p)},v=()=>{this.$root&&(this.off("error",g),m(),this.isSourceChanging=!1,this.emit(t.event,p),n())};return(e instanceof Promise?e:Promise.resolve(e)).then((e=>{if(!e.src)throw new Error("Empty Source");return p=e,this.$video.poster=e.poster||"",this.once("error",g),this.once(u,v),e})).then((e=>this.load(e))).catch(g)}))}destroy(){e.players.splice(e.players.indexOf(this),1);const t=this.eventEmitter,n=this.loader,o=this.plugins,i=this.container,r=this.$root,s=this.$video,a=this.isPlaying,l=this.isFullScreen,c=this.isInPip;t.emit("destroy"),t.offAll(),null==n||n.destroy(),o.forEach((e=>{var t;return!e.load&&(null==(t=e.destroy)?void 0:t.call(e))})),a&&this.pause(),l&&this.exitFullscreen(),c&&this.exitPip(),s.src&&URL.revokeObjectURL(s.src),i.removeChild(r),this.eventEmitter=this.locales=this.options=this.listeners=this.context=this.plugins=this.container=this.$root=this.$video=this.loader=void 0}get isNativeUI(){return this.options.isNativeUI()}get state(){return this.$video.readyState}get isPlaying(){return!this.$video.paused}get isMuted(){return this.$video.muted}get isEnded(){return this.$video.ended}get isLoop(){return this.$video.loop}get isAutoPlay(){return this.$video.autoplay}get duration(){return this.$video.duration}get buffered(){return this.$video.buffered}get currentTime(){return this.$video.currentTime}get volume(){return this.$video.volume}get playbackRate(){return this.$video.playbackRate}get _requestFullscreen(){return HTMLElement.prototype.requestFullscreen||HTMLElement.prototype.webkitRequestFullscreen||HTMLElement.prototype.mozRequestFullScreen||HTMLElement.prototype.msRequestFullscreen}get _exitFullscreen(){return Document.prototype.exitFullscreen||Document.prototype.webkitExitFullscreen||Document.prototype.cancelFullScreen||Document.prototype.mozCancelFullScreen||Document.prototype.msExitFullscreen}static get version(){return"1.2.38-beta.2"}};G.players=[];let Z=G;const ee=Object.freeze(Object.defineProperty({__proto__:null,get $(){return $},Player:Z,default:Z,isIOS:H,isMobile:q,isObject:w,isPlainObject:function(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},isQQBrowser:I,isSafari:R,isUndefined:V,isiPad:j,isiPhone:B,loadSDK:function(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:D;const r=e=>V(window[e])?window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:void 0:window[e],s=r(t);return s&&o(s)?Promise.resolve(s):new Promise(((o,s)=>{if(!V(N[e]))return void N[e].push({resolve:o,reject:s});N[e]=[{resolve:o,reject:s}];const a=t=>{var n;null==(n=N[e])||n.forEach((e=>e.resolve(t)))};if(!V(n)){const e=window[n];window[n]=function(){V(e)||e.apply(void 0,arguments),a(r(t))}}i(e,(()=>{V(n)&&a(r(t))}),(t=>{var n;null==(n=N[e])||n.forEach((e=>{e.reject(t)})),delete N[e]}))}))},loadScript:D,mergeDeep:E},Symbol.toStringTag,{value:"Module"})),te=$.cls("loading"),ne=$.cls("playing"),oe=$.cls("focused"),ie=$.cls("fullscreen"),re=$.cls("settingShown"),se=$.css("display:none"),ae="data-ctrl-hidden",le=$.css({["."+ne]:{cursor:"none"}}),ce=$.cls("error"),de=$.css(e||(e=f(["\n  z-index: 99 !important;\n  position: fixed !important;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;"]))),ue=$.css({background:"none",border:"none",cursor:"pointer",padding:0,outline:"none",font:"inherit",color:"inherit",fill:"#fff","line-height":"inherit","text-align":"inherit",width:"100%","-webkit-tap-highlight-color":"transparent","user-select":"none"}),he=$.css({"& > *:nth-child(1)":{display:"none"}}),pe=$.css({"& > *:nth-child(2)":{display:"none"}}),ge=q?"":$.css({position:"relative","&:hover":{"&::after":{opacity:1,transform:"translateX(-50%) scale(1)"},"&:not([data-tooltip-pos]):last-child::after":{right:0,left:"auto",transform:"translateY(0) scale(1)"},"&[data-tooltip-pos=down]::after":{transform:"translateX(-50%) scale(1)"},"&[data-tooltip-pos=down]:last-child::after":{right:0,transform:"translateY(0) scale(1)"}},"&::after":{position:"absolute",content:"attr(aria-label)",bottom:"100%",left:"50%","margin-bottom":"0.5em","white-space":"nowrap",background:"var(--shadow-background-color)",transform:"translate(-50%, 10px) scale(.8)","transform-origin":"50% 100%",opacity:0,padding:"6px 8px","border-radius":"2px",transition:"transform .2s ease .1s,opacity .2s ease .1s","pointer-events":"none","font-size":"0.75em"},"&[data-tooltip-pos=down]::after":{top:"100%",bottom:"auto","margin-top":"0.5em",transform:"translate(-50%, -10px) scale(.8)"},"&[data-tooltip-pos=down]:last-child::after":{right:0,top:"100%",bottom:"unset",left:"auto","margin-top":"0.5em",transform:"translateY(-10px) scale(.8)","transform-origin":"100% 0"},"&:not([data-tooltip-pos]):last-child::after":{right:0,left:"auto",transform:"translateY(10px) scale(.8)","transform-origin":"100% 100%"}}),me={play:'<svg viewBox="0 0 1024 1024"><path  d="M245.76 785.203V238.797c0-50.442 34.918-69.182 77.967-42.046l422.196 266.117c43.11 27.157 43.069 71.128 0 98.284L323.727 827.249c-43.11 27.177-77.967 8.315-77.967-42.046z" /></svg>',pause:'<svg viewBox="0 0 1024 1024"><path  d="M327.68 184.32a81.92 81.92 0 0 1 81.92 81.92v491.52a81.92 81.92 0 1 1-163.84 0V266.24a81.92 81.92 0 0 1 81.92-81.92z m368.64 0a81.92 81.92 0 0 1 81.92 81.92v491.52a81.92 81.92 0 1 1-163.84 0V266.24a81.92 81.92 0 0 1 81.92-81.92z" /></svg>',volume:['<svg viewBox="0 0 1024 1024"><path d="M128 426.666667v170.666666c0 23.466667 19.2 42.666667 42.666667 42.666667h128l140.373333 140.373333c26.88 26.88 72.96 7.68 72.96-30.293333V273.493333c0-37.973333-46.08-57.173333-72.96-30.293333L298.666667 384H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667z m576 85.333333A192 192 0 0 0 597.333333 340.053333v343.466667c63.146667-31.146667 106.666667-96 106.666667-171.52zM597.333333 189.866667v8.533333c0 16.213333 10.666667 30.293333 25.6 36.266667C733.013333 278.613333 810.666667 386.56 810.666667 512s-77.653333 233.386667-187.733334 277.333333c-15.36 5.973333-25.6 20.053333-25.6 36.266667v8.533333c0 26.88 26.88 45.653333 51.626667 36.266667C793.6 815.36 896 675.84 896 512s-102.4-303.36-247.04-358.4c-24.746667-9.813333-51.626667 9.386667-51.626667 36.266667z"></path></svg>','<svg viewBox="0 0 1024 1024"><path d="M154.88 154.88a42.496 42.496 0 0 0 0 60.16L311.04 371.2 298.666667 384H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667v170.666666c0 23.466667 19.2 42.666667 42.666667 42.666667h128l140.373333 140.373333c26.88 26.88 72.96 7.68 72.96-30.293333v-177.92l178.346667 178.346667c-20.906667 15.786667-43.52 29.013333-68.266667 38.826666-15.36 6.4-24.746667 22.613333-24.746667 39.253334 0 30.72 31.146667 50.346667 59.306667 38.826666 34.133333-14.08 66.133333-32.853333 94.72-55.893333l57.173333 57.173333a42.496 42.496 0 1 0 60.16-60.16L215.466667 154.88c-16.64-16.64-43.52-16.64-60.586667 0zM810.666667 512c0 34.986667-6.4 68.693333-17.493334 99.84l65.28 65.28c23.893333-49.92 37.546667-105.813333 37.546667-165.12 0-163.413333-102.4-303.36-246.613333-358.4-25.173333-9.813333-52.053333 9.813333-52.053334 36.693333v8.106667c0 16.213333 10.666667 30.293333 26.026667 36.266667C733.013333 279.04 810.666667 386.56 810.666667 512z m-371.626667-268.373333l-7.253333 7.253333L512 331.093333V273.493333c0-37.973333-46.08-56.746667-72.96-29.866666zM704 512A192 192 0 0 0 597.333333 340.053333v76.373334l105.813334 105.813333c0.426667-3.413333 0.853333-6.826667 0.853333-10.24z"></path></svg>'],fullscreen:['<svg viewBox="-113 -113 1250 1250"><path d="M0 232.732444A232.732444 232.732444 0 0 1 232.732444 0h558.535112A232.732444 232.732444 0 0 1 1024 232.732444v558.535112A232.732444 232.732444 0 0 1 791.267556 1024H232.732444A232.732444 232.732444 0 0 1 0 791.267556V232.732444z m232.732444-139.662222a139.662222 139.662222 0 0 0-139.662222 139.662222v558.535112a139.662222 139.662222 0 0 0 139.662222 139.662222h558.535112a139.662222 139.662222 0 0 0 139.662222-139.662222V232.732444a139.662222 139.662222 0 0 0-139.662222-139.662222H232.732444z"></path><path d="M549.575111 245.845333c0-25.799111 20.935111-46.734222 46.734222-46.734222h116.821334A140.202667 140.202667 0 0 1 853.333333 339.313778v116.821333a46.734222 46.734222 0 0 1-93.468444 0v-116.821333c0-25.827556-20.906667-46.734222-46.734222-46.734222h-116.821334a46.734222 46.734222 0 0 1-46.734222-46.734223zM245.845333 549.546667c25.799111 0 46.734222 20.935111 46.734223 46.734222v116.821333c0 25.827556 20.906667 46.734222 46.734222 46.734222h116.821333a46.734222 46.734222 0 0 1 0 93.468445h-116.821333A140.202667 140.202667 0 0 1 199.111111 713.130667v-116.821334c0-25.799111 20.935111-46.734222 46.734222-46.734222z"></path></svg>','<svg viewBox="-113 -113 1250 1250"><path d="M0.739556 233.130667a232.391111 232.391111 0 0 1 232.391111-232.391111h557.738666a232.391111 232.391111 0 0 1 232.391111 232.391111v557.738666a232.391111 232.391111 0 0 1-232.391111 232.391111H233.130667a232.391111 232.391111 0 0 1-232.391111-232.391111V233.130667z m232.391111-139.434667a139.434667 139.434667 0 0 0-139.434667 139.434667v557.738666a139.434667 139.434667 0 0 0 139.434667 139.434667h557.738666a139.434667 139.434667 0 0 0 139.434667-139.434667V233.130667a139.434667 139.434667 0 0 0-139.434667-139.434667H233.130667z"></path><path d="M601.088 186.652444c25.685333 0 46.506667 20.792889 46.506667 46.478223v96.796444c0 25.685333 20.792889 46.478222 46.478222 46.478222h96.796444a46.478222 46.478222 0 1 1 0 92.984889h-96.796444a139.434667 139.434667 0 0 1-139.463111-139.463111V233.130667c0-25.685333 20.821333-46.478222 46.478222-46.478223z m-414.435556 414.435556c0-25.656889 20.792889-46.478222 46.478223-46.478222h96.796444a139.434667 139.434667 0 0 1 139.463111 139.463111v96.796444a46.478222 46.478222 0 0 1-92.984889 0v-96.796444c0-25.685333-20.792889-46.478222-46.478222-46.478222H233.130667a46.478222 46.478222 0 0 1-46.478223-46.506667z"></path></svg>'],pip:['<svg viewBox="0 0 1024 1024"><path d="M768 213.333333H256a85.333333 85.333333 0 0 0-85.333333 85.333334v426.666666a85.333333 85.333333 0 0 0 85.333333 85.333334h170.666667a42.666667 42.666667 0 1 1 0 85.333333H256a170.666667 170.666667 0 0 1-170.666667-170.666667V298.666667a170.666667 170.666667 0 0 1 170.666667-170.666667h512a170.666667 170.666667 0 0 1 170.666667 170.666667v128a42.666667 42.666667 0 1 1-85.333334 0V298.666667a85.333333 85.333333 0 0 0-85.333333-85.333334z m-128 341.333334a128 128 0 0 0-128 128v85.333333a128 128 0 0 0 128 128h170.666667a128 128 0 0 0 128-128v-85.333333a128 128 0 0 0-128-128h-170.666667z"></path></svg>','<svg viewBox="0 0 1024 1024"><path d="m768,213.33333l-512,0a85.33333,85.33333 0 0 0 -85.33333,85.33334l0,426.66666a85.33333,85.33333 0 0 0 85.33333,85.33334l170.66667,0a42.66667,42.66667 0 1 1 0,85.33333l-170.66667,0a170.66667,170.66667 0 0 1 -170.66667,-170.66667l0,-426.66666a170.66667,170.66667 0 0 1 170.66667,-170.66667l512,0a170.66667,170.66667 0 0 1 170.66667,170.66667l0,128a42.66667,42.66667 0 1 1 -85.33334,0l0,-128a85.33333,85.33333 0 0 0 -85.33333,-85.33334zm-128,341.33334a128,128 0 0 0 -128,128l0,85.33333a128,128 0 0 0 128,128l170.66667,0a128,128 0 0 0 128,-128l0,-85.33333a128,128 0 0 0 -128,-128l-170.66667,0z"></path><g stroke="null"><g stroke="null" transform="matrix(0.6896517266997474,0,0,0.6896517266997474,-10241.200782450309,-10001.206060939305) "><rect stroke="null" x="15122.523407" y="14826.656681" width="582" height="402" fill="none"></rect></g><g stroke="null" transform="matrix(0.6896517266997474,0,0,0.6896517266997474,-10241.200782450309,-10001.206060939305) "><path stroke="null" d="m15503.523407,14924.856681l-161.8,0c-66.2,0 -120,53.8 -120,120l0,161.8c0,22.1 17.9,40 40,40s40,-17.9 40,-40l0,-144.4l169.8,169.8c7.8,7.8 18,11.7 28.3,11.7c10.2,0 20.5,-3.9 28.3,-11.7c15.6,-15.6 15.6,-40.9 0,-56.6l-170.7,-170.6l146.1,0c22.1,0 40,-17.9 40,-40s-17.9,-40 -40,-40z"></path></g></g></svg>'],setting:'<svg viewBox="0 0 1024 1024" style="transform: scale(1.1);"><path d="M0 0h1024v1024H0z" fill-opacity="0"></path><path d="M501.333333 127.573333a21.333333 21.333333 0 0 1 21.333334 0l316.928 182.954667a21.333333 21.333333 0 0 1 10.666666 18.474667v365.994666a21.333333 21.333333 0 0 1-10.666666 18.474667L522.666667 896.426667a21.333333 21.333333 0 0 1-21.333334 0l-316.928-182.954667a21.333333 21.333333 0 0 1-10.666666-18.474667V328.96a21.333333 21.333333 0 0 1 10.666666-18.474667zM512 219.946667L259.029333 365.952v292.053333L512 804.010667l252.928-146.005334V365.952L512 219.946667zM512 426.666667a85.333333 85.333333 0 1 1 0 170.666666 85.333333 85.333333 0 0 1 0-170.666666z"></path></svg>\n',screenshot:'<svg viewBox="0 0 1024 1024"><path d="M412.245333 757.333333a42.666667 42.666667 0 0 1-56.490666-64l356.48-314.794666a42.666667 42.666667 0 0 1 56.746666 0.256l112.896 101.461333a42.666667 42.666667 0 1 1-57.088 63.488L740.266667 467.626667l-328.021334 289.706666zM810.666667 213.333333h-128a42.666667 42.666667 0 0 1 0-85.333333h170.666666a42.666667 42.666667 0 0 1 42.666667 42.666667v170.666666a42.666667 42.666667 0 0 1-85.333333 0V213.333333zM213.333333 213.333333v128a42.666667 42.666667 0 1 1-85.333333 0V170.666667a42.666667 42.666667 0 0 1 42.666667-42.666667h170.666666a42.666667 42.666667 0 1 1 0 85.333333H213.333333z m597.333334 597.333334v-128a42.666667 42.666667 0 0 1 85.333333 0v170.666666a42.666667 42.666667 0 0 1-42.666667 42.666667h-170.666666a42.666667 42.666667 0 0 1 0-85.333333h128zM213.333333 810.666667h128a42.666667 42.666667 0 0 1 0 85.333333H170.666667a42.666667 42.666667 0 0 1-42.666667-42.666667v-170.666666a42.666667 42.666667 0 0 1 85.333333 0v128z m170.666667-298.666667a128 128 0 1 1 0-256 128 128 0 0 1 0 256z m0-85.333333a42.666667 42.666667 0 1 0 0-85.333334 42.666667 42.666667 0 0 0 0 85.333334z"></path></svg>',playbackRate:'<svg viewBox="0 0 1024 1024"><path d="M512 951.04a435.2 435.2 0 1 1 435.2-435.2 435.2 435.2 0 0 1-435.2 435.2z m0-819.2a384 384 0 1 0 384 384A384 384 0 0 0 512 132.096z"></path><path d="M468.992 493.824l-130.048-75.008a20.992 20.992 0 0 0-31.232 18.176v150.016a20.992 20.992 0 0 0 31.232 18.176l130.048-75.008a20.992 20.992 0 0 0 0-36.352zM684.8 493.824l-129.536-75.008a21.248 21.248 0 0 0-31.744 18.432v149.504a21.248 21.248 0 0 0 31.744 18.432l129.536-75.008a20.992 20.992 0 0 0 0-36.352z"></path></svg>',subtitle:'<svg viewBox="0 0 1024 1024" version="1.1"><path d="M800 170.666667A138.666667 138.666667 0 0 1 938.666667 309.333333v405.546667a138.666667 138.666667 0 0 1-138.666667 138.666667H224A138.666667 138.666667 0 0 1 85.333333 714.88V309.333333a138.666667 138.666667 0 0 1 130.816-138.453333L224 170.666667h576z m0 64H224l-6.144 0.256A74.666667 74.666667 0 0 0 149.333333 309.333333v405.546667c0 41.216 33.450667 74.666667 74.666667 74.666667h576a74.666667 74.666667 0 0 0 74.666667-74.666667V309.333333a74.666667 74.666667 0 0 0-74.666667-74.666666zM234.666667 512c0-134.229333 115.754667-203.733333 218.538666-145.109333A32 32 0 0 1 421.461333 422.4C361.856 388.437333 298.666667 426.410667 298.666667 512c0 85.546667 63.317333 123.562667 122.88 89.728a32 32 0 0 1 31.573333 55.637333C350.549333 715.733333 234.666667 646.101333 234.666667 512z m320 0c0-134.229333 115.754667-203.733333 218.538666-145.109333a32 32 0 0 1-31.744 55.552C681.856 388.437333 618.666667 426.410667 618.666667 512c0 85.546667 63.317333 123.562667 122.88 89.728a32 32 0 0 1 31.573333 55.637333C670.549333 715.733333 554.666667 646.101333 554.666667 512z"></path></svg>',loop:'<svg viewBox="0 0 32 32"><g><path d="m16 2a13.9 13.9 0 0 0 -9 3.32v-2.32a1 1 0 0 0 -2 0v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2h-2.89a11.87 11.87 0 0 1 7.89-3 12 12 0 1 1 -11.67 9.23 1 1 0 1 0 -1.94-.46 13.72 13.72 0 0 0 -.39 3.23 14 14 0 1 0 14-14z"/><path d="m14 21.2a2 2 0 0 0 1.06-.31l5.11-3.19a2 2 0 0 0 0-3.4l-5.11-3.19a2 2 0 0 0 -3.06 1.69v6.4a2 2 0 0 0 2 2zm0-8.4 5.11 3.2-5.11 3.2z"/></g></svg>',quality:'<svg viewBox="0 0 32 32"><g><path d="m16 2a14 14 0 1 0 14 14 14 14 0 0 0 -14-14zm0 26a12 12 0 1 1 12-12 12 12 0 0 1 -12 12z"/><path d="m14.5 11a1 1 0 0 0 -1 1v3h-2v-3a1 1 0 0 0 -2 0v8a1 1 0 0 0 2 0v-3h2v3a1 1 0 0 0 2 0v-8a1 1 0 0 0 -1-1z"/><path d="m19.5 11h-2a1 1 0 0 0 -1 1v8a1 1 0 0 0 1 1h2a3 3 0 0 0 3-3v-4a3 3 0 0 0 -3-3zm1 7a1 1 0 0 1 -1 1h-1v-6h1a1 1 0 0 1 1 1z"/></g></svg>',lang:'<svg viewBox="0 0 1024 1024"><path d="M512 85.333333C277.333333 85.333333 85.333333 277.333333 85.333333 512s192 426.666667 426.666667 426.666667 426.666667-192 426.666667-426.666667S746.666667 85.333333 512 85.333333z m294.4 256H682.666667c-12.8-55.466667-34.133333-102.4-59.733334-153.6 76.8 29.866667 145.066667 81.066667 183.466667 153.6zM512 170.666667c34.133333 51.2 64 106.666667 81.066667 170.666666h-162.133334c17.066667-59.733333 46.933333-119.466667 81.066667-170.666666zM183.466667 597.333333c-8.533333-25.6-12.8-55.466667-12.8-85.333333s4.266667-59.733333 12.8-85.333333h145.066666c-4.266667 29.866667-4.266667 55.466667-4.266666 85.333333s4.266667 55.466667 4.266666 85.333333H183.466667z m34.133333 85.333334H341.333333c12.8 55.466667 34.133333 102.4 59.733334 153.6-76.8-29.866667-145.066667-81.066667-183.466667-153.6zM341.333333 341.333333H217.6c42.666667-72.533333 106.666667-123.733333 183.466667-153.6C375.466667 238.933333 354.133333 285.866667 341.333333 341.333333z m170.666667 512c-34.133333-51.2-64-106.666667-81.066667-170.666666h162.133334c-17.066667 59.733333-46.933333 119.466667-81.066667 170.666666z m98.133333-256H413.866667c-4.266667-29.866667-8.533333-55.466667-8.533334-85.333333s4.266667-55.466667 8.533334-85.333333h200.533333c4.266667 29.866667 8.533333 55.466667 8.533333 85.333333s-8.533333 55.466667-12.8 85.333333z m12.8 238.933334c25.6-46.933333 46.933333-98.133333 59.733334-153.6h123.733333c-38.4 72.533333-106.666667 123.733333-183.466667 153.6z m76.8-238.933334c4.266667-29.866667 4.266667-55.466667 4.266667-85.333333s-4.266667-55.466667-4.266667-85.333333h145.066667c8.533333 25.6 12.8 55.466667 12.8 85.333333s-4.266667 59.733333-12.8 85.333333h-145.066667z"></path></svg>',progressIndicator:null,loadingIndicator:null,previous:null,next:null,chromecast:null,airplay:null,danmaku:null,playlist:null};var ve,fe;(fe=ve||(ve={})).setupIcons=e=>{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(me[t]=e[t]);return me},fe.get=e=>me[e];const be=e=>{const t=()=>e.$root.classList.add(te),n=()=>{e.isSourceChanging||e.$root.classList.remove(te)};"none"!=e.$video.preload&&t(),e.on("loadstart",(()=>{"none"==e.$video.preload&&n()})),e.on(["seeking","videoqualitychange","videosourcechange"],t),e.on(["canplaythrough","playing","pause","seeked","error"],n),e.on(e.options.autoplay||R?"loadedmetadata":"canplay",(()=>e.$root.classList.remove(te))),e.on(["waiting","playing"],(o=>{"waiting"==o.type&&t();const i=e.currentTime,r=()=>{i!==e.currentTime?(n(),e.off("timeupdate",r)):t()};e.on("timeupdate",r)}))},ye=(e,t)=>{(e=>{e.on("play",(()=>{e.$root.classList.add(ne)})),e.on(["pause","videosourcechange"],(()=>{e.$root.classList.remove(ne)}))})(e),be(e),(e=>{e.on("fullscreenchange",(t=>{if(t.payload.isWeb)e.$root.classList.toggle(de);else{if(!e._requestFullscreen)return;e.$root.classList.toggle(ie)}}))})(e),q||((e,t)=>{function n(t){let n=t.target;n&&(e.$root.contains(n)||e.$root==n)?e.$root.classList.add(oe):e.$root.classList.remove(oe)}t&&e.$root.classList.add(oe),document.addEventListener("click",n),document.addEventListener("contextmenu",n),e.on("destroy",(()=>{document.removeEventListener("click",n),document.removeEventListener("contextmenu",n)}))})(e,t.autoFocus)};function ke(e,t,n){return Math.min(Math.max(e,t),n)}function xe(e){return e<10?"0"+e:""+e}function we(e){if(!isFinite(e))return"--:--";const t=Math.floor(e/3600),n=Math.floor(e%3600/60),o=Math.floor(e%3600%60);return(t>0?xe(t)+":":"")+xe(n)+":"+xe(o)}const Ee=e=>{if((e=>e.$root.classList.contains(te))(e)||isNaN(e.duration))return void e.emit("notice",{text:e.locales.get("Please wait for loading to complete")});const t=(e=>{var t;try{const n=e.$video,o=e.$root,i=e.context.ui,r=document.createElement("canvas"),s=n.videoWidth,a=n.videoHeight;r.width=s,r.height=a,r.getContext("2d").drawImage(n,0,0,s,a);const l=(null==(t=i.$watermark)?void 0:t.style)||{},c=l.top,d=l.left,u=l.right,h=l.bottom;if(i.$watermark&&[c,d,u,h].filter((e=>null!=e)).length>1){const e=i.$watermark,t=e.offsetLeft,n=e.offsetTop,a=e.offsetWidth,l=e.offsetHeight,p=i.$watermark.getBoundingClientRect(),g=p.width,m=p.height;let v=0,f=0;d?v=t:u&&(v=s-(o.clientWidth-t-a)-a),c?f=n:h&&(f=s-(o.clientHeight-n-l)-l),r.getContext("2d").drawImage(i.$watermark,v,f,g,m)}return r.toDataURL("image/png")}catch(n){return n}})(e);if(t instanceof Error)e.emit("notice",{text:t.message});else{!function(e,t){const n=document.createElement("a");n.href=e,n.download=t,n.click()}(t,(e.options.source.title||"OPlayer-ScreenShot")+"-"+we(e.currentTime).replace(/:/g,"-")+".png")}},$e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1500,n=null;const o=()=>n&&clearTimeout(n);return{callee:()=>{o(),n=setTimeout((()=>{e()}),t)},clear:o}};function Le(e,t){return e.classList.add(t),e}function Se(e,t){return e.classList.remove(t),e}function Te(e,t){return e.classList.contains(t)}const Pe={dragStart:q?"touchstart":"mousedown",dragMove:q?"touchmove":"mousemove",dragEnd:q?"touchend":"mouseup"},ze={ArrowUp:e=>{const t=100*e.volume+10;e.setVolume(t/100),e.emit("notice",{text:e.locales.get("Volume: %s",~~(100*e.volume)+"%")})},ArrowDown:e=>{const t=100*e.volume-10;e.setVolume(t/100),e.emit("notice",{text:e.locales.get("Volume: %s",~~(100*e.volume)+"%")})},ArrowLeft:(e,t)=>{var n,o;if(e.options.isLive||e.hasError)return;e.currentTime-((null==(n=t.theme.progress)?void 0:n.backward)||5)<0?e.seek(0):e.seek(e.currentTime-((null==(o=t.theme.progress)?void 0:o.forward)||5)),e.emit("notice",{text:we(e.currentTime)+" / "+we(e.duration)})},ArrowRight:e=>{e.options.isLive||e.hasError||(e.seek(e.currentTime+5),e.emit("notice",{text:we(e.currentTime)+" / "+we(e.duration)}))}," ":e=>e.togglePlay(),K:e=>e.togglePlay(),Escape:e=>{e.isFullScreen?e.exitFullscreen():e.$root.classList.contains(de)&&e.emit("fullscreenchange",{isWeb:!0})},F:e=>e.toggleFullScreen(),W:e=>e.emit("fullscreenchange",{isWeb:!0}),S:Ee,M:e=>e.isMuted?e.unmute():e.mute()};function Ae(e){var t,n;const o=e.player,i=e.config;function r(e){var t,n,r;if("INPUT"==(null==(t=document.activeElement)?void 0:t.tagName)||"TEXTAREA"==(null==(n=document.activeElement)?void 0:n.tagName)||(null==(r=document.activeElement)?void 0:r.getAttribute("contenteditable"))||i.keyboard.focused&&!(e=>e.$root.classList.contains(oe))(o)||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)return;const s=e.key.toLocaleUpperCase();ze[s]&&(e.preventDefault(),ze[s](o,i))}(!q||(null==(t=i.keyboard)?void 0:t.focused)||(null==(n=i.keyboard)?void 0:n.global))&&(e.keyboard={register:function(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(ze[t]=e[t])},unregister:function(e){e.forEach((e=>{delete ze[e]}))}},document.addEventListener("keydown",r),o.on("destroy",(()=>{document.removeEventListener("keydown",r)})))}const Oe="speed";function Ce(e){var t;const n=e.player,o=e.config.theme,i=e.$mask,r=null==(t=o.controller)?void 0:t.slideToSeek;q&&!n.options.isLive&&r&&"none"!=r&&n.once("loadedmetadata",(()=>{let e,t=0,o=0,s=0,a=0;const l=n.$root.getBoundingClientRect();function c(e){if(0==t&&0==o)return;const i=e.changedTouches[0],r=i.clientX,s=i.clientY,c=r-t,d=o-s;if(Math.abs(c)<2&&Math.abs(d)<2)return;const u=function(e,t){return 180*Math.atan2(t,e)/Math.PI}(c,d);(u>=-45&&u<45||u>=135&&u<=180||u>=-180&&u<-135)&&(e.preventDefault(),a=60*c/l.width,n.emit("notice",{text:we(ke(n.currentTime+a,0,n.duration))+" / "+we(n.duration),pos:"top"}))}function d(){0==t&&0==o||("long-touch"==r&&s<1e3&&(e&&clearInterval(e),i.removeEventListener("touchmove",c)),Math.abs(a)>=1&&n.seek(ke(n.currentTime+a,0,n.duration)),t=o=a=s=0)}"always"==r&&(i.addEventListener("touchstart",(e=>{if(Te(n.$root,re))return;const i=e.changedTouches[0],r=i.clientX,s=i.clientY;t=r,o=s})),i.addEventListener("touchmove",c),i.addEventListener("touchend",d)),"long-touch"==r&&i.addEventListener("touchstart",(r=>{if(Te(n.$root,re))return;const a=r.changedTouches[0],l=a.clientX,u=a.clientY;t=l,o=u,e=window.setInterval((()=>{s+=100,s>=1e3&&(clearInterval(e),n.emit("notice",{text:"slid left or right to seek",pos:"top"}),i.addEventListener("touchmove",c))}),100),i.addEventListener("touchend",d,{once:!0})}))}))}const Me=$.css(t||(t=f(["\n  font-variant-numeric: tabular-nums;\n  font-size: 0.875em;\n"]))),Fe=$.css("width:0.5em;height:0.5em;background-color:var(--primary-color);border-radius:50%;margin-right:0.5em"),je=$.css("\n    position: absolute;\n    top: 10px;\n    right: 50%;\n    border-radius: 2px;\n    box-sizing: border-box;\n    transform: translate(50%, -100%);\n    transition: opacity 0.2s ease, top 0.2s ease;\n    font-size: 0.875em;\n"),Be=$.css("\n    top: calc(100% - 10px);\n    right: 50%;\n    transform: translateX(50%);\n"),Re=$.css({position:"relative",display:"flex",["& ."+je]:{visibility:"hidden",opacity:0,"background-color":"var(--shadow-background-color)"}}),He=$.css({"&:hover":{"padding-top":"0.5em","margin-top":"-0.5em",["& ."+je]:{visibility:"visible",opacity:1,top:0}},"&[data-dropdown-pos=top]:hover":{"padding-bottom":"0.5em","margin-bottom":"-0.5em",["& ."+je]:{top:"100%"}}}),qe=$.css({padding:"0 0.5em","min-width":"6em",display:"block",height:"2.4em","line-height":"2.4em",cursor:"pointer","text-align":"center","word-break":"keep-all","&:nth-last-child(1)":{"margin-bottom":"0px"},"& *":{"pointer-events":"none"},"&[aria-checked=true]":{color:"var(--primary-color)"},"&:hover":{"background-color":"rgba(255, 255, 255, 0.1)"}}),Ie=$.cls("textIcon"),De=$.css({display:"flex","align-items":"center",["& > ."+ue+":last-child"+(q?", & >  ."+ue+'[aria-label="Play"], & >  .'+ue+'[aria-label="Pause"]':"")]:{"margin-right":0}}),Ne=$.css({color:"#fff",height:"2.375em",display:"flex","box-sizing":"border-box","justify-content":"space-between","align-items":"center","padding-bottom":q?0:"0.25em",["& ."+ue+"."+Ie]:{width:"auto","min-width":"2em","font-size":"0.875em",padding:"0 4px","border-radius":"2px"},["& ."+ue]:Object.assign({width:"2em",height:q?"auto":"2em","margin-right":"0.5em","justify-content":"center","align-items":"center",display:"inline-flex","& > *":{height:"1.5em",width:"1.5em","pointer-events":"none",transition:"transform .2s ease-in-out"}},q?{"&:active > *":{transform:"scale(.9)"}}:{"&:hover":{"background-color":"rgb(255 255 255 / .2)"}})}),Ve=$.css({flex:1,height:"100%","padding-left":"0.5em","> div":{height:"100%",display:"flex","align-items":"center"}}),_e=$.css("display: block;"),Ue=$.css("min-width: 15.5em;"),Xe=$.css("min-width: 10.5em;"),We=$.css("\n  display: none;\n  width: 1.4em;\n  height: 1.4em;\n"),Ye=$.css("\n  width: 2em;\n  height: 2em;\n  margin: 0 -10px 0 -5px;\n"),Qe=$.css("\n  width: 2em;\n  height: 2em;\n  transform: rotate(180deg);\n  margin-left: -10px;\n"),Ke=$.css({position:"absolute",cursor:"pointer",top:"0",left:"0",right:"0",bottom:"0","background-color":"#ccc",transition:".3s","border-radius":"34px","&:before":{position:"absolute",content:'""',height:"1em",width:"1em",left:"0.25em",bottom:"0.1875em","background-color":"white",transition:".3s","border-radius":"50%"}}),Je=$.css("\n  position: relative;\n  width: 2.5em;\n  height: 1.375em;\n"),Ge=$.css("\n  white-space: nowrap;\n  color: rgba(255, 255, 255, 0.7);\n  font-size: 0.8em;\n"),Ze=$.css({height:"2.4em",cursor:"pointer",color:"#fff","justify-content":"space-between","align-items":"center",padding:"0 0.75em","line-height":"1",display:"flex",overflow:"hidden","&:not([aria-label=slider]) > *":{"pointer-events":"none"},"&:hover":{"background-color":"rgba(255, 255, 255, 0.1)"},"&[aria-checked='true']":{["& ."+We]:{display:"block"},"&[data-index]":{"background-color":"rgba(255, 255, 255, 0.1)"},["& ."+Ke]:{"background-color":"var(--primary-color)","&:before":{transform:"translateX(1em)"}}}}),et=$.css({display:"flex","align-items":"center","margin-right":"10px","& > svg":{width:"1.7em",height:"1.7em","margin-right":"0.5em"}}),tt=$.css("\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n"),nt=$.css({width:"100%",display:"flex","align-items":"center","border-bottom":"1px solid rgb(255 255 255 / 10%)"}),ot=$.css({"-webkit-appearance":"none",width:"90%",height:"0.4em",outline:"none","border-radius":"34px",background:"rgb(204, 204, 204)",margin:"0",cursor:"pointer",position:"relative","&::-webkit-slider-thumb":{"-webkit-appearance":"none",appearance:"none",background:"#fff",height:"1em",width:"1em","border-radius":"50%",border:"none"},"&:hover::before":{visibility:"visible"},"::before":{position:"absolute",left:"-0.3em",top:"50%",transform:"translate(-100%, -50%)",content:"attr(value)",color:"rgba(255, 255, 255, 0.7)",visibility:"hidden","font-size":"0.8em"}}),it=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;return"<svg "+(e?'class="'+e+'"':"")+' viewBox="0 0 32 32"><path d="m 12.59,20.34 4.58,-4.59 -4.58,-4.59 1.41,-1.41 6,6 -6,6 z" fill="#fff"></path></svg>'},rt=function(e){return'<div class="'+et+'">\n      '+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"\n      <span>"+e+"</span>\n    </div>\n    <div class="+tt+'>\n      <span role="label" class='+Ge+"></span>\n      "+it()+"\n    </div>\n"};function st(e){let t=e.type,n=e.key,o=e.name,i=e.icon,r=e.default,s=e.index,a=e.max,l=e.min,c=e.step,d=e.hasChildren,u=$.create("div."+Ze,{"data-key":n,role:"option"==t?"menuitemradio":"menuitem","aria-haspopup":!!d&&"menu","aria-label":t||"menuitem"});const h={$row:u,$label:void 0};switch(t){case"switcher":u.innerHTML=function(e){return'<div class="'+et+'">\n    '+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"\n    <span>"+e+"</span>\n  </div>\n  <div class="+tt+">\n    <label class="+Je+">\n      <span class="+Ke+"></span>\n    </label>\n  </div>\n"}(o,i),u.setAttribute("aria-checked",r||!1);break;case"selector":u.innerHTML=rt(o,i),h.$label=u.querySelector('span[role="label"]');break;case"back":u.innerHTML=(e=>'<div class="'+nt+'">\n      '+it(Qe)+"\n      <span>"+e+"</span>\n    </div>\n")(o);break;case"slider":u.innerHTML=(e=>{let t=e.name,n=e.icon,o=void 0===n?"":n,i=e.max,r=void 0===i?1:i,s=e.min,a=void 0===s?0:s,l=e.value,c=void 0===l?0:l,d=e.step;return'<div class="'+et+'">\n    '+o+"\n    <span>"+t+"</span>\n  </div>\n  <div class="+tt+'>\n   <input type="range" min="'+a+'" max="'+r+'" step="'+(void 0===d?1:d)+'" value="'+c+'" class="'+ot+'" />\n  </div>'})({name:o,max:a,min:l,icon:i,value:r,step:c});break;case"option":u.innerHTML=function(e){return'<div class="'+et+'">\n      '+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"\n      <span>"+e+"</span>\n    </div>\n    <svg class="+We+' viewBox="0 0 24 24">\n      <path d="M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z" fill="#fff"></path>\n    </svg>\n'}(o,i),u.setAttribute("aria-checked",r||!1),"number"==typeof s&&u.setAttribute("data-index",s.toString());break;default:u.innerHTML=d?rt(o,i):function(e){return'<div class="'+et+'">\n    '+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"")+"\n    <span>"+e+"</span>\n  </div>\n"}(o,i)}return h}function at(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!n||0==n.length)return;const i=o.key,r=o.target,s=o.parent,a=o.isSelectorOptionsPanel,l=o.name;let c={},d=i||"root";t[0]&&"root"==d?(c=t[0],d=t[0].key):(c.$ref=$.create("div."+(t[0]&&a?Xe:Ue),{"data-key":d,role:"menu"}),c.key=d,t.push(c)),c.parent=s;const u="root"==c.key;if(!u){const e=st({name:l,type:"back"}).$row;e.addEventListener("click",(()=>{var e;c.$ref.classList.remove(_e),null==(e=c.parent)||e.$ref.classList.add(_e)})),$.render(e,c.$ref)}for(let h=0;h<n.length;h++){const i=n[h],s=i.name,l=i.type,d=i.key,p=i.children,g=i.icon,m=i.default,v=i.onChange,f=i.max,b=i.min,y=i.step,k=i.value,x=st(Object.assign({name:s,type:a?"option":l,key:d,icon:g,default:m,max:f,min:b,step:y,hasChildren:Boolean(p)},!u&&a&&{index:h})),w=x.$row,E=x.$label;if($.render(w,c.$ref),$.render(c.$ref,r),p){const n="selector"==l&&p.every((e=>!Boolean(e.type)||"option"==e.type)),o=at(e,t,p,{key:d||s,target:r,parent:c,isSelectorOptionsPanel:n,name:s,parenOnChange:v});if(w.addEventListener("click",(()=>{c.$ref.classList.remove(_e),o.$ref.classList.add(_e)})),n){const t=p.find((e=>e.default));t&&(E.innerText=t.name),o.select=(t,n)=>{var i;if(-1==t)return void(null==(i=o.$ref.querySelector("[aria-checked=true]"))||i.setAttribute("aria-checked","false"));const r=o.$ref.querySelectorAll("[aria-checked]");if("true"!=r.item(t).getAttribute("aria-checked")){r.forEach((e=>e.setAttribute("aria-checked","false"))),r.item(t).setAttribute("aria-checked","true");const o=p[t];E.innerText=o.name,n&&(null==v||v(o,{index:t,player:e}))}},o.$ref.addEventListener("click",(e=>{const t=e.target;t.hasAttribute("data-index")&&(o.select(+t.getAttribute("data-index"),!0),c.$ref.classList.add(_e),o.$ref.classList.remove(_e))}))}}else if("switcher"==l)w.select=function(e){const t="true"==this.getAttribute("aria-checked");this.setAttribute("aria-checked",""+!t),e&&(null==v||v(!t))},w.addEventListener("click",(()=>w.select(!0)));else if("slider"==l){const e=w.querySelector("input");e.oninput=function(e){e.target.setAttribute("value",e.target.value)},e.onchange=function(e){null==v||v(e.target.value)}}else("option"==l||null==l&&!a)&&w.addEventListener("click",(()=>{var e;return null==(e=v||o.parenOnChange)?void 0:e(k)}))}return c}function lt(e){var t,n;const o=e.player,i=e.$root,r=e.config;if(!1===r.settings)return;const s=null==(t=r.theme.controller)?void 0:t.setting,a=r.settings||[],l=(null==(n=r.theme.controller)?void 0:n.header)&&("top"==s||q&&"auto"==s),c=$.create("div."+(e=>$.css({"z-index":"8","max-height":"75%","border-radius":"2px",display:"block",position:"absolute",right:"1em",[e]:"top"==e?"var(--control-bar-height)":"2.5em",overflow:"auto","background-color":"var(--shadow-background-color)",fill:"#fff","&::-webkit-scrollbar":{width:"2px"},"&::-webkit-scrollbar-thumb":{background:"var(--primary-color)"},"& > div":{display:"none","font-size":"0.875em"},["& > div."+_e]:{display:"block"}}))(l?"top":"bottom"),{"aria-label":"Setting"});let d=[],u=!1;const h={loop:{name:o.locales.get("Loop"),type:"switcher",key:"loop",icon:ve.get("loop"),default:o.isLoop,onChange:e=>o.setLoop(e)}};function p(e){var t,n;u&&(null==(n=null==(t=d[0])?void 0:t.$ref.querySelector("[data-key="+e+"]"))||n.remove(),d=d.filter((t=>t.key!==e||(t.$ref.remove(),t=null,!1))))}function g(t){var n;t.length<1||(u||(u=!0,$.render(c,i),function(){const t=$.create("button",{class:ue+" "+ge,"aria-label":o.locales.get("Settings"),"data-tooltip-pos":"top"==s?"down":""},""+ve.get("setting"));t.addEventListener("click",(e=>{e.stopPropagation(),m()}));const n=[r.pictureInPicture&&o.isPipEnabled,r.fullscreen].filter(Boolean).length;if(l){const n=e.$controllerBar.lastElementChild;n.insertBefore(t,n.children[n.children.length])}else{const o=e.$controllerBottom.lastElementChild;o.insertBefore(t,o.children[o.children.length-n])}}(),null==(n=e.keyboard)||n.register({c:m})),at(o,d,t,{target:c}))}function m(){function e(t){c.contains(t.target)||(o.$root.classList.remove(re),d.forEach((e=>e.$ref.classList.remove(_e))),document.removeEventListener("click",e))}o.$root.classList.add(re),d[0].$ref.classList.add(_e),setTimeout((()=>{document.addEventListener("click",e)}))}g(a.map((e=>"string"==typeof e?h[e]:e))),e.setting={register:function(e){g((Array.isArray(e)?e:[e]).map((e=>{const t=d.find((t=>t.key==e.key));if(!t)return e;p(t.key)})).filter(Boolean))},unregister:p,updateLabel:function(e,t){if(!u)return;const n=c.querySelector('[data-key="'+e+'"] span[role="label"]');n&&(n.innerText=t)},select:function(e,t){var n;let o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(u)if("number"==typeof t)for(let i=0;i<d.length;i++){const n=d[i];if(n.key==e){n.select(t,o);break}}else null==(n=c.querySelector('[data-key="'+e+'"][aria-checked]'))||n.select(o)}}}const ct=$.css({position:"absolute",top:0,left:0,right:0,"z-index":7,padding:"0.5em 0.5em 0",transition:"transform 0.3s ease",height:"var(--control-bar-height)",color:"#fff","&::before":{position:"absolute",content:"''",width:"100%",display:"block",top:0,left:0,bottom:"-1em","z-index":-1,transition:"opacity 0.3s ease","pointer-events":"none","background-image":"linear-gradient(rgba(0, 0, 0, .3), transparent)"},"& > div:nth-child(1)":{overflow:"hidden",flex:"1 1 0","margin-right":"0.5em"},["& > div:nth-child(2) ."+Re+":last-child ."+je]:{right:"max(50%,3em)"},["@global ."+le+" &"]:{transform:"translateY(calc(-100%))","&::before":{opacity:0}}}),dt=$.css("width: 2.5em;height: 2.5em;margin:0 -10px;transform: rotate(180deg);"),ut=$.css("flex:1;font-size:1em;margin: 0 0.25em;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"),ht=$.css(n||(n=f(["\n  width: 2.65em;\n  display: flex;\n  height: 7.65em;\n  box-sizing: border-box;\n  flex-direction: column;\n"]))),pt=$.css("\n  width: 100%;\n  text-align: center;\n  height: 28px;\n  line-height: 28px;\n  margin-bottom: 2px;\n  font-size: 0.75em;\n"),gt=$.css("\n  position: relative;\n  display: flex;\n  justify-content: center;\n  flex: 1;\n  cursor: pointer;\n  padding: 5px 0 14px;\n"),mt=$.css("\n  height: 100%;\n  width: 4px;\n  position: relative;\n"),vt=$.css("\n  width: 4px;\n  height: 100%;\n  overflow: hidden;\n  border-radius: 2px;\n  background: rgba(255, 255, 255, 0.3);\n"),ft=$.css("\n  height: 100%;\n  background-color: var(--primary-color);\n  transform-origin: 0 100%;\n"),bt=$.css(o||(o=f(["\n  position:absolute;\n  bottom: 0;\n  top: auto;\n  left: -4px;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background-color: var(--primary-color);\n  vertical-align: middle;\n  pointer-events: none;\n  "]))),yt=(e,t)=>{const n=$.create("div."+ht,{},"<div class="+pt+">100</div>\n\n    <div class="+gt+">\n        <div class="+mt+">\n          <div class="+vt+">\n            <div class="+ft+"></div>\n          </div>\n\n          <div class="+bt+"></div>\n        <div>\n      </div>"),o=n.querySelector("."+gt),i=n.querySelector("."+bt),r=n.querySelector("."+ft),s=n.querySelector("."+pt),a=t=>{t.preventDefault(),e.setVolume(l((e=>{const t=o.getBoundingClientRect(),n=(t.bottom-(e.clientY||e.changedTouches[0].clientY))/t.height;return n>=1?1:n<=0?0:n})(t)))},l=e=>(s.innerText=""+~~(100*e),r.style.transform="scaleY("+e+")",i.style.bottom="calc("+~~(100*e)+"% - 6px)",e);l(e.volume),e.on("volumechange",(()=>{l(e.isMuted?0:e.volume)})),o.addEventListener(Pe.dragStart,(e=>{a(e),document.addEventListener(Pe.dragMove,a,{passive:!1}),document.addEventListener(Pe.dragEnd,(()=>{document.removeEventListener(Pe.dragMove,a)}),{once:!0})})),$.render(n,t)},kt=$.css("\n  display: none;\n  bottom: 15px;\n  position: absolute;\n  left: 50%;\n  padding: 6px 8px;\n  background-color: var(--shadow-background-color);\n  color: #fff;\n  border-radius: 2px;\n  white-space: nowrap;\n  word-break: nowrap;\n  transform: translateX(-50%);"),xt=$.css({position:"absolute",width:"0.8em",height:"0.33em","background-color":"var(--highlight-color)",transform:"translateX(-3px)",transition:"all 0.2s",["&:hover > ."+kt]:{display:"block"}});const wt=$.css("\n  position: absolute;\n  left: 0;\n  bottom: 12px;\n  pointer-events: none;\n  transform: translateX(-50%);\n  background-position-y: center;\n  border-radius: 2px;\n  display: none;"),Et=$.css("\n  position: absolute;\n  left: 0;\n  bottom: 12px;\n  pointer-events: none;\n  border-radius: 2px;\n  display: none;"),$t={width:160,height:90};const Lt=$.css({"background-color":"hsla(0, 0%, 100%, 0.4)"}),St=$.css({"background-color":"var(--primary-color)"}),Tt=$.css({"pointer-events":"none",position:"relative","& > *":{display:"block",position:"absolute",width:"1.4em",height:"1.4em",top:"0",left:"0",margin:"-0.535em 0 0 -0.7em",transform:q?"none":"scale(0)",transition:"transform 0.3s ease","z-index":"1"},"& > *:not(svg)":{width:"1em",height:"1em",margin:"-0.335em 0 0 -0.5em","border-radius":"50%","background-color":"#fff"}}),Pt=$.css({position:"absolute",left:"0","border-radius":"2px",padding:"6px 8px","background-color":"var(--shadow-background-color)",color:"#fff","z-index":"2","pointer-events":"none",transform:"translateX(-50%)",display:"none",bottom:"15px"}),zt=$.css("/* progressDragging */"),At=$.css(Object.assign({position:"relative","box-sizing":"border-box",padding:"0.5em",cursor:"pointer",width:"100%","font-size":"0.75em",transition:"padding 0.3s ease",["&."+zt+" ."+Pt+", &."+zt+" ."+wt+", &."+zt+" ."+Et]:{display:"block"}},q?{["@global ."+le+" ."+Tt+" > *"]:{transform:"scale(0)"}}:{["&."+zt+" ."+Tt+" > *, &:hover ."+Tt+" > *"]:{transform:"scale(1)"}})),Ot=$.css({position:"relative",height:"0.33em",width:"100%","background-color":"hsla(0, 0%, 100%, 0.2)",["& ."+Lt+", & ."+St]:{position:"absolute",left:"0",top:"0",bottom:"0","pointer-events":"none"}}),Ct=(e,t)=>{var n;const o=e.player,i=e.config;if(o.options.isLive)return;const r=e.$progress=$.create("div."+At,{},"<div class="+Ot+'>\n      <div class="'+Pt+'">00:00</div>\n      <div class="'+Lt+'" style="width:0%"></div>\n      <div class="'+St+'" style="width:0%"></div>\n      <div class="'+Tt+'" style="transform: translateX(0%);">\n        '+(ve.get("progressIndicator")||"<span />")+"\n      </div>\n  </div>"),s=r.firstElementChild;(null==(n=i.thumbnails)?void 0:n.isVTT)?console.warn("vtt thumbnails support by @oplayer/pluins"):function(e,t){const n=e.config.thumbnails,o=e.player;let i,r=!1;const s=$.render($.create("div."+wt),t);function a(e){if(r&&e){const n=[i.width/2,t.clientWidth],o=n[0],r=n[1],a=o/r,l=(r-o)/r;if(s.style.left=100*(e<a?a:e>l?l:e)+"%",Array.isArray(i.src)){const t=i.number*e,n=Math.ceil(t/(i.x*i.y))-1,o=t%i.number,r=Math.floor(o/i.x),a=Math.ceil(o%i.x);s.style.backgroundImage="url("+i.src[n]+")",s.style.backgroundPosition=-a+"00% "+-r+"00%"}else{const t=Math.floor(e*i.number);s.style.backgroundPositionX="-"+t+"00%"}}else r=!0,s.style.width=i.width+"px",s.style.height=i.height+"px",Array.isArray(i.src)||(s.style.backgroundImage="url("+i.src+")")}function l(t){r=!1,i=Object.assign({},$t,t),i.y&&!Array.isArray(i.src)&&(i.src=[i.src]),e.progressHoverCallback.push(a)}(null==n?void 0:n.src)&&l(n),o.on("videosourcechange",(()=>{r=!1,s.style.backgroundImage="none",e.progressHoverCallback.splice(e.progressHoverCallback.findIndex((e=>e==a)),1)})),e.changThumbnails=l}(e,s),e.vttThumbnailsCls=Et,function(e,t){const n=e.player,o=e.config.highlight;let i=[];function r(e){const t=$.create("div."+xt,{},'<span class="'+kt+'">'+e.text+"</san>");return t.style.left=e.left+"%",t}function s(e,n){i.forEach((e=>e.remove()));for(let o=0;o<e.length;o++){const s=e[o],a=r({left:s.time/n*100,text:s.text});i.push(a),$.render(a,t)}}function a(e){n.duration!==1/0&&n.duration>0?s(e,n.duration):n.once("loadedmetadata",(function(){s(e,n.duration)}))}t.style.setProperty("--highlight-color",(null==o?void 0:o.color)||"#FFF"),(null==o?void 0:o.source)&&a(o.source),n.on("videosourcechange",(()=>{i.forEach((e=>e.remove())),i=[]})),e.changHighlightSource=function(e){a(e)}}(e,s);const a=r.querySelector("."+Lt),l=r.querySelector("."+St),c=r.querySelector("."+Tt),d=r.querySelector("."+Pt);let u=!1;const h=e=>{const t=r.getBoundingClientRect(),n=((e.clientX||e.changedTouches[0].clientX)-t.left)/t.width;return n>=1?1:n<=0?0:n},p=e=>{const t=h(e),n=100*t;return l.style.width=n+"%",c.style.transform="translateX("+n+"%)",d.innerText=we(o.duration*t),d.style.left=n+"%",t};r.addEventListener(Pe.dragStart,(t=>{u=!0,r.classList.add(zt);const n=p(t);function i(t){t.preventDefault();const n=p(t);e.progressHoverCallback.forEach((e=>e(n)))}e.progressHoverCallback.forEach((e=>e(n))),document.addEventListener(Pe.dragMove,i,{passive:!1}),document.addEventListener(Pe.dragEnd,(e=>{r.classList.remove(zt),u=!1,document.removeEventListener(Pe.dragMove,i),isNaN(o.duration)||o.seek(h(e)*o.duration)}),{once:!0})})),q||(r.addEventListener("mouseenter",(()=>{u||e.progressHoverCallback.forEach((e=>e()))})),r.addEventListener("mousemove",(t=>{if(u)return;r.classList.add(zt),t.target.classList.contains(xt)?d.style.display="none":d.removeAttribute("style");const n=h(t);d.innerText=we(o.duration*n),d.style.left=100*n+"%",e.progressHoverCallback.forEach((e=>e(n)))}),{passive:!1}),r.addEventListener("mouseleave",(()=>{u||r.classList.remove(zt)}))),o.on(["timeupdate","seeking"],(()=>{if(u)return;const e=o.currentTime/o.duration*100||0;l.style.width=e+"%",c.style.transform="translateX("+e+"%)"})),o.on("progress",(()=>{const e=o.buffered.length?o.buffered.end(o.buffered.length-1)/o.duration*100:0;a.style.width=e+"%"})),o.on("videosourcechange",(()=>{a.style.width="0%",l.style.width="0%",c.style.transform="translateX(0%)"})),$.render(r,t)},Mt=$.css({position:"absolute",left:0,right:0,bottom:0,"z-index":7,padding:"0 0.5em",transition:"transform 0.3s ease, padding 0.3s ease","min-height":"var(--control-bar-height)","&::before":{position:"absolute",content:"''",width:"100%",display:"block",bottom:0,left:0,"z-index":-1,top:"-1em",transition:"opacity 0.3s ease","pointer-events":"none","background-image":"linear-gradient(transparent, rgba(0, 0, 0, .3))"},["@global ."+le+" &"]:{"pointer-events":"none",transform:"translateY(calc(100% - 0.55em))",padding:0,"&::before":{opacity:0}},["@global ."+le+" ."+At]:{"padding-left":0,"padding-right":0}}),Ft=(e,t)=>{var n,o,i;const r=e.player,s=e.config,a=$.render($.create("div."+Mt),t);(null==(n=s.theme.progress)?void 0:n.mini)&&!r.options.isLive||$.css({["@global ."+le+" ."+Mt]:{transform:"translateY(100%)"}});const l=[r.locales.get("Play"),r.locales.get("Pause"),r.locales.get("Screenshot"),r.locales.get("Picture in Picture"),r.locales.get(r.isFullscreenEnabled?"Fullscreen":"WebFullscreen"),r.locales.get("Previous"),r.locales.get("Next")],c=l[0],d=l[1],u=l[2],h=l[3],p=l[4],g=l[5],m=l[6],v=ve.get("previous")||"",f=ve.get("next")||"",b=e.$controllerBottom=$.create("div."+Ne,{},'<div class="'+De+'">\n\n    '+(v&&'<button class="'+ue+" "+ge+'" aria-label="'+g+'" >'+v+"</button>")+'\n\n      <button\n        class="'+ue+" "+(r.isPlaying?he:pe)+" "+ge+'"\n        aria-label="'+c+'"\n      >\n        '+ve.get("play")+"\n        "+ve.get("pause")+"\n      </button>\n\n      "+(f&&'<button class="'+ue+" "+ge+'" aria-label="'+m+'">'+f+"</button>")+"\n\n      "+(r.options.isLive?'<span class="'+Fe+'"></span>':"")+"\n\n      <span class="+Me+">"+(r.options.isLive||"none"==r.$video.preload?"00:00":"00:00 / --:--")+'</span>\n    </div>\n\n    <div class="'+Ve+'"></div>\n\n    <div class="'+De+'">\n      <div class="'+Re+" "+He+'">\n        <button class="'+ue+" "+(r.isMuted?he:pe)+'" aria-label="Volume">\n            '+ve.get("volume")[0]+"\n            "+ve.get("volume")[1]+"\n        </button>\n        "+(H?"":"<div class="+je+"></div>")+"\n      </div>\n\n      "+(s.screenshot?'<button class="'+ue+" "+ge+'" aria-label="'+u+'">\n              '+ve.get("screenshot")+"\n            </button>":"")+"\n\n      "+(s.pictureInPicture&&r.isPipEnabled?'<button\n              class="'+ue+" "+ge+" "+(r.isInPip?he:pe)+'"\n              aria-label="'+h+'">\n                '+ve.get("pip")[0]+"\n                "+ve.get("pip")[1]+"\n            </button>":"")+"\n\n      "+(s.fullscreen?'<button class="'+ue+" "+pe+" "+ge+'" aria-label="'+p+'">\n                '+ve.get("fullscreen")[0]+"\n                "+ve.get("fullscreen")[1]+"\n              </button>":"")+"\n    </div>");"auto"==(null==(o=s.theme.progress)?void 0:o.position)&&q||"center"==(null==(i=s.theme.progress)?void 0:i.position)?Ct(e,b.querySelector("."+Ve)):Ct(e,a);const y=b.querySelector("button[aria-label=Volume]");H||yt(r,y.nextElementSibling);const k=b.querySelector("button[aria-label="+c+"]"),x=b.querySelector("."+Me),w=b.querySelector('button[aria-label="'+p+'"]'),E=b.querySelector('button[aria-label="'+h+'"]'),L=(e,t)=>{e.classList.add(t?he:pe),e.classList.remove(t?pe:he)};s.fullscreen&&r.on("fullscreenchange",(()=>setTimeout((()=>{L(w,(e=>e.$root.classList.contains(ie)||e.$root.classList.contains(de))(r))})))),s.pictureInPicture&&r.on(["enterpictureinpicture","leavepictureinpicture"],(()=>L(E,r.isInPip))),r.on(["play","pause","videosourcechange"],(()=>{k.setAttribute("aria-label",r.isPlaying?d:c),L(k,r.isPlaying)})),r.on("volumechange",(()=>L(y,r.isMuted))),r.on(["durationchange","timeupdate","seeking","seeked"],(()=>{x.innerText=we(r.currentTime)+" "+(r.options.isLive?"":"/ "+we(r.duration))})),r.on("videosourcechange",(()=>{x.innerText=r.options.isLive||"none"==r.$video.preload?"00:00":"00:00 / --:--"})),b.addEventListener("click",(e=>{switch(e.target.getAttribute("aria-label")){case c:case d:return r.togglePlay();case"Volume":if(q&&!H)return;r.isMuted?r.unmute():r.mute();break;case h:return r.togglePip();case p:return void((e=>e.$root.classList.contains(de))(r)||!r.isFullscreenEnabled?r.emit("fullscreenchange",{isWeb:!0}):r.toggleFullScreen());case u:Ee(r);break;case m:r.emit("next");break;case g:r.emit("previous")}})),$.render(b,a)},jt=e=>{const t=e.player,n=e.config,o=e.$root,i=$.create("div");((e,t)=>{var n,o,i;const r=e.player,s=null==(n=e.config.theme.controller)?void 0:n.header;if(!s)return;const a=null==s?void 0:s.back,l=a&&q,c=e.$controllerBar=$.create("div",{class:ct+" "+Ne},'<div class="'+De+'">\n    '+(l?"<span role='button' class=\""+dt+" "+("fullscreen"==a?se:"")+'">'+it("")+"</span>":"")+"\n      <h2 class='"+ut+"'>"+((null==(i=null==(o=r.options)?void 0:o.source)?void 0:i.title)||"")+'</h2>\n    </div>\n    <div class="'+De+'"></div>'),d=c.querySelector("."+ut);if(l){const e=d.previousElementSibling;e.addEventListener("click",(e=>{r.isFullScreen&&r.exitFullscreen(),r.emit("backward",e)})),"fullscreen"==a&&r.on("fullscreenchange",(()=>{r.isFullScreen?e.classList.remove(se):e.classList.add(se)}))}r.on("videosourcechange",(e=>{let t=e.payload;t.then||(d.innerText=t.title||"")})),r.on("sourcechangeerror",(e=>{var t,n;let o=e.payload;(null==(t=o.source)?void 0:t.title)||(d.innerText=(null==(n=o.e)?void 0:n.message)||"ERROR")})),r.on("videosourcechanged",(e=>{let t=e.payload;d.innerText=t.title||""})),$.render(c,t)})(e,i),Ft(e,i);const r=n.theme.controller||{},s=r.display,a=r.displayBehavior;"played"==s&&(Le(i,se),t.once("play",(()=>{Se(i,se)})));const l=()=>{var e;!t.isPlaying&&!q||Te(t.$root,le)||Te(t.$root,re)||Te(t.$root,ce)||t.$root.contains(document.activeElement)&&"INPUT"==(null==(e=document.activeElement)?void 0:e.tagName)||(Le(t.$root,le),t.$root.setAttribute(ae,"true"),t.emit("controlshidden",!1))},c=$e(l,2e3),d=c.callee,u=c.clear,h=()=>{u(),Te(t.$root,le)&&(Se(t.$root,le),t.$root.setAttribute(ae,"false"),t.emit("controlsshown",!0))};"none"!=a&&(t.on("play",d),t.on(["pause","videosourcechange"],h),t.on("destroy",u)),q||(t.$root.addEventListener("mousemove",(e=>{h(),i.contains(e.target)||d()})),"delay"==a&&t.$root.addEventListener("mouseleave",d),"hover"==a&&t.$root.addEventListener("mouseleave",l)),e.toggleController=function(){Te(i,se)?t.play():Te(t.$root,le)?h():l()},$.render(i,o)},Bt={opacity:0,"pointer-events":"none"},Rt=$.css(Object.assign({transition:"opacity 100ms linear",position:"absolute",top:0,bottom:0,left:0,right:0,margin:"auto",fill:"#fff",width:"3em",height:"3em","z-index":"7","& > button":{width:"100%",height:"100%","border-radius":"100%",background:"var(--primary-color)",opacity:.9,padding:"1em",transition:"transform .2s ease-in-out","&:active":{transform:"scale(.85)"},"& > *":{position:"relative",width:"1.5em",height:"1.5em",left:"-0.2em",top:"-0.25em"}},["@global ."+ne+" &"]:Bt,["@global ."+te+" &"]:Bt,["@global ."+ce+" &"]:Bt},q&&{["@global ."+le+" &"]:Bt})),Ht=(e,t)=>{const n=$.create("div."+Rt,{},'<button aria-label="Play" class="'+ue+'" type="button">\n      '+ve.get("play")+"\n    </button>");return $.render(n,t).addEventListener("click",(()=>e.play())),n},qt=$.css("\n  display: none;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  color: #fff;\n  background: #000;\n  z-index: 7;\n  align-items: center;\n  padding: 0 10px;\n  word-break: break-all;\n  justify-content: center;\n  text-align: center;\n"),It=$.css("display: flex;"),Dt={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},Nt=(e,t,n)=>{const o=$.render($.create("div."+qt,{"aria-label":"Error Overlay"}),t);function i(t){var n;let i="";if(t instanceof Event){const e=null==(n=t.target)?void 0:n.error;if(!e||!e.message&&"number"!=typeof e.code)return;i=e.message||Dt[e.code]}else i=t.message;o.innerText=i||"UNKNOWN_ERROR",e.$root.classList.add(ce),Le(o,It)}return e.on(["videosourcechange","videoqualitychange","loadedmetadata"],(function(){Se(o,It),e.$root.classList.remove(ce),o.innerText=""})),e.on("error",(e=>(e=>{n.errorBuilder?n.errorBuilder(e,o,(e=>i(e))):i(e)})(e.payload))),i},Vt=$.css({position:"absolute",top:"0",bottom:"0",left:"0",right:"0",display:"none","align-items":"center","justify-content":"center",["@global ."+te+" &"]:{display:"flex"}}),_t=$.css({position:"relative",overflow:"hidden",width:"20%",height:"4px","border-radius":"4px","&::before,&::after":{display:"block",content:"''",position:"absolute",height:"100%",width:"100%","background-color":"var(--primary-color)","border-radius":"4px"},"&::before":{opacity:"0.4"},"&::after":{animation:"indeterminate 1.3s infinite linear","transform-origin":"0% 50%"},"@keyframes indeterminate":{"0%":{transform:"translateX(0) scaleX(0)"},"10%":{transform:"translateX(0) scaleX(0.2)"},"40%":{transform:"translateX(0) scaleX(0.7)"},"60%":{transform:"translateX(60%) scaleX(0.4)"},"100%":{transform:"translateX(100%) scaleX(0.2)"}}}),Ut=(e,t)=>{const n=$.create("div."+Vt,{"aria-label":"Loading"},""+(ve.get("loadingIndicator")||'<div class="'+_t+'"></div>'));$.render(n,t)},Xt=$.css({width:"100%",height:"100%",position:"absolute",top:"0",left:"0",right:"0",bottom:"0",["@global ."+re+" &"]:{"z-index":"8"}}),Wt=e=>{const t="true"==e.getAttribute("aria-checked");e.setAttribute("aria-checked",""+!t),((e,t)=>{var n=[],o=e.parentNode.children;for(let i=0,r=o.length;i<r;i++)o[i]!==e&&(null==t||t(o[i]),n.push(o[i]))})(e,(e=>e.setAttribute("aria-checked",""+t)))},Yt=$.css({position:"absolute",display:"none",top:"0.625em",left:"0.625em",right:"0.625em","z-index":9,"margin-top":"var(--control-bar-height)",transition:"margin 0.2s",["@global ."+le+" &"]:{"margin-top":0}}),Qt=$.css("\n  -moz-user-select: all;\n  -webkit-user-select: all;\n  -ms-user-select: all;\n  user-select: all;\n  color: #fff;\n  background-color: var(--shadow-background-color);\n  border-radius: 2px;\n  padding: 5px 10px;\n  font-size: 0.875em;\n"),Kt=$.css(i||(i=f(["\n  text-align: center;\n"]))),Jt=$.css(r||(r=f(["\n  text-align: right;\n"]))),Gt=$.css(s||(s=f(["\n  bottom: 6em;\n  top: initial;\n"]))),Zt={center:$.css(a||(a=f(["\n  top: 50%;\n  text-align: center;\n  transform: translateY(-50%);\n"]))),left:"","top-left":"",top:Kt,"top-center":Kt,"top-right":Jt,right:Jt,bottom:Gt,"left-bottom":Gt},en=$.css("display:block;");function tn(e){return URL.createObjectURL(new Blob([e],{type:"text/vtt"}))}const nn="Subtitle";class on{constructor(e,t,n,o){this.player=e,this.setting=t,this.el=n,this.isShow=!1,this.update=()=>{let e="";const t=this.$track.track.activeCues;if(null==t?void 0:t.length)for(let n=0;n<t.length;n++){const o=t[n];o&&(e+=o.text.replace(/\\h/g,"&nbsp;").split(/\r?\n/).map((e=>"<p><span>"+e+"</span></p>")).join(""))}this.$dom.innerHTML=e},window.TextDecoder?(this.options=Object.assign({source:[]},o),this.createContainer(),this.changeSource(this.options.source),this.player.on(["destroy","videosourcechange"],this.destroy.bind(this)),this.player.on("videoqualitychang",(()=>{this.isShow&&this.hide()})),this.player.on("videoqualitychanged",this.fetchSubtitle.bind(this))):e.emit("notice",{text:e.locales.get("TextDecoder not supported")})}changeSource(e){var t;null==(t=this.setting)||t.unregister(nn),this.processDefault(e),this.loadSetting(),this.currentSubtitle&&(this.player.isSourceChanging||isNaN(this.player.duration)||this.player.duration<1?this.player.once("loadedmetadata",this.fetchSubtitle.bind(this)):this.fetchSubtitle())}createContainer(){const e=this.el,t=this.options,n=t.color,o=t.shadow,i=t.fontSize,r=t.bottom,s=t.fontFamily,a=t.background,l=t.marginBottom;this.$dom=$.create("div."+$.css(Object.assign({left:"2%",right:"2%","text-align":"center","pointer-events":"none",position:"absolute","line-height":"1.5","font-family":s||"inherit",color:n||"#fff","text-shadow":o||"1px 0 1px #000, 0 1px 1px #000, -1px 0 1px #000, 0 -1px 1px #000, 1px 1px 1px #000, -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000",bottom:r||"2%","font-size":(i||(q?16:20))/16+"em","& > p":{margin:0,"& span":{"white-space":"pre-wrap",background:a?"rgba(8, 8, 8, 0.75)":"inherit",padding:"0 0.25em"}}},!q&&{"margin-bottom":l||"2.2em",transition:"margin 0.3s",["@global ."+le+" &"]:{"margin-bottom":0}})),{"aria-label":"Subtitle"}),$.render(this.$dom,e)}createTrack(){const e=this.player.$video;if(this.$track=$.render($.create("track",{default:!0,kind:"metadata",id:"primary"}),e),!this.player._requestFullscreen){const t=(this.$iosTrack=$.create("track",{default:!1,kind:"captions",id:"__Orz__"})).track;$.render(this.$iosTrack,e),t.mode="hidden",this.player.on("fullscreenchange",(e=>{e.payload.isWeb||setTimeout((()=>{const e=this.player.isFullScreen&&this.isShow;t.mode=e?"showing":"hidden"}))}))}}changeOffset(e){e&&[this.$track,this.$iosTrack].forEach((t=>{if(!t)return;const n=t.track.cues,o=this.player.duration;Array.from(n||[]).forEach((t=>{t.startTime=ke(t.startTime+e,0,o),t.endTime=ke(t.endTime+e,0,o)}))}))}processDefault(e){this.options.source=e,this.currentSubtitle=e.find((e=>e.default))}show(){this.isShow=!0,this.$track.addEventListener("cuechange",this.update)}hide(){const e=this.$track,t=this.$dom;this.isShow=!1,t.innerHTML="",e.removeEventListener("cuechange",this.update)}fetchSubtitle(){var e;if(!this.currentSubtitle)return;this.$track||this.createTrack();const t=this.currentSubtitle,n=this.player,o=this.$track,i=this.$iosTrack,r=this.options,s=t.src,a=t.encoding,l=t.type,c=void 0===l?"auto":l,d=t.offset;return Promise.resolve(null==(e=r.onChange)?void 0:e.call(r,t)).then((e=>null==e?fetch(s).then((e=>e.arrayBuffer())).then((e=>new TextDecoder(a).decode(e))):e)).then((e=>{var t,n;if(!e)throw new Error("Empty Subtitle");switch("auto"==c?null==(t=/srt|ass|vtt(#|\?|$)/i.exec(s))?void 0:t[0]:c){case"srt":return tn("WEBVTT \r\n\r\n".concat((n=e,n.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,((e,t,n)=>{let o=n.slice(0,3);return 1===n.length&&(o=n+"00"),2===n.length&&(o=n+"0"),t+","+o}))).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/{[\s\S]*?}/g,"").concat("\r\n\r\n")));case"ass":return tn(function(e){const t=new RegExp("Dialogue:\\s\\d+,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}(.*)$","i");return"WEBVTT\r\n\r\n"+e.split(/\r?\n/).map((e=>{const n=e.match(t);return n&&n[1]&&n[2]&&n[5]?{start:n[1],end:n[2],text:(o=n[5].replace(/{[\s\S]*?}/g,"").replace(/\\N/g,"\r\n").replace(/\\n/g," ").replace(/\\h/g,"&nbsp;"),o.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[e]||e))))}:null;var o})).filter((e=>null!=e)).map(((e,t)=>t+1+"\r\n0"+e.start+"0 --\x3e 0"+e.end+"0\r\n"+e.text)).join("\r\n\r\n")}(e));case"vtt":return tn(e);default:return s}})).then((e=>{o.src&&URL.revokeObjectURL(o.src),(null==i?void 0:i.src)&&URL.revokeObjectURL(i.src),this.$track.addEventListener("load",(()=>{this.changeOffset(d),this.show()}),{once:!0}),o.src=e,i&&(i.src=e)})).catch((e=>{n.emit("notice",{text:"Subtitle"+e.message})}))}loadSetting(){if(!this.setting)return;const e=this.options.source;e.length&&this.setting.register({name:this.player.locales.get("Subtitle"),type:"selector",icon:ve.get("subtitle"),key:nn,onChange:e=>{var t;let n=e.value;n?n.src==(null==(t=this.currentSubtitle)?void 0:t.src)?this.show():(this.currentSubtitle=n,this.$dom.innerHTML="",this.fetchSubtitle()):this.hide()},children:[{name:this.player.locales.get("OFF"),default:!this.currentSubtitle}].concat(null==e?void 0:e.map((e=>{var t;return{name:e.name,default:(null==(t=this.currentSubtitle)?void 0:t.src)==e.src,value:e}})))})}destroy(){var e;const t=this.$dom,n=this.$track,o=this.$iosTrack;null==n||n.removeEventListener("cuechange",this.update),null==(e=this.setting)||e.unregister(nn),(null==n?void 0:n.src)&&URL.revokeObjectURL(n.src),(null==o?void 0:o.src)&&URL.revokeObjectURL(o.src),null==n||n.remove(),null==o||o.remove(),t.innerHTML="",this.isShow=!1,this.$track=this.$iosTrack=void 0}}const rn={theme:{primaryColor:"#6668ab",progress:{position:"top",mini:!0},controller:{setting:"auto",display:"always",coverButton:!0,displayBehavior:"hover"}},fullscreen:!0,autoFocus:!0,forceLandscapeOnFullscreen:!0,settings:["loop"],keyboard:{focused:!0},speeds:["2.0","1.5","1.25","1.0","0.75","0.5"]};class sn{constructor(e){var t;this.key="ui",this.version="1.3.4-beta.2",this.name="oplayer-theme-ui",this.keyboard={},this.setting={},this.menu={},this.progressHoverCallback=[],this.config=E({},rn,e),(null==(t=this.config.keyboard)?void 0:t.global)&&(this.config.keyboard.focused=!1)}apply(e){var t;const n=this.config;this.player=e;const o=this.$root=$.create("div."+(e=>{var t;return $.css(Object.assign({"--primary-color":""+e.theme.primaryColor,"--shadow-background-color":"rgba(28 ,28 ,28 , .9)","--control-bar-height":(null==(t=e.theme.controller)?void 0:t.display)?"2.5em":0,position:"absolute",top:"0",left:"0",width:"100%",height:"100%","line-height":1,"font-size":q?"16px":"18px","&, & > *":{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)"},"& [hidden]":{display:"none"}},{["@global ."+de+" &"]:{"font-size":q?"18px":"22px"},["@global ."+ie+" &"]:{"font-size":q?"18px":"22px"}}))})(n));return((e,t)=>{const n=t.theme.watermark;if(!n)return;const o=e.$watermark=document.createElement("img");o.setAttribute("alt","watermark");for(const i in n.style)o.style[i]=n.style[i];for(const i in n.attrs)o.setAttribute(i,n.attrs[i]);o.src=n.src,e.$root.appendChild(o)})(this,n),e.isNativeUI?(be(e),Ht(e,o),Ut(0,o),void $.render(o,e.$root)):(this.icons=ve.setupIcons(n.icons),ye(e,n),Ae(this),Nt(e,o,n),(e=>{const t=e.player,n=e.$root,o=$.create("div."+Yt,{"aria-label":"Notice"},'<span class="'+Qt+'"></span>'),i=o.querySelector("."+Qt),r=$e((()=>Se(o,en)),2e3).callee;function s(e,t){i.innerHTML=e,o.className=Yt+" "+en+" "+Zt[t||"left"],r()}t.on("notice",(e=>{let t=e.payload;return s(t.text,t.pos)})),e.notice=s,$.render(o,n)})(this),Ut(0,o),(null==(t=n.theme.controller)?void 0:t.coverButton)&&(this.$coverButton=Ht(e,o)),jt(this),(e=>{const t=e.player,n=e.$root,o=e.$mask=$.create("div."+Xt);let i,r=0;o.addEventListener("click",(()=>{Te(t.$root,re)||(q?e.toggleController():(0==r&&t.togglePlay(),i&&clearTimeout(i),i=window.setTimeout((()=>{2==r&&(t.togglePlay(),t.toggleFullScreen()),r=0}),200)),r+=1)})),$.render(o,n)})(this),lt(this),(e=>{var t;const n=e.config.menu,o=[],i=null==(t=e.$controllerBar)?void 0:t.lastElementChild,r=e.$controllerBottom.lastElementChild,s=[i,r].filter(Boolean);function a(t){var n,i;const r=t.target,s=r.getAttribute("aria-label"),a=o.find((e=>e.name==s));a&&"true"!=r.getAttribute("aria-checked")&&("SPAN"==r.tagName.toUpperCase()?(Wt(r),null==(n=a.onChange)||n.call(a,a.children[+r.getAttribute("data-index")],r.parentElement.previousElementSibling,e.player)):"BUTTON"==r.tagName.toUpperCase()&&(null==(i=a.onClick)||i.call(a,r,e.player)))}function l(e){const t=o.find((t=>t.name==e.name));t&&c(t.name);const n=e.name,a=e.icon,l=e.children,d="top"==e.position&&2==s.length;let u="";const h='\n    <button\n      aria-label="'+n+'"\n      '+(d?'data-tooltip-pos="down"':"")+'\n      class="'+ue+" "+(a?"":Ie)+" "+(e.children?"":ge)+'"\n      type="button"\n    >'+(a||n)+"</button>";u=e.children?'\n      <div class="'+Re+" "+He+'" data-dropdown-pos="'+e.position+'" aria-label="'+n+'">\n        '+h+"\n        <div class='"+je+" "+(d?Be:"")+"' role='menu'>\n          "+l.map(((e,t)=>'<span\n                  role="menuitemradio"\n                  aria-haspopup="false"\n                  aria-label="'+n+'"\n                  class="'+qe+'"\n                  aria-checked="'+Boolean(e.default)+'"\n                  data-index="'+t+'"\n                >'+e.name+"</span>")).join("")+"\n          </div>\n      </div>":h,d?i.insertAdjacentHTML("afterbegin",u):r.insertAdjacentHTML("afterbegin",u),o.push(e)}function c(e){s.forEach((t=>{var n,o;null==(n=t.querySelector("button[aria-label='"+e+"']"))||n.remove(),null==(o=t.querySelector("div[aria-label='"+e+"]'"))||o.remove()}))}s.forEach((e=>{e.addEventListener("click",a)})),n&&n.forEach(l),e.menu={register:function(e){(Array.isArray(e)?e:[e]).forEach(l)},unregister:c,select:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];s.forEach((o=>{const i=o.querySelector("."+je+" > span[aria-label='"+e+"']:nth-child("+(t+1)+")");i&&(Wt(i),n&&i.click())}))}}})(this),function(e){const t=e.player,n=e.$root,o=e.config.subtitle,i=e.setting;e.subtitle=new on(t,i,n,o)}(this),function(e){const t=e.player,n=e.config.speeds,o=e.setting;(null==n?void 0:n.length)&&o&&(o.register({key:Oe,type:"selector",name:t.locales.get("Speed"),icon:ve.get("playbackRate"),children:n.map((e=>({name:1==+e?t.locales.get("Normal"):e+"x",value:+e,default:t.playbackRate==+e}))),onChange:e=>{let n=e.value;return t.setPlaybackRate(n)}}),t.on("ratechange",(()=>{const e=t.playbackRate,i=n.findIndex((t=>+t==e));-1==i?o.updateLabel(Oe,e+"x"):o.select(Oe,i,!1)})))}(this),Ce(this),function(e,t){t.forceLandscapeOnFullscreen&&!H&&q&&e.on("fullscreenchange",(t=>{var n,o,i,r;!t.payload.isWeb&&e._requestFullscreen&&(e.isFullScreen?null==(o=null==(n=globalThis.screen.orientation)?void 0:n.lock)||o.call(n,"landscape"):null==(r=null==(i=globalThis.screen.orientation)?void 0:i.unlock)||r.call(i))}))}(e,n),$.render(o,e.$root),this)}destroy(){}}return globalThis.window&&(globalThis.window.OUI=function(e){return new sn(e)}),Object.assign(Z,ee),Z}));
